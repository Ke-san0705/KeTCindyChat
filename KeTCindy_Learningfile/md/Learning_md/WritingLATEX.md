# WritingLATEX ドキュメント

## LATEX.pdf

### Page 1

初等数学LATEXマクロ集emath.styver. 1.54使用例tDB2005/10/31概 要中学・高校で数学のプリントを作る際に必要な記号，環境などを集めたマクロ集です。LATEX2εを前提とします。このマクロ集のマクロについてのご質問，バグ報告，修正・追加の提案等はhttp://emath.s40.xrea.com/の掲示板へどうぞ。

### Page 2

目 次1 代数 11.1 等しくない記号 =\ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11.2 近似等号 (cid:2) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 111.3 分数記号 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12391.4 約分記号 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1621.5 パーセント記号 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 3訂正1.6 訂正 誤り. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31.7 整式の除法（縦書割算） (cid:2) x −4 . . . . . . . . . . . . . . . . . . . . . . 6x−1 x2−5x+21 1 3 4 −6 −21.8 組み立て除法 1 4 8 2 . . . . . . . . . . . . . . . . . . 71 4 8 2 01 3 −→ 61.9 タスキガケ 2 5 −→ 5 . . . . . . . . . . . . . . . 811−2x + 13y = 11+) 2x − 3y = − 11.10 加減法 10y = 10 . . . . . . . . . . . . . . . . . . . 9√1.11 累乗根 32 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 101.12 累乗の累乗 (ap)q . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 11−→1.13 ベクトル記号 (cid:2)a, AB . . . . . . . . . . . . . . . . . . . . . . . . . . . . 121.13.1 鏃の形状 AB . . . . . . . . . . . . . . . . . . . . . . . . . . 131.14 絶対値記号 (cid:2)a ， 1+x . . . . . . . . . . . . . . . . . . . . . . . . 141−x1.14.1 Y=zettaiti . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 141.14.2 Y=emabs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 141.14.3 Y=vabs . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 151.14.4 絶対値記号のネスト . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 171.15 ガウス記号 [x] . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17(cid:3) (cid:4)a b1.16 行列 . . . . . . . . . . . . . . . . . . . . . . . . . . . 17c d1.17 複素数 x+yi . . . . . . . . . . . . . . . . . . . . . . . . . . . . 191.18 共役複素数 z . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 191.19 極形式 cosθ+isinθ . . . . . . . . . . . . . . . . . . . . . . . . . 202 幾何 212.1 度の記号(小さな丸) 60◦ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 212.2 角, 三角形 ∠A, (cid:4)PQR . . . . . . . . . . . . . . . . . . . . . . . . . 21i

### Page 3

2.3 平行とその否定 //, /\/ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 212.4 相似の記号 ∽ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 212.5 円弧を表す記号(cid:5)AB . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 222.6 平行四辺形の記号 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 223 解析 23(cid:6)n3.1 数列記号 {an }, ak . . . . . . . . . . . . . . . . . . . . . . . . . 23k=13.2 極限 lim an . . . . . . . . . . . . . . . . . . . . . . . . . . . . 23n→∞3.3 階差数列 1 2 4 7 11 ··· . . . . . . . . . . . . . . . . . . . . 24···1 2 3 4(cid:2)(cid:4) (cid:5)3.4 増減・凹凸 (cid:2)(cid:2) (cid:3)(cid:3) (cid:4). . . . . . . . . . . . . . . . . . . . . . . . . . . 24(cid:7)b3.5 積分記号 f(x)dx . . . . . . . . . . . . . . . . . . . . . . . . . . 25(cid:8)a (cid:9)π3.6 定積分 −cosx . . . . . . . . . . . . . . . . . . . . . . . . . . 2503.7 デルタ記号 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 254 確率 264.1 集合の記号 {x| 0<x<1} . . . . . . . . . . . . . . . . . . . . . . . 264.1.1 Y=niの否定 (cid:5)/ . . . . . . . . . . . . . . . . . . . . . . . . . . . 264.2 階乗記号 n! . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 264.3 順列・組合せの記号 nCr nPr nHr nΠr . . . . . . . . . . . . . . . . . . . . . . 265 数式番号 285.1 丸付き文字 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 285.1.1 丸付き文字(cid:6)1 (cid:6)A (cid:6)ア . . . . . . . . . . . . . . . . . . . . . . . 285.1.2 白黒反転の丸付き文字 1 A ア . . . . . . . . . . . . . . . . . . . . . . . 295.1.3 縦長の丸付き文字 1 A . . . . . . . . . . . . . . . . . . . . . . . . . 305.1.4 横長の丸付き文字 1 A . . . . . . . . . . . . . . . . . . . . . . . . 315.1.5 ○のサイズ変更 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 315.2 数式番号のフォーマット . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 325.3 数式番号のリセット . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 335.4 連立方程式 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 355.5 本文中の連立方程式に数式番号 . . . . . . . . . . . . . . . . . . . . . . . . . . . . 365.6 ダッシュ付きの数式番号(cid:6)1(cid:5). . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 375.7 align*環境で数式番号 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 385.8 等号の縦揃え . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 385.9 Y=item直後の縦揃え数式 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 405.9.1 aligned環境 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 405.9.2 Y=itemtopmath . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 415.9.2.1 左インデントの調整 . . . . . . . . . . . . . . . . . . . . . . . . . 415.9.2.2 縦方向の補正 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 435.9.2.3 Y=itemtopmathの書式 . . . . . . . . . . . . . . . . . . . . . . . . 43ii

### Page 4

6 図の取り込み 446.1 図の周りへの回り込み . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 446.1.1 mawarikomi 環境 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 446.1.2 mawarikomi*環境 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 446.1.3 mawarikomi環境内にlist環境 . . . . . . . . . . . . . . . . . . . . . . . . . 456.1.4 回り込みの行数指定オプション . . . . . . . . . . . . . . . . . . . . . . . . 466.1.5 テキストと図の横間隔 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 476.1.6 図の位置の微調整 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 486.1.7 段落途中からの回り込み . . . . . . . . . . . . . . . . . . . . . . . . . . . . 496.1.8 Y=caption の使用 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 516.1.9 書式 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 536.1.10 図の左配置 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 536.1.11 図幅指定の省略 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 546.1.12 テキスト部が短いとき . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 556.1.13 改ページとの関係(1) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 576.1.14 改ページとの関係(2) . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 666.2 複数の図の周りへの回り込み. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 726.2.1 図の配置 — zuhaiti環境 . . . . . . . . . . . . . . . . . . . . . . . . . . . . 726.2.2 枠の設定 — Y=wakudori . . . . . . . . . . . . . . . . . . . . . . . . . . . . 736.2.3 図の左配置 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 756.2.4 図の位置の微調整 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 766.2.5 行の左右に枠 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 776.2.6 listとの併用 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 786.2.7 Y=captionの使用 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 806.2.8 テキスト部が複数の段落を持つ場合 . . . . . . . . . . . . . . . . . . . . . . 816.2.9 Y=unitlengthの変更について . . . . . . . . . . . . . . . . . . . . . . . . . 816.3 図番号の書式修正 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 827 enumerate環境の機能拡張 827.1 小問を横に並べる。 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 837.1.1 横に並べる個数指定 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 837.1.2 ベタ並べ. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 907.1.3 yokoenumerate . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 917.2 enumerate 環境の中断・継続 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 927.3 指定した項目番号に*などを附加 . . . . . . . . . . . . . . . . . . . . . . . . . . . . 937.4 横幅一定のローマ数字 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 947.5 固定桁数のナンバリング 001, 002, 003, ... . . . . . . . . . . . . . . . . . . . . . . 957.6 番号付けにカタカナ・ひらがなを使う。 . . . . . . . . . . . . . . . . . . . . . . . 967.7 enumerate 環境のオプション文字の追加. . . . . . . . . . . . . . . . . . . . . . . . 967.8 enumerate環境における番号付けの初期値・刻み値変更 . . . . . . . . . . . . . . . 987.9 enumerate環境の前後左右の空き調整 . . . . . . . . . . . . . . . . . . . . . . . . . 1007.9.1 左インデント . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1027.9.2 縦間隔 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 103iii

### Page 5

7.9.3 縦間隔のグルー . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1047.9.4 Y=enumSep . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1047.9.5 Y=enumLmargin . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1057.10 edaenumerate環境の前後左右の空き調整 . . . . . . . . . . . . . . . . . . . . . . . 1077.10.1 edaenumerate環境 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1077.10.2 preedasep=..オプション . . . . . . . . . . . . . . . . . . . . . . . . . . . 1087.10.3 postedasep=..オプション . . . . . . . . . . . . . . . . . . . . . . . . . . . 1107.10.4 edatopsep=..オプション . . . . . . . . . . . . . . . . . . . . . . . . . . . 1117.11 Y=item直後のedaenumerate環境 . . . . . . . . . . . . . . . . . . . . . . . . . . . 1117.11.1 問題提示. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1117.11.2 大問の左インデント操作との競合 . . . . . . . . . . . . . . . . . . . . . . . 1127.11.3 edaenumerate環境に<edafirstindent=..>オプション . . . . . . . . . . . 1137.11.4 emathAeとの併用 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1137.11.5 betaenumerate環境では . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1157.11.6 解答部のbetaenumerate . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1167.12 list環境の行間. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1177.12.1 itemize環境 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1177.12.2 description環境 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1187.12.3 enumerate環境 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1187.13 問題番号の参照 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1208 その他一般 1238.1 数式モードの中で英大文字をローマン体にする。 . . . . . . . . . . . . . . . . . . 1238.1.1 caprm環境 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1238.1.2 [o]オプション . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1248.1.3 コマンド型 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1248.1.4 [l]オプション . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1258.1.5 Y=mathRM . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1258.1.6 Y=bekutoru* . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1258.1.7 Y=mitSなど . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1268.2 インデント . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1268.3 Y=EMparbox. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1308.3.1 Y=parbox . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1308.3.2 Y=EMparbox . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1308.3.3 Y=EMparboxのベースライン . . . . . . . . . . . . . . . . . . . . . . . . . . 1318.4 Y=emovalbox . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1338.5 数式の配置 左（右）寄せと中央揃えの切り替え . . . . . . . . . . . . . . . . . . . 1338.6 数式番号を左に出力 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1358.7 行末にマーク . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1368.8 リーダー罫 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1378.9 支柱 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1388.10 下線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1408.10.1 Y=underline . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 140iv

### Page 6

8.10.2 波下線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1408.10.2.1 ulem.sty . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1408.10.2.2 Y=namikasen . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1418.10.2.3 波二重下線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1418.10.2.4 太波下線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1418.10.2.5 Y=namikasenと上下のアキ . . . . . . . . . . . . . . . . . . . . . . 1429 メモリ不足への対応 1439.1 pool size . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1439.2 main memory size . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1439.3 hash size . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1459.4 save size . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1459.5 number of strings . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14510 謝辞 146v

### Page 7

1 代数1.1 等しくない記号 = \等しくない記号を表すには Y=ne があります。しかし，日本では否定の斜線を逆向きにする習慣のようです。そのためのコマンド Y=neqq を 定義しました。その効用は：(cid:2) (cid:3)Y=neとY=neqqの違いa(cid:7)=b$a Y=ne b$=YY= →a=\ b$a Y=neqq b$(cid:4) (cid:5)この記号は，数式の中で使われる位置によりサイズが自動的に変わります。(cid:2) (cid:3)Y=neqqのサイズ調整 i=\ j(cid:10)$i Y=neqq j$=YY=[1ex] → Aij$Y=displaystyle=Ysum_{i =Yneqq j}A_{ij}$ i=\j(cid:4) (cid:5)1.2 近似等号 (cid:2)AMSFontsには，Y=fallingdotseqが用意されています。emathでは，Y=kinziという同義語を定義してあります。Y=kinzi$(1+x)^n =Ykinzi 1+nx$ −→ (1+x)n (cid:2)1+nx11.3 分数記号2分数を表すには，Y=frac というコマンドがあります。しかし，分数罫線が短いという憾みがあります。また，分数罫線と分母・分子との縦間隔が空き過ぎである，とのご意見もあります。そこでY=bunsuuというコマンドを作りました。次の2つを比較してください。Y=dfracとY=bunsuuの比較1$Y=dfrac12$ −→2$Y=bunsuu12$ −→ 12391.4 約分記号62分数で，分母・分子の数値に斜線を引いて約分後の数値を記述するためのコマンド Y=yakubun です。斜線の引き方に2種類，約分した後の数値を記述する位置に3通りの方法があります。デフォルトは元の数値の上下です。1

### Page 8

なお，この節のコマンドは，epic.sty の中で定義されているY=drawline を用いています。したがって epic.sty, eepic.sty を読み込んでおくことが必要です。斜線の向きは[r]オプションを付けると逆向きになります。Y=yakubun8$Y=yakubun{16}{6}{8}{3}$ −→ 16638$Y=yakubun[r]{16}{6}{8}{3}$ −→ 1663次は，約分した数値を元の数値の右肩に乗せます。Y=yakubun<r>8$Y=yakubun<r>{16}{6}{8}{3}$ −→ 16368$Y=yakubun[r]<r>{16}{6}{8}{3}$ −→ 1636最後は，約分した数値を元の数値の左肩に乗せます。Y=yakubun<l>$Y=yakubun<l>{16}{6}{8}{3}$ −→81636$Y=yakubun[r]<l>{16}{6}{8}{3}$ −→81636Y=yakubun の書式です。Y=yakubunの書式Y=yakubun[#1](#2)<#3>#4#5#6#7#1: 斜線の引き方を指定するオプション引数で，s : 斜線（／） [デフォルト]r : 斜線（＼）#2: 線の色#3: 約分した結果の表示位置を指定するオプション引数で，c : 中央上下 [デフォルト]l : 左肩r : 右肩#4: 約分する前の分子#5: 約分する前の分母#6: 約分した後の分子#7: 約分した後の分母なお，分母・分子の最大公約数を求め，自動的に既約分数にしてしまうコマンド Y=Yakubun もあります。書式は Y=yakubun の書式とほとんど同様で，最後の2つの引数（約分後の分母・分子）が不要になる点だけが異なります。ただし，このコマンドを使用するときは，emathW.sty を読み込んでおく必要があります。2

### Page 9

また，いくつかの分数を掛ける式での約分を表現するには，後述の Y=Teisei コマンドが有効です。1.5 パーセント記号LATEXでのパーセント記号は Y=% で出力できますが，その形状に不満がある，という方もあるようです。pxfontsのそれをY=pxpercentとして用いることもできます。当然，pxfontsがインストールしてあるという前提です。具体的な使用法は sampleFx.texをご覧ください。訂正1.6 訂正 誤り約分後の数値を表示せず，単に斜線だけを引くコマンドが Y=teisei です。数学では，プラスとマイナスで相殺されるものに斜線を引く，などといったことができます。なお，この節のコマンドは，epic.styの中で定義されているY=drawlineを用いていています。したがって epic.sty, eepic.sty を読み込んでおくことが必要です。(cid:2) (cid:3)Y=teisei$Y=left(1-=Yteisei{=Ybunsuu12}=Yright)+Y=left(=Yteisei{=Ybunsuu12}-=Yteisei{=Ybunsuu13}=Yright)+Y=left(=Yteisei{=Ybunsuu13}-=Yteisei{=Ybunsuu14}=Yright)+Y=cdots =Ycdots+Y=left(=Yteisei{=Ybunsuu{1}{n}}-=Ybunsuu{1}{n+1}=Yright)= 1-Y=bunsuu{1}{n+1}$(cid:4) (cid:5)をタイプセットすると，+と−で相殺されるものに斜線(cid:11) (cid:12) (cid:11) (cid:12) (cid:11) (cid:12) (cid:11) (cid:12)1− 1 + 1 − 1 + 1 − 1 +······+ 1 − 12 2 3 3 4 n n+1=1− 1n+1Y=teisei コマンドは指定した文字列に2種類の斜線を引く他，水平線，二本の水平線などで取消し線を引くことができます。その際，必要なら線の色を指定することができます。さらに，訂正前の文字列の上方に，訂正後の文字列をおくことができます。Y=teisei[h]$a_n=a_1+=Yretuwa{k=1}n−1{Y=teisei[h](red){n}[% (cid:6)n−→ an =a1+ bk{Y=scriptstyle n-1}]} k=1b_k$Y=teiseiの書式です。3

### Page 10

Y=teiseiの書式Y=teisei[#1](#2)#3[#4]<#5>#1: 線の引き方についてのオプション引数で，s : 斜線（／） [デフォルト]r : 斜線（＼）h : 横線d : 横二本線#2: 線の色#3: 線を引く対象#4: 訂正後の文字列#5: 斜線の位置を修正するベクトルkey=val の形式dLT=(dx,dy), dLB=, dRT=, dRB= 右辺値は pt を単位とする数値<#5>オプションは，斜線の位置を修正するためのオプションですが，この機能はemathPh.styを必要とします。まずは基本的な使用法の確認です。(cid:2) (cid:3)Y=teisei→ abY=teisei{ab}(cid:4) (cid:5)打ち消し線を，左下(LB)を少し左へ(dLB={(-1,0)})，右上(RT)を少し右下へ(dRT={(1,-2)})動かしてみます。ここでL : left, R : right, T : top, B : bottom右辺ベクトル成分は，ptを単位とする無名数です。(cid:2) (cid:3)Y=teisei→ abY=teisei{ab}<dLB={(-1,0)},dRT={(1,-2)}>(cid:4) (cid:5)水平の打ち消し線は，左端をLT, 右端をRTとしてあります。(cid:2) (cid:3)Y=teiseiabY=teisei[h]{ab}=YY= →abY=teisei[h]{ab}<dLT={(-.5,-1)},dRT={(.5,-1)}>(cid:4) (cid:5)4

### Page 11

水平の二重線は上のほうの左端がLT, 右端がRT下のほうの左端がLB, 右端がRB(cid:2) (cid:3)Y=teiseiY=teisei[d]{ab}=YY= ab→Y=teisei[d]{ab}<dLT={(-.5,-1.5)},dRT={(.5,-1.5)},% abdLB={(-.5,-1)},dRB={(.5,-1)}>(cid:4) (cid:5)Y=teisei は，訂正後の文字列を，訂正前の文字列と同じサイズで上方に配置します。それに対して Y=Teisei は，訂正後の文字列を小さ目のサイズ (scriptstyle) で，配置場所をいろいろと指定することができます。使用例を見ていただきましょう。(cid:6) (cid:7)$Y=bunsuu{5}{=YTeisei{6}{2}}Y=times=Ybunsuu{=YTeisei{9}{3}}{4}=Y=bunsuu{15}{8}$(cid:8) (cid:9)3−→ 5 × 9 = 156 2 4 8Y=Teiseiはネストすることもできます。(cid:6) (cid:7)$Y=bunsuu{=YTeisei{6}{=YTeisei[r]{=Yscriptstyle 2}{1}}}{13}Y=times=Ybunsuu{5}{=YTeisei{33}{11}}Y=times=Ybunsuu{1}{=YTeisei[r]{2}{1}}==Ybunsuu{5}{143}$(cid:8) (cid:9)21−→ 6 × 5 × 1 = 513 33 11 2 1 143Y=Teiseiの書式です。5

### Page 12

Y=Teiseiの書式Y=Teisei[#1](#2)#3[#4]#5#1: 線の引き方についてのオプション引数で，s : 斜線（／） [デフォルト]r : 斜線（＼）h : 横線d : 横二本線#2: 線の色#3: 線を引く対象#4: 訂正後の文字位置r = 右上 (=tr=rt)l = 左上 (=tl=lt)t = 上b = 下rb=br=右下lb=bl=左下#5: 訂正後の文字列 (scriptstyle)注 Y=teiseiコマンドなどにより描画される斜線はtpic-specialsを用いています。specialはdvi-wareに依存します。そこで，Y=vruleで描画した線をY=rotateboxで回転して斜線を描画する道も用意してあります。もちろんこれもdvi-wareに依存しますから，ケースバイケースで使い分けをする必要がありましょう。さて，その実現法はY=def=Ysyasen{=Yrotateline}を宣言します。ただし，Y=rotateboxはグラフィックスパッケージを必要としますから，emathでは，emathPh.styを読み込んでおかなければなりません。x −41.7 整式の除法（縦書割算） (cid:2)x−1 x2−5x+2整式の除法を縦書きで記述するためのコマンドがY=zyohouです。6

### Page 13

(cid:2) (cid:3)縦書割算$Y=zyohou{x^2,-5x,+2}% 被除式 (cid:2) x −4{x,-1}% 除式x−1 x2−5x+2{x,-4}% 商x2 −x−→{x^2,-x,% 途中の計算式−4x+2-4x,+2,% を , で区切って−4x+4-4x,+4,% 並べる．−2-2}$(cid:4) (cid:5)係数に分数が登場するときは，Y=frac をお使いください。(cid:2) (cid:3)縦書割算$Y=zyohou{2x^2,-2x,-1}% (cid:2) x−12{2x,-1}%2x−1 2x2−2x −1{x,-=Yfrac12}{%2x2 −x−→2x^2,-x,−x −1-x,-1,−x+ 12−3-x,+=Yfrac12, 2-Y=frac32}$(cid:4) (cid:5)Y=dfrac や Y=bunsuu の場合は，Y=noexpand を併用することになりますが，面倒です。なお，係数が整数の範囲内の一変数の場合は emathW.sty で定義されている Y=izyohou が便利です。こちらは，被除式，除式の係数だけを与えれば，商はもちろん，途中の計算式もすべてTEXが求めてくれますから，Y=izyohou{1,-5,2}{1,-1}と記述するだけです。詳しくは emathW.styの使用例 sampleW.tex をご覧ください。1 1 3 4 −6 −21.8 組み立て除法 1 4 8 21 4 8 2 0整式を1次式で割ったときの商，余りを求める計算法に‘組み立て除法’があります。(cid:2) (cid:3) 2 1 −6 11 −6組み立て除法−→ 2 −8 6$Y=syndiv{1,-6,11,-6}{2}$1 −4 3 0(cid:4) (cid:5)すなわち Y=syndivコマンドの第1引数に，被除式の係数を降べき順にコンマで区切ったものを並べ，第2引数に除式のゼロ点を与えます。第2引数にコンマ区切りで複数のものを与えれば，商をさらに割っていくことができます。7

### Page 14

2 1 −6 11 −6(cid:2) (cid:3) 2 −8 6多段組み立て除法−→ 3 1 −4 3 0$Y=syndiv{1,-6,11,-6}{2,3}$3 −3(cid:4) (cid:5)1 −1 0Y=syndiv は整数係数しか扱うことができませんが，emathB.styには，分数係数を扱うことを可能としたY=Fsyndivが用意してあります。例えば$Y=Fsyndiv{3,-1,0,4}{-2/3}$(cid:11) (cid:12)とすることで，f(x)=3x3−x2+4に対してf −2を求めることができます。31 3 −→ 61.9 タスキガケ 2 5 −→ 511二次三項式を因数分解するとき，タスキガケの図を用いることがあります。(cid:2)タスキ(cid:3) 2x2+11x+15=(x+3)(2x+5)$2x^2+11x+15=(x+3)(2x+5)$ 1 3 −→ 6−→2 5 −→ 5$Y=tasuki{1}{2}{3}{5}$ 11(cid:4) (cid:5)横幅を少し狭くしたいときはY=stasukiを用います。1 3 −→ 6(cid:2) Y=stasuki (cid:3) 2 5 −→ 5$Y=tasuki{1}{2}{3}{5}$ 11−→1 3 −→ 6$Y=stasuki{1}{2}{3}{5}$ 2 5 −→ 5(cid:4) (cid:5)11文字式の場合は，タスキ計算もこちらでしておく必要があります。(cid:2) (cid:3)文字式のタスキY=begin{align*}& 2x^2+xy-3y^2+5x+5y+2=YY=={}& 2x^2+(y+5)x-(3y^2-5y-2)=YY=={}& 2x^2+(y+5)x-(y-2)(3y+1)=YY=={}& =Ybm{(x-y+2)(2x+3y+1)}Y=end{align*}$Y=Tasuki{1}{2}{-(y-2)}{3y+1}{-2y+4}{3y+1}{y+5}$(cid:4) (cid:5)8

### Page 15

2x 2 +xy−3y 2 +5x+5y+2=2x 2 +(y+5)x−(3y 2−5y−2)=2x 2 +(y+5)x−(y−2)(3y+1)−→=(x−y+2)(2x+3y+1)1 −(y−2) −→ −2y+42 3y+1 −→ 3y+1y+5タスキの左側だけを表示したいときは，Y=tasukiに[l]オプションをつけます。(cid:2) (cid:3)Y=tasukiの[l]オプション 1 3−→$Y=tasuki[l]{1}{2}{3}{5}$ 2 5(cid:4) (cid:5)文字式の場合も左側だけほしいときは Y=Tasuki ではなく，Y=tasukiの[l]オプションを使います。(cid:2) (cid:3)Y=tasukiの[l]オプション$Y=tasuki[l]{1}{2}{-(y-2)}{3y+1}$(cid:4) (cid:5)1 −(y−2)−→2 3y+1なお，たすきがけの図第3行については，次の2種類の変形版があります。(cid:2) (cid:3)Y=tasukikata=1 1 3 −→ 6Y=def=Ytasukikata{1} −→ 2 5 −→ 5$Y=tasuki{1}{2}{3}{5}$ 11(cid:4) (cid:5)(cid:2) (cid:3)Y=tasukikata=2 1 3 −→ 6Y=def=Ytasukikata{2} −→ 2 5 −→ 5$Y=tasuki{1}{2}{3}{5}$ 2 15 11(cid:4) (cid:5)なお，Y=tasukikataのデフォルト値は0です。−2x + 13y = 11+) 2x − 3y = − 11.10 加減法 10y = 10連立方程式を加減法で解くときの計算式を表示するためのマクロです。(cid:2) (cid:3) 3x − 6y = 9加減法−→ +) 2x + 6y = −4Y=kagenhou{3,-6,9}+{2,6,-4}5x = 5(cid:4) (cid:5)未知数の個数が増えたり，文字がx, yではない場合については，オプション引数で未知数を表す文字を指定します。次の例はa, b, c を未知数とする3元の連立です。9

### Page 16

(cid:2) (cid:3)加減法（3元）Y=kagenhou[a,b,c]{3,-6,9,3}-{2,-6,-4,8}(cid:4) (cid:5)3a − 6b + 9c = 3−→ −) 2a − 6b − 4c = 8a + 13c = −5問題部分のみを表示させるには，<M>オプションを付加します。(cid:2) (cid:3)Y=kagenhouの<M>オプションx + 2y = 3Y=kagenhou<M>{1,2,3}-{4,2,-1} → −) 4x + 2y = −1Y=smallskip(cid:4) (cid:5)縦方向の配置は，array環境に[b]オプションを与えてあります。(cid:2) (cid:3)Y=kagenhouの縦配置x + 2y = 3aY=kagenhou<M>{1,2,3}-{4,2,-1}z → −) 4x + 2y = −1a zY=smallskip(cid:4) (cid:5)これを変更するには，<pos=.>オプションを用います。右辺値はt/b/cのいずれかです。また，このオプションを<M> オプションと併用するときは，<kotae=no>の形式で与えます。(cid:2) (cid:3)Y=kagenhouの<pos=t>オプションa x + 2y = 3 zaY=kagenhou<pos=t,kotae=no>{1,2,3}-{4,2,-1}z → −) 4x + 2y = −1Y=smallskip(cid:4) (cid:5)√1.11 累乗根 3 2平方根，3乗根などを表記するにはLATEXで Y=sqrt が用意されています。(cid:2) (cid:3)累乗根√Y=begin{enumerate}[(1)](1) 2Y=item $=Ysqrt{2}$ −→√Y=item $=Ysqrt[3]{2}$ (2) 32Y=end{enumerate}(cid:4) (cid:5)この記号は，中の数式のサイズにしたがって大きさが変化します。便利な反面，次の(1)では，高さが不揃いとなりますので，支柱 Y=mathstrut をいれて高さをそろえるなどの工夫が必要なことがあります。(cid:2) (cid:3)高さの調節(1)$Y=sqrt{ab}==Ysqrt{a}=Ysqrt{b}$=YY=$Y=sqrt{=Ymathstrut ab}=Y=sqrt{=Ymathstrut a}=Ysqrt{=Ymathstrut b}$(cid:4) (cid:5)10

### Page 17

√ √ √ab= a b−→ (cid:13) (cid:13) (cid:13)ab= a bY=mathstrutは，‘(’の高さと深さを持つ支柱ですが，深さがある分根号が下の方に伸びてしまう，という批判もあります。このときは，支柱を Y=vphantom を用いて(cid:2) (cid:3)高さの調節(2)$Y=sqrt{=Yvphantom{b}ab}=Y=sqrt{=Yvphantom{b}a}=Ysqrt{b}$(cid:4) (cid:5)√ √ √−→ ab= a bつぎに，二重根号を Y=displaystyleで組むと(cid:2) (cid:3) (cid:14)二重根号 √−→ 2+ 3Y=[=Ysqrt{2+=Ysqrt3}=Y](cid:4) (cid:5)外側の根号が大きくなりすぎて2つの根号の縦間隔が空きすぎる，というご意見があります。対策は外側の根号に Y=textstyleをつけることです。emath.styでは，Y=textstyle=Ysqrt の省略形として Y=tsqrt を用意しています。(cid:2) (cid:3)Y=tsqrt (cid:13) √−→ 2+ 3Y=[=Ytsqrt{2+=Ysqrt3}=Y](cid:4) (cid:5)1.12 累乗の累乗 (ap)q累乗の累乗 (a^p)^q は，{(a^p)}^q と記述すると，(ap) q となり，2種の累乗 p と q のベースラインが異なります。高校の教科書などでは，これが揃っているものが多いようです。そのためのコマンドが Y=dpower です。次の2つを比較してください。Y=dpowerの効用${(a^p)}^q$ −→ (ap) q$Y=dpower{a}{p}{q}$ −→ (ap)q底 a が複雑になり，カッコを含むときは，外側のカッコの種類をY=dpower のオプション引数で指定することができます。Y=dpowerのオプション引数(cid:15)(cid:11) (cid:12) (cid:16)y p q−→$Y=dpower[=Y{]{=Yleft(=Ybunsuu yx=Yright)}{p}{q}$x(cid:17)(cid:11) (cid:12) (cid:18)y p q−→$Y=dpower[[]{=Yleft(=Ybunsuu yx=Yright)}{p}{q}$x話が前後しますが，累乗の位置を気にされる方があります。次の3つを比較してください。11

### Page 18

(cid:2) (cid:3)累乗の位置2x$2^x$ =YY= x2→$Y=displaystyle 2^x$ =YY= x2${2=Ymathstrut}^x$(cid:4) (cid:5)−−→(cid:2)1.13 ベクトル記号 a, ABLATEXで用意されている矢線付きのベクトル記号は Y=vec です。しかし，Y=vec{a}, =Yvec{b} などと並べたとき，矢線の高さが不揃いになります。その点を修正したY=bekuを作りました。下の例で，矢線の高さにご注目ください。Y=vecとY=bekuの比較$Y=vec{a}$, $=Yvec{b}$ −→(cid:2)a,(cid:2)b$Y=beku{a}$, $=Ybeku{b}$ −→(cid:2)a,(cid:2)b添字がついた場合です。添字付きベクトル(1)$Y=beku{a_n}$ −→ a(cid:2) n$Y=beku{a}_n$ −→(cid:2)an−→$Y=overrightarrow{=Ymathstrut a_n}$ −→ an上の3つのどれがお好みでしょうか。次は始点と終点を並べてその上に矢線を付ける表現です。LATEXでは，Y=overrightarrow を使いますが，これは数式モードの中でなければ使えません。$Y=overrightarrow{AB}$ とすると，AB が斜体になります。教科書では，点を表す記号は立体となっています。その点を工夫したのがY=bekutoruコマンドです。Y=bekutoru−−→$Y=overrightarrow{AB}$ −→ AB−→$Y=bekutoru{AB}$ −→ AB添字がつくと面倒になります。下の二つどちらがお好みでしょうか。添字付きベクトル(2)−−→Y=bekutoru{AB$_n$} −→ ABn−→$Y=bekutoru{AB}_n$ −→ ABn矢線の高さを調整するコマンドが Y=bekutorusityuuです。デフォルトは12

### Page 19

Y=vrule height .9zh width =Yz@すなわち.9zhとなっています。(cid:2) (cid:3)Y=bekutorusityuu−→Y=bekutoru{OP}=YY= OP→ −→Y=bekutorusityuu{=Yvphantom{OP}}% OPY=bekutoru{OP}(cid:4) (cid:5)すなわち，自然な高さでは矢印が文字にかかるのを嫌って，高くしています。Y=beku についても，Y=bekusityuuで高さを変更できます。(cid:2) (cid:3)Y=bekusityuuY=beku{a}=YY= (cid:2)a→Y=bekusityuu{=Yvphantom{a}}% (cid:2)aY=beku{a}(cid:4) (cid:5)こちらのデフォルトは，Y=vphantom{b}としてあります。Y=bekutoruにはアスタリスク付きのコマンドY=bekutoru*があります。これは後で述べるcaprm環境下で用いることを想定していますので，§8.1.6 (p.125)で解説します。1.13.1 鏃の形状 AB鏃の形状にご不満をお持ちの方が多いようです。それを変更する方法もあります。まずは，鏃を塗りつぶした三角形にする方法です。(cid:2) (cid:3)塗りつぶした鏃Y=bekutoru{AB} −→AB→ABY=bekutorukata{fill}Y=bekutoru{AB}(cid:4) (cid:5)すなわち，鏃の形状を変更するには，Y=bekutorukataコマンドを用います。ただし，このコマンドはemath.styではなく，emathPh.sty, emathFx.sty で定義されています。さらに，塗りつぶした二等辺三角形に窪みをつけたい，というご要望もあります。(cid:2) (cid:3)窪みもY=bekutoru{AB} −→AB→ABY=bekutorukata<.25>{fill}Y=bekutoru{AB}(cid:4) (cid:5)Y=bekutorukataの引数は，上記のfillの他に4種類—cm, eu, tx, xy—あります。ただし，txを使用するには，txfontsが必要です。また，xyを使用するには，Xy-picパッケージが必要です。さらに，emathFxをロードしておかねばなりません。具体的な実現方法については，sampleFx.texをご覧ください。13

### Page 20

(cid:2) 1+x1.14 絶対値記号 a ，1−x1.14.1 Y=zettaitiベクトルの大きさを表すのにも使われる絶対値記号です。LATEXでは $|=Ybeku{b}|$としますが，矢印が絶対値記号の上に飛び出しています。これを修正するコマンド Y=zettaitiを用意しました。上下を比べてみてください。|...|とY=zettaitiの比較−→$|=Ybekutoru{AB}|$ −→ |AB|−→Y=zettaiti{=Ybekutoru{AB}} −→ ABこの記号は中の式の高さにより伸縮します。絶対値記号の伸縮−→Y=zettaiti{=Ybunsuu{1}{3}=Ybekutoru{AB}} −→ 1 AB3−→Y=zettaiti{=Ybunsuu{m=Ybekutoru{OA}}{m+n}} −→ mOAm+nこのコマンドはベクトルに限らず一般の絶対値記号を表すことができます。|1−|x|| では，外側の絶対値記号と内側の絶対値記号が同じとなります。できれば外側の絶対値記号を大きくしたいものです。絶対値記号の伸縮オプション$|1-|x||$ −→ |1−|x||(cid:19) (cid:19)$Y=bigl|1-|x|=Ybigr|$ −→ (cid:19) 1−|x|(cid:19)Y=zettaiti[1.5pt]{1-=Yzettaiti{x}} −→ 1− x3行目は外側のY=zettaitiコマンドのオプション引数に1.5ptを与えることで実現しています。この数値だけ，標準の高さを上下それぞれ引き伸ばします。これは2行目のものとほぼ同じです。なお，Y=zettaiti の別名として，Y=EMabs も用いることができます。1.14.2 Y=emabsY=zettaitiは絶対値記号を付与する数式の高さ・深さを基準としていますから，上下不均等です。したがって他の括弧記号と併記するとおかしなことになります。14

### Page 21

(cid:2) (cid:3)Y=zettaiti$Y=zettaiti{%Y=bunsuu{a_1}{1+=Ybunsuu{1}{n}}}$=YY=a1だけをみているとよいのですが， 11+Y=[ Y=bunsuu1n=Yleft( nY=zettaiti{ だけ⎛をみているとよいのですが， ⎞→Y=bunsuu{a_1}{1+=Ybunsuu{1}{n}}} 1 ⎝ a1 +···+ an ⎠+Y=cdots+ n 1+ 1 1+ nn nY=zettaiti{などと，他の括弧記号と並べるとY=bunsuu{a_n}{1+=Ybunsuu{n}{n}}}Y=right) =Y]などと，他の括弧記号と並べると(cid:4) (cid:5)上下不均等が目立ってしまいます。ということで，上下均等な絶対値記号を表すコマンドY=emabsを用意しました。(cid:2) (cid:3)Y=emabsY=[ Y=bunsuu1n=Yleft(Y=emabs{ ⎛(cid:19) (cid:19) (cid:19) (cid:19)⎞(cid:19) (cid:19) (cid:19) (cid:19)+Y=Y=cbduontssu+u{a_1}{1+=Ybunsuu{1}{n}}}→ n1 ⎝ (cid:19) (cid:19)(cid:19) (cid:19)1+a11(cid:19) (cid:19)(cid:19) (cid:19)+···+ (cid:19) (cid:19)(cid:19) (cid:19)1+ann(cid:19) (cid:19)(cid:19) (cid:19)⎠n nY=emabs{Y=bunsuu{a_n}{1+=Ybunsuu{n}{n}}}Y=right) =Y](cid:4) (cid:5)括弧記号とのバランスはよくなりましたが，絶対値記号の中で天が空きすぎである，というご批判があるでしょうね。これは，式表現を工夫して(cid:2) (cid:3)Y=emabsY=[ Y=bunsuu1n=Yleft(Y=emabs{(cid:3)(cid:19) (cid:19) (cid:19) (cid:19)(cid:4)Y=bunsuu{a_1}{1+1/n}}→1 (cid:19) (cid:19)(cid:19)a1 (cid:19) (cid:19) (cid:19)+···+ (cid:19) (cid:19)(cid:19)an (cid:19) (cid:19)(cid:19)+Y=cdots+ n 1+1/n 1+n/nY=emabs{Y=bunsuu{a_n}{1+n/n}}Y=right) =Y](cid:4) (cid:5)などとするのも一法でしょう。1.14.3 Y=vabs−→次に，ABなどベクトル記号に絶対値を付与することを考えてみます。Y=zettaitiを用いると15

### Page 22

(cid:2) (cid:3)Y=bekutoruにY=zettaiti$Y=zettaiti{=Ybekutoru{OP$_1$}}$−−→だけをみているとよいのですが，OP1 だけをみているとよいのですY=[ Y=bunsuu1n=Yleft(が， (cid:11) −−→ −−→ (cid:12)Y=zettaiti{=Ybekutoru{OP$_1$}} → 1 OP1 +···+ OPn+Y=cdots+ nなどと，他の括弧記号と並べるとY=zettaiti{=Ybekutoru{OP$_n$}}Y=right) =Y]などと，他の括弧記号と並べると(cid:4) (cid:5)上下不均等が目立ってしまいます。さりとて，Y=emabsでは(cid:2) (cid:3)Y=bekutoruにY=emabsY=[ Y=bunsuu1n=Yleft(Y=emabs{=Ybekutoru{OP$_1$}} → 1 (cid:11)(cid:19) (cid:19) (cid:19) − O − P → 1 (cid:19) (cid:19) (cid:19)+···+ (cid:19) (cid:19) (cid:19) − O − P → n (cid:19) (cid:19) (cid:19) (cid:12)+Y=cdots+ nY=emabs{=Ybekutoru{OP$_n$}}Y=right) =Y](cid:4) (cid:5)折衷案で(cid:2) (cid:3)Y=bekutoruにY=absbekuY=def=Yabsbeku#1{=Yleft=YlvertY=EMvphantom[.5ex]{#1}%Y=smash{=Ybekutoru*{#1}}=Yright=YrvertY=vphantom{=Ybekutoru*{#1}}}(cid:11)(cid:19)−−→(cid:19) (cid:19)−−→(cid:19)(cid:12)Y=begin{caprm} → 1 (cid:19) OP1 (cid:19) +···+ (cid:19) OPn (cid:19)Y=[ Y=bunsuu1n=Yleft( nY=absbeku{OP_1}+Y=cdots+Y=absbeku{OP_n}Y=right) =Y]Y=end{caprm}(cid:4) (cid:5)いっそのこと，矢印は無視して(cid:2) 単純に‘|’ (cid:3)Y=[ Y=bunsuu1n=Yleft((cid:11)−−→ −−→(cid:12)|Y=bekutoru{OP$_1$}|→1 |OP1 |+···+|OPn |+Y=cdots+ n|Y=bekutoru{OP$_n$}|Y=right) =Y](cid:4) (cid:5)16

### Page 23

1.14.4 絶対値記号のネスト絶対値記号の中に更に絶対値記号が入る場合，例えば次のような場合，外側の絶対値記号を大きくしたいことがあります。(cid:2) (cid:3)絶対値記号のネスト||a|−|b||Y=[ ||a|-|b|| =Y]→ Y=emabsを用いるとY=cmd{emabs}を用いると||a|−|b||Y=[ Y=emabs{=Yemabs{a}-=Yemabs{b}} =Y](cid:4) (cid:5)外側の絶対値記号を大きくするには，Y=emabsに[...]オプションを附加します。数値は適宜で(cid:2) (cid:3)Y=emabsの[...]オプション (cid:19) (cid:19)(cid:19)|a|−|b|(cid:19)(cid:19) (cid:19)Y=[ Y=emabs[1pt]{=Yemabs{a}-=Yemabs{b}} =Y] → (cid:19) (cid:19)(cid:19)|a|−|b|(cid:19)Y=[ Y=emabs[2pt]{=Yemabs{a}-=Yemabs{b}} =Y](cid:4) (cid:5)などといった調子です。やっていることは，外側の絶対値記号の中身について，実際の高さ・深さそれぞれにオプション値を附加した支柱を立てています。1.15 ガウス記号 [x]xを超えない最大の整数を表すガウス記号を[x]とすると[x]となり，xとその左右の括弧の間が詰まりすぎています。それを修正したのがY=gaussです。このコマンドは Y=ensuremath でくるんでありますから，地の文でも数式内でも使用することが出来ます。(cid:2) (cid:3)ガウス記号Y=gauss{x} は $x$ を [x] は x を超えない最大の整数を表します．超えない最大の整数を −→ 例えば[π]=3表します．例えばY=[=Ygauss{=Ypi}=3 =Y](cid:4) (cid:5)(cid:3) (cid:4)a b1.16 行列c d高校では，二次の正方行列が登場します。そこで二次の正方行列専用のコマンド Y=gyouretu を作りました。Y=gyouretu(cid:3) (cid:4)a bY=gyouretu{a}{b}{c}{d} −→c d(cid:3) (cid:4)1 0単位行列 Y=gyouretu1001 −→0 117

### Page 24

Y=gyouretuでは，各列の要素は中央揃えに配置されます。これを右揃えにするには[r]オプションを用います。(cid:3) (cid:4)(cid:2) (cid:3) 12 −3配置オプション4 5(cid:3) (cid:4)$Y=gyouretu{12}{-3}{4}{5}$=YY= → 12 −3$Y=gyouretu[r]{12}{-3}{4}{5}$ 4 5(cid:4) (cid:5)2次の列ベクトルも良く登場します。正方行列と絡めて，Y=retube(cid:3) (cid:4)xY=retube{x}{y} −→y(cid:3) (cid:4)(cid:3) (cid:4)a b x$Y=gyouretu abcd=Y!=Y!=Yretube xy$ −→c d y今後は三次の正方行列も登場するでしょう。Y=Gyouretu⎛ ⎞a b cY=Gyouretu {a}{b}{c}{d}{e}{f}{g}{h}{i} −→ ⎝ d e f ⎠g h i⎛ ⎞0 0 0零行列 Y=Gyouretu000000000 −→ ⎝ 0 0 0 ⎠0 0 0また，三次の列ベクトルは Y=Retube です。(cid:2) (cid:3)三次の列ベクトル$Y=Gyouretu001010100=Y!=Y!=YRetube xyz=Y=Retube zyx$(cid:4) (cid:5)⎛ ⎞⎛ ⎞ ⎛ ⎞0 0 1 x z⎝ ⎠⎝ ⎠ ⎝ ⎠−→ 0 1 0 y = y1 0 0 z x行ベクトルはY=gyoubeです。(cid:2) (cid:3)Y=gyoubeすべての実数$x$, $y$について$Y=gyoube xy=Ygyouretu{a}{5a-2}{2-a}{3a+2}=Yretube xy =Ygeqq 0$が成立するような実数$a$の値の範囲を求めよ。Y=syutten{2004 福島医科大学}(cid:4) (cid:5)18

### Page 25

(cid:3) (cid:4)(cid:3) (cid:4)(cid:5) (cid:2) a 5a−2 xすべての実数x, yについて x y (cid:4) 0 が成立するような2−a 3a+2 y→実数aの値の範囲を求めよ。 〔2004 福島医科大学〕一般の行列を表すには，Y=pgyouretuを用意してあります。列の区切りを‘,’, 行の区切りを‘;’で表します。(cid:2) (cid:3)Y=pgyouretu(cid:3) (cid:4)Y=pgyouretu{% 1 2 3→ 4 5 61 , 2 , 3;4 , 5 , 6}(cid:4) (cid:5)amsmath.styには，pmatrix環境があります。(cid:2) (cid:3)pmatrix環境$(cid:3) (cid:4)Y=begin{pmatrix}1 2 31 & 2 & 3 Y=Y= → 4 5 64 & 5 & 6Y=end{pmatrix}$(cid:4) (cid:5)1.17 複素数 x+yi複素数x+yiにおいて，yとiの間を少し空けたい，という場合のためにY=Cnumを用意しました。(cid:2) (cid:3)Y=Cnum2−3i, x+yi$2-3i$, $x+yi$=YY= → 2−3i, x+yi$Y=Cnum{2}-{3}$, $=YCnum{x}+{y}$(cid:4) (cid:5)1.18 共役複素数 z共役複素数を表すY=kyouyakuです。Y=kyouyakuY=kyouyaku{z=Ycdot w}==Ykyouyaku z=Ycdot=Ykyouyaku w−→z·w=z·w文字と横棒の間隔はY=mathstrutで支柱を立てています。これを変更するオプションが[..]です。(cid:2) (cid:3)Y=kyouyaku[..]a$Y=kyouyaku{a}$=YY= →a$Y=kyouyaku[=Yvphantom a]{a}$(cid:4) (cid:5)なお，Y=kyouyakuの別名としてY=conjも使えます。19

### Page 26

広範囲で支柱の高さを変更するにはY=conjstrutを用いることもできます。(cid:2) (cid:3)Y=conjstrutY=conjstrut{=Yvphantom{b}} → b=a$Y=conj b==Yconj a$(cid:4) (cid:5)1.19 極形式 cosθ+isinθ複素数の極形式を表現するコマンド Y=kyokukeisiki です。[..]オプションで絶対値を指定することもできます。なお，Y=kyokukeisikiと同値なコマンド Y=polar も使用できます。Y=kyoukukeisiki$Y=kyokukeisiki{=Ytheta}$ −→ cosθ+isinθ$Y=polar{60=YDeg}$ −→ cos60◦+isin60◦$Y=kyokukeisiki[r]{=Ytheta}$ −→ r(cosθ+isinθ)$Y=kyokukeisiki[r][=Y{]{(-=Ytheta)}$ −→ r{cos(−θ)+isin(−θ)}共役なものをあらわすには，<c>オプションをつけます。(cid:2) (cid:3)Y=polar<c>r(cosθ+isinθ)$Y=polar[r]{=Ytheta}$=YY= → r(cosθ−isinθ)$Y=polar<c>[r]{=Ytheta}$(cid:4) (cid:5)20

### Page 27

2 幾何2.1 度の記号(小さな丸) 60◦角度の単位，例えば60度を表すときの記号です。 下の3種類，どれがお好みでしょうか。Y=Deg =YDEG =Ydegree$60=YDeg$ −→ 60◦$60=YDEG$ −→ 60o$60=Ydegree$ −→ 60˚2.2 角, 三角形 ∠A, (cid:4)PQR角はY=angle,三角形はY=triangleです。ただし，$Y=triangle{ABC}$などと数式環境で使うと，ABC が斜体になってしまいます。教科書などでは，点を表す記号は立体という習慣です。そこでY=kaku, Y=sankaku$Y=kaku{ABC}<90=YDeg$ −→ ∠ABC<90◦$Y=sankaku{ABC} =Yequiv =Ysankaku{DEF}$ −→ (cid:4)ABC≡(cid:4)DEF2.3 平行とその否定 //, /\/LATEXには平行記号を表すコマンドY=parallelが，またAMSFontsには，その否定を表すコマンドY=nparallel があります。しかし，日本で使われている記号とは違っています。そこで Y=heikouと Y=nheikou を定めました。次の上段と下段を比較してください。Y=heikouとY=nheikou$l Y=parallel m$ −→ l(cid:9)m $l Y=nparallel m$ −→ l∦m$l Y=heikou m$ −→ l//m $l Y=nheikou m$ −→ l/\/m2.4 相似の記号 ∽相似の記号はLATEXには用意されていません。ここでは全角の記号を使ってしまおうという，無精な案です。Y=souzi$Y=sankaku{ABC} =Ysouzi =Ysankaku{PQR}$ −→ (cid:4)ABC∽(cid:4)PQRこの記号は，文字サイズの変更に追随するようになっています。Y=Hugeとすると(cid:2) (cid:3)Y=Huge(cid:4)ABC∽(cid:4)PQRY=Huge$=Ysankaku{ABC} →Y=souzi =Ysankaku{PQR}$(cid:4) (cid:5)21

### Page 28

2.5 円弧を表す記号(cid:5)AB次は円弧を表すお椀を伏せたような記号です。Y=ko$Y=ko{AB}:=Yko{BC}=3:4$ −→(cid:5)AB:(cid:5)BC=3:4$Y=ko{APB}$ −→(cid:11)APBY=ko{APQB} −→(cid:3)APQBY=ko{A$_1$B$_1$} −→(cid:11)A1B1Y=ko{P$_n$P$_{n+1}$} −→(cid:3)PnPn+1最後の(cid:3)PnPn+1 では，弧の記号が P の添字につられて右に寄ってしまいます。Y=ko のオプション引数で，弧の記号の位置を調整することができます。次の二つを比べてください。位置修正Y=ko{P$_n$P$_{n+1}$} −→(cid:3)PnPn+1Y=ko[.6em]{P$_n$P$_{n+1}$} −→(cid:3)PnPn+1コマンドY=koの引数はテキストモードとしてあります。したがって添え字をつけたいときは(cid:2) (cid:3)Y=ko→Y=ko{A$_1$A$_2$}(cid:4) (cid:5)(cid:11)A1A2と，添え字部分を数式モードにする必要があります。数列がらみの問題では，ちょっと煩わしいので，引数が数式モードに入るY=ko*もあります。(cid:2) (cid:3)Y=ko*Y=begin{caprm}→Y=ko*{A_1A_2}Y=end{caprm}(cid:4) (cid:5)(cid:11)A1A2ただし，英大文字をローマン体とするには，caprm環境などを用いる必要があります。2.6 平行四辺形の記号平行四辺形を表す記号です。picture 環境で表現する方法をトニイさんが FPRINT で発表されました。ここで使うことを認めていただきましたので，それをこのマクロ集に入れさせていただきました。有り難うございます。＞ トニイさん。フォントサイズを大き目にします。Y=shikakuABCD平行四辺形Y=shikaku{}ABCD −→ 平行四辺形22

### Page 29

それでも平行四辺形の記号がやや大き目です。小さくできれば良いのですが，LATEXの picture環境の制約で不可能です。そこで，epic というパッケージの助けを借りて小さくしたのが，私の修正案です。Y=heikousihenkei平行四辺形 Y=heikousihenkei{}ABCD −→ 平行四辺形 ABCD3 解析(cid:6)n3.1 数列記号 {a n }, a kk=1LATEX では，数列 {an } を書くには，$Y={a_n=Y}$ としますが，わずらわしいので，コマンドY=suuretu を作りました。次のように本文の中で使うことが多いでしょう。Y=suuretu等比数列 Y=suuretu{a_n} が・・・ −→ 等比数列 {an } が・・・数列の和記号も良く登場します。Y=displaystyle=Ysum のシグマ記号は少し大きいようです。少し小さ目にしてみました。Y=retuwa(cid:10)n$Y=displaystyle=Ysum_{k=1}^{n}{k(k+1)}$ −→ k(k+1)k=1(cid:6)n$Y=retuwa{k=1}{n}k(k+1)$ −→ k(k+1)k=1上の話は本文中のことです。別行立ての場合は大きい方がよいでしょう。この場合も小さくするには，Y=tretuwaを用います。(cid:2) (cid:3)Y=tretuwa(cid:10)nY=begin{gather*} k 2Y=retuwa{k=1}{n}k^2=YY= → k=1(cid:6)nY=tretuwa{k=1}{n}k^2 k 2k=1Y=end{gather*}(cid:4) (cid:5)3.2 極限 lima nn→∞Y=displaystyle を毎回書くのは面倒だというだけです。Y=dfrac と同じねらいでしょう。Y=dlim$Y=dlim{x =Yto Y=infty}e^{-x}=0$ −→ lim e−x =0x→∞23

### Page 30

3.3 階差数列 1 2 4 7 11 ···1 2 3 4 ···階差数列の表現，あるいは数列の上下に，規則性を示すための矢印を配置する機能はemathPh.styに用意されています。sampleP.texをご覧ください。(cid:4)(cid:2) (cid:5)3.4 増減・凹凸 (cid:2)(cid:2) (cid:3)(cid:3) (cid:4)増減表を作るときの矢印は，LATEXにY=searrow, =Ynearrowが用意されています。x −2 ··· −1 ··· 1 ··· 2y(cid:5) − 0 + 0 −y (cid:10) 極小 (cid:11) 極大 (cid:10)凹凸を表す記号は，集合の演算子Y=cup, =Ycapが流用できます。x −2 ··· 0 ··· 2y(cid:5)(cid:5) + 0 −y ∪ 変曲点 ∩Y=smile, =Yfrownの方が良いという方もいらっしゃるかもしれません。x −2 ··· 0 ··· 2y(cid:5)(cid:5) + 0 −y (cid:5) 変曲点 (cid:6)増減と凹凸をいっしょにまとめた表を作るときに必要な矢印付きの四分円はLATEX, AMSFontsではみかけません。picture 環境で作ってみました。Y=?e?arrowY=nevarrow −→ (cid:3)(cid:3)(cid:2)(cid:4)Y=necarrow −→Y=sevarrow −→(cid:2)(cid:2)(cid:5)Y=secarrow −→ (cid:4)ne(se) と arrow の間の v, c はv: convexc: concaveからとりました。これらのコマンドを用いると増減表は下のようになります。24

### Page 31

Y=?e?arrowx −2 ··· −1 ··· 0 ··· 1 ··· 2y(cid:5) − 0 + 0 −y(cid:5)(cid:5) + 0 −(cid:2)(cid:4) (cid:5)y (cid:2)(cid:2) 極小 (cid:3)(cid:3) 変曲点 極大 (cid:4)増減表で，微分不能のところには斜線を引いたりしたいことがあります。emathT.styでは，hyou環境を定義して，それを可能としています。emathP.styの説明書 sampleP.tex をご覧ください。(cid:7)b3.5 積分記号 f(x)dxa積分記号も Y=dfrac と同じ意味合いです。Y=dint(cid:7)b$Y=dint{a}{b}f(x)=Y,dx$ −→ f(x)dxa(cid:8) (cid:9)π3.6 定積分 −cosx0定積分の計算で登場する大括弧でくくった記号ですが，大括弧を大きくするため，最低でも分数式の高さ深さを加味しています。(cid:2) (cid:3)Y=teisekibun (cid:7)π$Y=dint{0}{=Ypi}=Ysin x=Y,dxsinxdx=[−cosx]π0(cid:7)0 (cid:8) (cid:9)=[-=Ycos x]_0^{=Ypi}$=YY= → π πsinxdx= −cosx$Y=dint{0}{=Ypi}=Ysin x=Y,dx0 0=Y=teisekibun{-=Ycos x}{0}{=Ypi}$=YY=(cid:4) (cid:5)3.7 デルタ記号変分を表す記号デルタはイタリック体のギリシャ文字が使用されますが，これをもっと傾けたいというための記号です。(cid:2) (cid:3)Y=DerutaΔ$Y=varDelta$=YY= →$Y=Deruta$(cid:4) (cid:5)ただし，この記号はemathPh.styで定義されています。emath.styにもありますが，コーナーがぎざぎざになっています。25

### Page 32

4 確率4.1 集合の記号 {x| 0 < x < 1}集合を表す記号として，Y=syuugouがあります。(cid:2) (cid:3)Y=syuugou{1,2,3}Y=syuugou{1,2,3}=YY= → {x| 0<x<1}Y=syuugou[x]{0<x<1}(cid:4) (cid:5)Y=syuugou#1は，#1に要素を列挙します。Y=syuugou[#1]#2は，#2に条件を記述します。4.1.1 Y=niの否定 (cid:5)/次の記号は，標準的なLATEXに用意されています。(cid:2) (cid:3)Y=inなどY=begin{gather*}a∈Aa Y=in A=YY=→ a∈/ Aa Y=notin A=YY=A(cid:5)aA Y=ni aY=end{gather*}(cid:4) (cid:5)しかし，Y=niの否定記号がありません。（txfontsには用意されています。）そこで，emathではY=notniを用意しました。(cid:2) (cid:3)Y=notni→ A(cid:5)/ aY=[ A Y=notni a =Y](cid:4) (cid:5)4.2 階乗記号 n!階乗を表す記号は‘!’ですが，前後に少し空白を附加したものがY=kaizyouです。比較してみてください。(cid:2) (cid:3)Y=kaizyou5!=120$5!=120$=YY= →5! =120$5=Ykaizyou=120$(cid:4) (cid:5)4.3 順列・組合せの記号 n C r n P r n H r n Π r組合せの記号は AMS-LATEXで Y=binom などが用意されていますが，列ベクトルのような記号です。26

### Page 33

Y=kumiawase, Y=zyunretu(cid:3) (cid:4)n$Y=displaystyle=Ybinom{n}{2}$ −→2$Y=kumiawase{n}{2}$ −→ nC2Y=kumiawase{5}{3} −→ 5C3$Y=zyunretu{n}{2}$ −→ nP2重複順列，重複組合せはそれぞれY=Zyunretu, Y=Kumiawaseです。(cid:2) (cid:3)重複順列，重複組合せnΠrY=Zyunretu{n}{r}=YY= →nHrY=Kumiawase{n}{r}(cid:4) (cid:5)27

### Page 34

5 数式番号5.1 丸付き文字5.1.1 丸付き文字 (cid:6)1 (cid:6)A (cid:6) ア式の番号などに丸付き数字がよく使われます。LATEX2e には，Y=textcircledというコマンドがあります。(cid:2) (cid:3)Y=textcircled→ (cid:6)1, (cid:6)2 を連立させてY=textcircled{1}, =Ytextcircled{2} を連立させて(cid:4) (cid:5)しかし，丸記号と中の数字とのバランスが悪いですね。そこで emath.sty では，中の数字をY=scriptstyleにしたY=maruというコマンドを用意しました。(cid:2) (cid:3)Y=maru→(cid:6)1, (cid:6)2を連立させてY=maru{1}, =Ymaru{2} を連立させて(cid:4) (cid:5)中の数字を小さくしすぎたようですが，数字が2桁になると(cid:2) (cid:3)2桁の番号→(cid:6)19, (cid:6)20を連立させてY=maru{19}, =Ymaru{20} を連立させて(cid:4) (cid:5)中の数字が外枠にかかってしまいます。さて，どうしましょうか。対策その1は，中の数字をY=resizeboxで横幅を1zwに圧縮しよう，というのが Y=zwmaruです。(cid:2) (cid:3)Y=zwmaru→(cid:6)19, (cid:6)20を連立させてY=zwmaru{19}, =Yzwmaru{20} を連立させて(cid:4) (cid:5)対策その2は，逆に外枠の○を大きくしよう，という行きかたです。ifsymフォントに大き目の○が用意されています。ただし，このフォントはスタンダードなインストールでは，インストールされていませんから，ここで使用するのは遠慮しておきます。サンプルは emath のホームページ，目次からemath 講座リファレンス編Y=maruとたどってください。文字サイズはY=normalsizeのままで○を大きくするには，○をpicture環境で描画したY=emPmaruがemathPh.styで定義されています。(cid:2) (cid:3)Y=emPmaru→ 19, 20 を連立させてY=emPmaru{19}, =YemPmaru{20} を連立させて(cid:4) (cid:5)対策その3は，独自にデザインされたフォントを探してくる方法です。その一つにpifontがあります。下のリストをタイプセットするには，emathFxを[pzd] オプションつきでロードしておく必要があります。28

### Page 35

(cid:2) (cid:3)Y=pzdmaru→ ➈ , ➉ を連立させてY=pzdmaru{9}, =Ypzdmaru{10} を連立させて(cid:4) (cid:5)ただし，残念ながら10までしか用意されていません。もう少し大きな数値まで用意されているものにgoフォントがあります。このフォントは，囲碁の棋譜を表示するために作成されたもので，252まで用意されています。このフォントもスタンダードなインストールでは，インストールされていませんから，上記emath講座をご参照ください。最後に，utfパッケージを用いる方法です。ただし，この方法は dvi-ware & OS に依存します。やはり，ここにはサンプルを載せられませんから，上記 emath講座をご参照願います。注 ベースラインY=maruで囲まれた文字は，その行のベースラインから少し上に上がっています。これを，一致させるコマンドがY=bmaruです。次の例では，ベースラインを赤で引いています。(cid:2) (cid:3)Y=bmaruY=begin{picture}(0,0)Y=put(0,0){=Ycolor{red}=Yline(1,0){50}}Y=end{picture}Y=maru{1}(cid:6)1→ (cid:6)1Y=begin{picture}(0,0)Y=put(0,0){=Ycolor{red}=Yline(1,0){50}}Y=end{picture}Y=bmaru{1}(cid:4) (cid:5)Y=maruに代えて，Y=bmaruを使いたければY=let=Ymaru=Ybmaruを宣言します。5.1.2 白黒反転の丸付き文字 1 A ア白黒反転の丸付き文字はY=kmaruコマンドです。ただし，このコマンドはcolorパッケージを必要とします。emathPhなどemathP系のパッケージをロードする場合は自動的にcolorも読み込まれます。(cid:2) (cid:3)Y=kmaruY=kmaru{1}1→ あY=kmaru{あ}アY=kmaru{=Ytextgt{ア}}(cid:4) (cid:5)29

### Page 36

番号付けに使ってみましょう。(cid:2) (cid:3)enumerate 環境に適用Y=def=Ykanaban#1{=Ykmaru{=Ytextgt{#1}}}Y=begin{enumerate}[=Yprotect=Yexpandafter=Ykanaban ア]Y=item あああY=item いいいY=item うううY=end{enumerate}(cid:4) (cid:5)ア あああ→ イ いいいウ ううう5.1.3 縦長の丸付き文字 1 A縦長の○も使用できます。(cid:6) (cid:7){Y=ttfamilyY=vspace*{-.5=Ybaselineskip}Y=begin{edaenumerate}<5>[=Yprotect=Yexpandafter=Ynagamaru 1]Y=setcurrentenum{-1}%Y=item +Y=item -Y=item{}*Y=item /Y=item =Y=item{}<>Y=item >Y=item{}<Y=item >=Y=item{}<=Y=end{edaenumerate}}%(cid:8) (cid:9)0 + 1 - 2 * 3 / 4 =−→5 <> 6 > 7 < 8 >= 9 <=白黒反転はY=knagamaruです。上の例をY=knagamaruに変更すると：30

### Page 37

0 + 1 - 2 * 3 / 4 =5 <> 6 > 7 < 8 >= 9 <=5.1.4 横長の丸付き文字 1 A横長の○は，Y=ynagamaruです。0 + 1 - 2 * 3 / 4 =5 <> 6 > 7 < 8 >= 9 <=その白黒反転はY=kynagamaruです。0 + 1 - 2 * 3 / 4 =5 <> 6 > 7 < 8 >= 9 <=5.1.5 ○のサイズ変更○の中に桁数の多いものを入れたいときなど，○のサイズを変更するにはY=nagamaruyokoHankei, Y=nagamarutateHankeiを用います。(cid:6) (cid:7){%Y=nagamarutateHankei{20ex}−→ 234Y=nagamaruyokoHankei{30ex}Y=nagamaru{234}}%(cid:8) (cid:9)Y=ynagamaruはY=nagamarutateHankei{14ex}Y=nagamaruyokoHankei{21ex}としてあります。Y=ynagamaruについては，この値が固定されています。変更したいときは，Y=ynagamaruではなく，Y=nagamaruを用います。31

### Page 38

5.2 数式番号のフォーマット複数行の式を並べて式に番号を付ける際，LATEXでは(1),(2),(3),...のようにカッコ付きの番号が振られます。これに対して，われらの日常環境では丸付きの番号を振ることが多いようです。この機能は，amsmath パッケージを前提とします。さらにその一部を書き換えていますので，パッケージの読み込み順序が問題となります。amsmath を読み込んだ後に emath を読み込んでください。数式番号に丸囲い数字Y=begin{align}y&=x =Ylabel{eq:1}=YY=y&=x^2 =Ylabel{eq:2} y =x ···················· (cid:6)1Y=end{align} −→ y =x 2 ···················· (cid:6)2Y=eqref{eq:1}を (cid:6)1を (cid:6)2に代入してY=eqref{eq:2}に代入してリーダー罫が長くて数式とダブるときは，Y=preEqlabel{$=Ycdots=Ycdots$} などとして，リーダー罫の長さを短くすることができます。Y=preEqlabelY=preEqlabel{$=Ycdots=Ycdots$}%Y=begin{align}y&=x =YY= y =x ······(cid:6)3−→y&=x^2y =x2 ······(cid:6)4Y=end{align}また，fleqn オプションを付けているときは，数式が短いと数式と式番号の間が長くなりますから，jquote環境で右マージンを設定するのも一法です。右マージンY=begin{jquote}(0zw)(4zw)Y=begin{align}y =x······(cid:6)5y&=x =YY=−→ y =x 2 ······(cid:6)6y&=x^2Y=end{align}Y=end{jquote}jquote環境については，126ページをご覧ください。あるいは，逆に Y=mathindent で，数式を右に寄せるのもありましょう。32

### Page 39

Y=mathindentY=mathindent=6zwY=begin{align}y&=x =YY= −→ y =x······(cid:6)7y&=x^2 y =x2 ······(cid:6)8Y=end{align}Y=preEqlabel{} とすれば，リーダー罫をつけないこともできます。リーダー罫なしY=preEqlabel{}%Y=begin{align}y =x(cid:6)9y&=x =YY= −→y =x2 (cid:6)10y&=x^2Y=end{align}なお，数式番号をデフォルトの(1),(2),(3),....に戻したければ，Y=renewcommand{=Ytagform}[1]{(#1)}%Y=preEqlabel{}%とします。これをまとめて処理するY=resettagformコマンドもあります。(cid:2) (cid:3)数式番号の形式をデフォルトに戻す。Y=resettagformY=begin{align} y =x (11)→y&=x =YY= y =x 2 (12)y&=x^2Y=end{align}(cid:4) (cid:5)5.3 数式番号のリセットデフォルトでは，数式番号は1つの文書で通し番号となります。これを変更するにはY=setcounterを用いるのが普通です。(cid:2) (cid:3)数式番号の変更Y=setcounter{equation}{10}Y=begin{align} y =x ···················· (cid:6)11→y&=x =YY= y =x 2 ···················· (cid:6)12y&=x^2Y=end{align}(cid:4) (cid:5)33

### Page 40

Y=setcounterで設定した値（上の例では10）の次の番号から数式に付与されていきます。特に数式番号を1から振りなおすにはY=setcounter{equation}{0} とすることになりますが，よく使いますのでemathでは，Y=resetcounterというコマンドを作っています。(cid:2) (cid:3)数式番号の初期化Y=resetcounter{equation}Y=begin{align} y =x ···················· (cid:6)1→y&=x =YY= y =x 2 ···················· (cid:6)2y&=x^2Y=end{align}(cid:4) (cid:5)このコマンドは，カウンタの親子関係を作るのが主目的で，数学の問題集を作るときなど，数式番号は大問ごとにリセットすることが多いでしょう。このようなときは(cid:2) (cid:3)カウンタの親子関係Y=resetcounter{equation}[enumi]Y=begin{enumerate}[問題1.~]Y=item あああ問題1. あああY=begin{align}y =x······(cid:6)1y&=x =YY=y =x2 ······(cid:6)2y&=x^2→Y=end{align} 問題2. いいいY=item いいい x 2 +y 2 =1 ······(cid:6)1Y=begin{gather} x+y =1 ······(cid:6)2x^2+y^2=1=YY=x+y=1Y=end{gather}Y=end{enumerate}(cid:4) (cid:5)冒頭の1行は，enumi カウンタが更新されるたびに，equation カウンタを初期化せよ，という意味です。Y=resetcounterの書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)カウンタ値のリセットY=resetcounter{foo} カウンタ foo の値を初期化します．カウンタに親子関係を設定する．Y=resetcounter{foo}[FOO] FOO の値が更新されると，foo は初期化されます．34

### Page 41

5.4 連立方程式AM (cid:24) S-LATEXで連立方程式を記述するのに，cases 環境を使う方法があります。a+b=2···················· (cid:6)1a−b=0などという具合です。ただ，残念ながら align 環境の中に記述しても数式番号は，連立方程式全体に対して１つだけしか発行されません。連立方程式それぞれに番号が欲しいことがあります。そのためには，cases.styで定義されているnumcases環境を用います。(cid:2) (cid:3)numcases環境Y=preEqlabel{=YCdots=YCdots}Y=begin{numcases}{} (cid:25)a+b=3 ……(cid:6)2a+b=3 =Ylabel{eq:a}=YY=→ a−b=1 …… (cid:6)3a-b=1 =Ylabel{eq:b}(cid:6)2+(cid:6)3から 2a=4 ゆえに a=2Y=end{numcases}$Y=eqref{eq:a}+=Yeqref{eq:b}$から $2a=4$ ゆえに $a=2$(cid:4) (cid:5)numcases環境の書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=begin{numcases}{括弧の左側に来る数式}数式1 & 説明1 Y=Y=数式2 & 説明2 Y=Y=...Y=end{numcases}この機能をフルに用いた例です。(cid:2) (cid:3)numcases環境Y=resettagform(cid:25)Y=begin{numcases}{|x|=} x (x(cid:4)0)のとき (4)→|x|=x & $(xY=geqq 0)$のときY=Y= −x (x<0)のとき (5)-x & $(x<0)$のときY=end{numcases}(cid:4) (cid:5)(注 1 ) cases.styとamsmath.styとで衝突する部分がありますから，emath.styよりも後でcases.styを読み込む必要があります。(注 2 ) cases.styのバージョンによっては，エラーが発生することがあります。この節での記述はcases.sty 2002/05/02 ver 2.5を前提としています。35

### Page 42

(注 3 ) emathには，Y=renrituというコマンドもありますが，numcasesの方が一般的ですから，Y=renrituはお蔵入りとします。5.5 本文中の連立方程式に数式番号連立方程式に数式番号を振るY=renrituは，別行立て数式となります。cases環境とY=houteisikiを併用して，本文中の連立方程式にも数式番号を振ることができます。(cid:2) (cid:3)本文中の連立方程式連立方程式$Y=begin{cases}2x+3y=-1 & =Yhouteisiki{=Ylabel{emcases1}}=YY=3x-2y=5 & =Yhouteisiki{=Ylabel{emcases2}}Y=end{cases}$を解け。(cid:4) (cid:5)(cid:24)2x+3y =−1 ······· (cid:6)1−→ 連立方程式 を解け。3x−2y =5 ······· (cid:6)2これを見ると，本文中では連立記号というか左括弧が大きく感じられます。それを修正したemcases環境を用意しました。(cid:2) (cid:3)emcases環境連立方程式$Y=begin{emcases}2x+3y=-1 & =Yhouteisiki{=Ylabel{emcases3}}=YY=3x-2y=5 & =Yhouteisiki{=Ylabel{emcases4}}Y=end{emcases}$を解け。(cid:4) (cid:5)(cid:24)2x+3y =−1 ······· (cid:6)3−→ 連立方程式 を解け。3x−2y =5 ······· (cid:6)4emcases環境には，オプションが2種類あります。オプションその1は括弧を右につけるためのもので，次のように使います。(cid:2) (cid:3)emcases環境連立方程式Y=eqref{emcases3}, =Yeqref{emcases4}を解くと，$Y=begin{emcases}[r]x=1=YY= y=-1Y=end{emcases}$=Ykotae(cid:4) (cid:5)(cid:26)x=1−→ 連立方程式(cid:6)3, (cid:6)4を解くと，……（答）y =−1第2のオプションはcases環境に内包されているarray環境の引数を変更します。デフォルトでは，@{}l@{=Yquad}l@{}となっており，方程式と数式番号の間に，Y=quadによる空白が入ります。これを取り除いて36

### Page 43

(cid:2) (cid:3)array環境の引数指定連立方程式$Y=begin{emcases}[l][@{}l@{}l@{}]2x+3y=-1 & =Yhouteisiki{=Ylabel{emcases5}}=YY=3x-2y=5 & =Yhouteisiki{=Ylabel{emcases6}}Y=end{emcases}$を解け。(cid:4) (cid:5)(cid:24)2x+3y =−1 ······· (cid:6)5−→ 連立方程式 を解け。3x−2y =5 ······· (cid:6)6もう一段，括弧記号を小さくするのが Y=baaiwakeコマンドです。(cid:2) (cid:3)Y=baaiwake連立方程式$Y=baaiwake{2x+3y=-1 & =Yhouteisiki{=Ylabel{emcases7}}=Ycr3x-2y=5 & =Yhouteisiki{=Ylabel{emcases8}}=Ycr}$を解け。(cid:4) (cid:5)(cid:25)2x+3y =−1 ······· (cid:6)7−→ 連立方程式 を解け。3x−2y =5 ······· (cid:6)85.6 ダッシュ付きの数式番号 (cid:6) 1 (cid:5)数式番号にダッシュ付きの丸付き数字を使用する方法です。(cid:2) (cid:3)ダッシュ付き数式番号{Y=preEqlabel{$=Ycdots$}Y=renritu{%&x+2y=3 =Ylabel{Ed-1}=YY=(cid:25)& 2x-y=1 =Ylabel{Ed-2}}x+2y =3···(cid:6)1Y=eqref{Ed-1}より 2x−y =1 ···(cid:6)2Y=begin{equation} (cid:6)1よりx=3-2y =Ymarudashtag{Ed-1} x=3−2y ···(cid:6)1(cid:5)Y=end{equation} −→ (cid:6)2に代入してY=eqref{Ed-2}に代入して 2(3−2y)−y =1Y=begin{align*}すなわち&2(3-2y)-y=1=YY=y =1Y=intertext{ すなわち }&y=1(cid:6)1 (cid:5)に代入して x=1Y=end{align*}Y=marudashref{Ed-1}に代入して $x=1$}(cid:4) (cid:5)のように，ダッシュのつかない式へのラベルを用いて37

### Page 44

Y=marudashtag でダッシュ付き番号をつけ，Y=marudashref で参照します。本文中の数式に対してダッシュをつけるには Y=houteisiki のオプション引数に Y=marudashtagを記述します。(cid:2) (cid:3)本文中の数式へのダッシュ付き数式番号Y=houteisiki{x+2y=1=Ylabel{Ed-3}}をY=houteisiki[=Ymarudashtag{Ed-3}]{x=1-2y}と変形して(cid:4) (cid:5)−→ x+2y =1 ······· (cid:6)3をx=1−2y ······· (cid:6)3(cid:5) と変形して5.7 align*環境で数式番号align*, gather*環境など数式番号を付けない環境において，特定の式だけは数式番号を付与したいときのためにY=atagコマンドを用意しました。(cid:2) (cid:3)Y=atagY=begin{gather*}|z−3i|2 =4|z|2|z-3i|^2=4|z|^2=YY= (z−3i)(z+3i)=4zz(z-3i)(=Yconj z+3i)=4z=Yconj z=YY= 3(zz−iz+iz−3)=0→3(z=Yconj z-iz+i=Yconj z-3)=0=YY=(z+i)(z−i)=4(z+i)(=Yconj z-i)=4=YY=∴|z+i|=2Y=therefore |z+i|=2=Yatag ···················· (cid:6)1Y=end{gather*}(cid:4) (cid:5)5.8 等号の縦揃え長い式の変形を表すとき，左端に等号を置いて式を並べます。(cid:2) (cid:3)=による左揃えY=begin{align*}|x|2&|x|^2=YY=→=|x|2&=|x|^2=YY==|x|2&=|x|^2Y=end{align*}(cid:4) (cid:5)では，一番上の行の位置に不満があります。Y=phantomを用いて，等号分だけ右にずらします。38

### Page 45

(cid:2) (cid:3)Y=phantom=を用いるY=begin{align*}|x|2&Y=phantom{=}|x|^2=YY=→=|x|2&=|x|^2=YY==|x|2&=|x|^2Y=end{align*}(cid:4) (cid:5)等号の幅分はずれましたが，1行目と2行目の先頭がいぜん不揃いです。=の右に{}を附加します。(cid:2) Y=phantom{={}}と修正 (cid:3)Y=begin{align*}|x|2&Y=phantom{={}}|x|^2=YY=→=|x|2&=|x|^2=YY==|x|2&=|x|^2Y=end{align*}(cid:4) (cid:5)まだ少しずれています。透明の等号の属性をY=mathrelと指定すれば(cid:2) Y=mathrel{Y=phantom=}と修正 (cid:3)Y=begin{align*}|x|2&Y=mathrel{=Yphantom=}|x|^2=YY=→=|x|2&=|x|^2=YY==|x|2&=|x|^2Y=end{align*}(cid:4) (cid:5)式の先端がきれいに揃います。これはよく使いますからY=def=Ydumyeq{=Ymathrel{=Yphantom=}}と定義することにしました。(cid:2) (cid:3)Y=dumyeqY=begin{align*}|x|2&Y=dumyeq |x|^2=YY=→=|x|2&=|x|^2=YY==|x|2&=|x|^2Y=end{align*}(cid:4) (cid:5)別法です。等号の右に&を置くのもあります。ただし，(cid:2) (cid:3)&の位置Y=begin{align*}|x|2&|x|^2=YY=→=|x|2=&|x|^2=YY==|x|2=&|x|^2Y=end{align*}(cid:4) (cid:5)39

### Page 46

では，等号と右辺との間隔が詰まりすぎです。(cid:2) (cid:3)&の位置Y=begin{align*}|x|2&|x|^2=YY=→=|x|2={}&|x|^2=YY==|x|2={}&|x|^2Y=end{align*}(cid:4) (cid:5)とすればよいのですが，すべての行に={}とするのは煩雑ですね。5.9 Y=item 直後の縦揃え数式5.9.1 aligned環境Y=item直後に別行立て数式を配置すると(cid:2) (cid:3)Y=item直後の別行立て数式Y=begin{enumerate}[(1)]Y=item(1)Y=begin{align*} y =(a+b) 2→y&=(a+b)^2=YY= 2 2=a +2ab+b&=a^2+2ab+b^2Y=end{align*}Y=end{enumerate}(cid:4) (cid:5)この結果について次のような不満の声を耳にします。項目番号と数式が(1) 縦方向にずれている（改行されている）(2) 横方向も空きすぎである。これは，不満を述べる方が心得違いをしています。(1)に対しては，別行立て数式は改行する(2)に対しては，別行立て数式の横位置はセンタリング(fleqn オプションがない場合）左寄せ（fleqn オプション付きの場合で，インデント量は Y=mathindent）という，別行立て数式の仕様に従って配置されているまでです。対応策のひとつは別行立てではなく，本文中数式モードで済ませる，というのがあります。（この節は，井汲 景太 さんからご教示いただきました。）amsmath.styで定義されているalinged環境を配置オプション[t]を付加して用います。40

### Page 47

(cid:2) (cid:3)aligned環境Y=begin{enumerate}[(1)]Y=item2(1) y =(x+1)$Y=begin{aligned}[t]→ 2y&=(x+1)^2=YY= =x +2x+1&=x^2+2x+1Y=end{aligned}$Y=end{enumerate}(cid:4) (cid:5)ただし，この環境は別行立てではありませんから，数式番号はつきません。数式番号など，別行立てにこだわるなら，次節で紹介するY=itemtopmathを用いるのも一法です。5.9.2 Y=itemtopmath別行立て数式は，説明文があって，それに続くもの，というのが正しい使い方でしょう。(cid:2) (cid:3)別行立て数式の前には説明文Y=begin{enumerate}[(1)]Y=item 説明文の後に別行立て数式(1) 説明文の後に別行立て数式Y=begin{align*} 2y =(a+b)→y&=(a+b)^2=YY= 2 2=a +2ab+b&=a^2+2ab+b^2Y=end{align*}Y=end{enumerate}(cid:4) (cid:5)にもかかわらず，なんとかならないか，という要望は却下すべきものではありますが，余りに多いので，emath パッケージでは，Y=itemtopmath というコマンドを用意してあります。(cid:2) (cid:3)Y=itemtopmathY=begin{enumerate}[(1)]Y=item =Yitemtopmath2(1) y =(a+b)Y=begin{align*}→ 2 2y&=(a+b)^2=YY= =a +2ab+b&=a^2+2ab+b^2Y=end{align*}Y=end{enumerate}(cid:4) (cid:5)すなわち，Y=item 直後にY=itemtopmathというコマンドを発行して，別行立て数式を上方に引っ張り上げます。5.9.2.1 左インデントの調整 つぎは，項目番号と数式の横方向の間隔調整です。これは，その文書に41

### Page 48

fleqn オプションがついているか否かで対応が異なります。まずは，fleqn オプションがついている場合です。この場合は，数式行の左インデントをY=mathindent=0ptなどと指定します。（その影響範囲を限定するため，グルーピングをしておくなどの対策が必要です。）(cid:2) (cid:3)左インデント(1)Y=begin{enumerate}[(1)]Y=item =YitemtopmathY=mathindent=0pt=Yrelax (1) y =(a+b) 2Y=begin{align*} → 2 2=a +2ab+by&=(a+b)^2=YY=&=a^2+2ab+b^2Y=end{align*}Y=end{enumerate}(cid:4) (cid:5)fleqnオプションをつけない文書の場合は，局所的にfleqnオプションがついた状態にします。すなわち，align 環境をfleqnon 環境に，左インデントをオプションで与えたものでくるみます：Y=begin{fleqnon}[0pt]Y=begin{align}............Y=end{align}Y=end{fleqnon}という具合です。(cid:2) (cid:3)左インデント(2)Y=begin{enumerate}[(1)]Y=item =YitemtopmathY=begin{fleqnon}[0pt]2(1) F(x)=(x+b)Y=begin{align*}→ 2 2=x +2bx+bF(x)&=(x+b)^2=YY=&=x^2+2bx+b^2Y=end{align*}Y=end{fleqnon}Y=end{enumerate}(cid:4) (cid:5)42

### Page 49

5.9.2.2 縦方向の補正 さて，数式が複雑になると縦方向の補正量が Y=itemtopmath では間に合わなくなります。(cid:2) (cid:3)数式が複雑になるとY=medskipY=begin{enumerate}[(1)]Y=item =Yitemtopmath (cid:7)(1) 2Y=mathindent=0pt=Yrelax y = (ax+b) dx→Y=begin{align*} 1 3= (ax+b) +Cy&==Ydint{}{}(ax+b)^2dx=YY= 3a&==Ybunsuu{1}{3a}(ax+b)^3+CY=end{align*}Y=end{enumerate}(cid:4) (cid:5)この場合は，1行目の数式で一番背の高いもの—この場合は積分記号Y=int—をY=itemtopmathの [...] オプションに与えます。(cid:2) (cid:3)Y=itemtopmathの[...]オプションY=medskipY=begin{enumerate}[(1)](cid:7)Y=item =Yitemtopmath[=Yint]=Yrelax2(1) y = (ax+b) dxY=mathindent=0pt=Yrelax→Y=begin{align*} 1 3= (ax+b) +C3ay&==Yint (ax+b)^2dx=YY=&==Ybunsuu{1}{3a}(ax+b)^3+CY=end{align*}Y=end{enumerate}(cid:4) (cid:5)縦方向の位置を，更に細かく調整するにはY=itemtopmath の <...> オプションをを利用します。5.9.2.3 Y=itemtopmathの書式 最後に，Y=itemtopmathの書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=itemtopmath<#1>[#2]#1 : 微調整量（単位つき）+で上に，-で下に移動#2 : 1行目の高さが高いとき，その部分を与える( Y=emtokena に保存される)43

### Page 50

6 図の取り込みこの節のコマンド類は，emath.sty ではなく，emathMw.sty に含まれています。使用する際はY=usepackage{emathMw}としておかねばなりません。6.1 図の周りへの回り込み6.1.1 mawarikomi 環境図のまわりにテキストを回り込ませる環境に，wrapfigure があります。しかし，この環境はenumerate環境など list環境下では使用できません。そこで，list環境と併用するために mawarikomi環境を作ってみました。その使用例を見ていただきましょう。(cid:2) (cid:3)mawarikomi環境Y=begin{enumerate}Y=itemY=begin{mawarikomi}{30pt}{%Y=begin{picture}(30,30)Y=put(0,0){% 1. あああ図Y=framebox(30,30){図}} あああY=end{picture}} あああ −→ あああ あああ2. いいいあああいいいあああY=end{mawarikomi}Y=item いいいY=end{enumerate}(cid:4) (cid:5)基本的な使用法はY=begin{mawarikomi}{図の横幅}{図の記述}回り込ませるテキスト部の記述Y=end{mawarikomi}となっています。細かな調整を行うためのオプション引数については後述します。6.1.2 mawarikomi*環境図が大きくて複数の問題で回り込みを行わせるには，44

### Page 51

(cid:2) (cid:3)複数の問題で回り込みY=begin{enumerate}Y=itemY=begin{mawarikomi}{30pt}{%Y=begin{picture}(30,100)Y=put(0,0){%Y=framebox(30,100){図}}Y=end{picture}} 1. あああ あああ2. いいいY=end{mawarikomi}図いいいY=itemY=begin{mawarikomi*} −→ 3. ううういいい ううういいい うううY=end{mawarikomi*} うううY=item うううY=begin{mawarikomi*} ううう うううY=end{mawarikomi*}Y=end{enumerate}(cid:4) (cid:5)この場合，回り込みを行うタイミングがずれてきています。回り込みの行数は，図のサイズから計算で求めていますが，この場合は，enumerate環境において，Y=item間の縦間隔が大きめにとられる関係で計算値とずれてきました。この修正法は後述します。(p.46, §6.1.4)6.1.3 mawarikomi環境内にlist環境mawarikomi環境内にlist環境を入れることができます。45

### Page 52

(cid:2) (cid:3)mawarikomi内にlistY=begin{enumerate}Y=itemY=begin{mawarikomi}{30pt}{%Y=begin{picture}(30,100)Y=put(0,0){%Y=framebox(30,100){図}}1. 次の問いに答えよ。Y=end{picture}}次の問いに答えよ。 (1) アアアY=begin{enumerate}[(1)] アアア図Y=item アアア アアア アアア −→ (2) イイイアアアイイイY=item イイイ 2. いいいイイイ いいいY=end{enumerate}Y=end{mawarikomi}Y=itemいいいY=end{enumerate}(cid:4) (cid:5)6.1.4 回り込みの行数指定オプション回り込みを行う行数は，図の高さから計算で求めています。しかし，テキスト部分の状態によっては不適切な場合もでてきます。そこでmawarikomi環境に [...] オプションで行数の指定ができるようにしてあります。45ページの例では，計算では8行となっていますが，テキスト部分の状況から7行とした方が良いようです。下の例では，Y=begin{mawarikomi}[7]{30pt}{図}としています。なお，この指定法は相対指定も可能で，数値に ‘+’ ‘−’ を付けることにより計算で得られた行数を増減させます。下の例をY=begin{mawarikomi}[-1]{30pt}{図}46

### Page 53

としても同じ結果が得られます。(cid:2) (cid:3)回り込み行数の調整Y=begin{enumerate}Y=itemY=begin{mawarikomi}[7]{30pt}{%Y=begin{picture}(30,100)Y=put(0,0){%Y=framebox(30,100){図}}Y=end{picture}} 1. あああ あああ2. いいいY=end{mawarikomi}図いいいY=itemY=begin{mawarikomi*} −→ 3. ううういいい ううういいい うううY=end{mawarikomi*} うううY=item うううY=begin{mawarikomi*} ううう うううY=end{mawarikomi*}Y=end{enumerate}(cid:4) (cid:5)6.1.5 テキストと図の横間隔テキスト部分と図の部分との横間隔はデフォルトでY=newlength{=Ymawarikomisep}%Y=setlength{=Ymawarikomisep}{2pt}%としてあり，その2倍4ptが空くようにしてあります。次の例では，Y=setlength{=Ymawarikomisep}{1zw}%として，その2倍2zwの空きを作ってみました。47

### Page 54

(cid:2) (cid:3)テキストと図の横間隔Y=begin{enumerate}Y=itemY=setlength{=Ymawarikomisep}{%1zw}%Y=begin{mawarikomi}{30pt}{%1. あああY=begin{picture}(30,30) 図あああY=put(0,0){%あああY=framebox(30,30){図}}−→ あああY=end{picture}}あああ 2. いいいあああ いいいあああY=end{mawarikomi}Y=item いいいY=end{enumerate}(cid:4) (cid:5)6.1.6 図の位置の微調整図の位置を細かく調整したいことがあります。そのためにmawarikomi環境に(x,y)オプションを用意しました。一例です。(cid:2) (cid:3)図の位置（調整前）Y=begin{enumerate}Y=itemY=begin{mawarikomi}{40pt}{%Y=begin{picture}(30,30)1. あああY=put(0,0){% 図あああY=framebox(30,30){図}}あああY=end{picture}}−→ あああ 2. いいいあああ いいいY=end{mawarikomi}Y=item いいいY=end{enumerate}(cid:4) (cid:5)図をもう少し右上に動かしたいですね。mawarikomi環境に(5pt,2pt) オプションを付加してみました。48

### Page 55

(cid:2) (cid:3)図の位置（調整後）Y=begin{enumerate}Y=itemY=begin{mawarikomi}%(5pt,2pt){40pt}{%Y=begin{picture}(30,30) 1. あああ図Y=put(0,0){% あああY=framebox(30,30){図}} あああY=end{picture}} −→ あああ あああ2. いいいあああいいいあああY=end{mawarikomi}Y=item いいいY=end{enumerate}(cid:4) (cid:5)6.1.7 段落途中からの回り込み<n> オプションで段落の始めからn行は回り込みをしないように指定することができます。下の例は<1>としたものです。(cid:2) (cid:3)<n>オプションY=begin{enumerate}Y=itemY=begin{mawarikomi}<1>{30pt}{%Y=begin{picture}(30,30)Y=put(0,0){% 1. あああY=framebox(30,30){図}} あああ図Y=end{picture}} あああ あああ −→ あああ あああ あああ2. いいいあああいいいあああY=end{mawarikomi}Y=item いいいY=end{enumerate}(cid:4) (cid:5)49

### Page 56

ただしテキスト部に数式があるなど行ピッチが変わると，図の位置の調整が必要になります。下の例では，2行目の数式を回り込みの対象外にするため，<2>オプションをつけました。テキスト部はお望み通り3行目から回り込みが始まっていますが，図の位置が不適切です。(cid:2) (cid:3)図位置の調整が必要Y=begin{enumerate}Y=itemY=begin{mawarikomi}<2>{30pt}{%Y=begin{picture}(30,30)Y=put(0,0){% 1. あああ1Y=framebox(30,30){図}} あああ あ11+Y=end{picture}} 11+あああ x図あああ−→あああ$Y=bunsuu{1}{1+=Ybunsuu{1}{%あああ1+=Ybunsuu{1}{x}}}$あああ 2. いいいあああ いいいあああY=end{mawarikomi}Y=item いいいY=end{enumerate}(cid:4) (cid:5)では，(0,-24pt)オプションで図を下に動かしてみます。50

### Page 57

(cid:2) (cid:3)図位置の調整後Y=begin{enumerate}Y=itemY=begin{mawarikomi}<2>%(0,-24pt){30pt}{%Y=begin{picture}(30,30)1. あああY=put(0,0){%1あああ あY=framebox(30,30){図}}1+11Y=end{picture}} 1+xあああ あああ −→ あああ 図$Y=bunsuu{1}{1+=Ybunsuu{1}{% あああ1+=Ybunsuu{1}{x}}}$ あああ2. いいいあああいいいあああY=end{mawarikomi}Y=item いいいY=end{enumerate}(cid:4) (cid:5)6.1.8 Y=caption の使用mawarikomi環境内では，Y=captionを使用できません。そこで，Fmawarikomi環境：図番号を使用Tmawarikomi環境：表番号を使用なる2つの環境を用意してあります。下の例では，Tmawarikomi環境，Fmawarikomi環境内でY=captionを使用しています。51

### Page 58

(cid:2) (cid:3)Fmawarikomi, Tmawarikomi 環境Y=begin{enumerate}Y=item =Ybegin{Tmawarikomi}(0,5pt){9zw}{%Y=caption{表の例}Y=label{T1}=YhfilY=begin{tabular}{|c|c|c|}=Yhlineaaa & bbb & ccc =YY=Y=hline1 & 2 & 3 Y=Y=Y=hlineY=end{tabular}}第1問 右の表Y=ref{T1}においてあああY=end{Tmawarikomi}Y=item =Ybegin{Fmawarikomi}{60pt}{%Y=unitlength1pt%Y=begin{picture}(60,30)%Y=put(0,0){=Yline(2,1){60}}%Y=end{picture}%Y=caption{図の例}Y=label{Fig1}}第2問 右の図Y=ref{Fig1}において，いいいY=end{Fmawarikomi}Y=end{enumerate}(cid:4) (cid:5)1. 第1問 右の表1においてあああ表 1: 表の例あああaaa bbb cccあああ1 2 3あああ−→ 2. 第2問 右の図1において，いいい 図 1: 図の例いいい52

### Page 59

なお別法として，mawarikomi環境において，Y=fgcaptionY=tbcaptionコマンドでY=captionの代行をさせることも可能です。ただし，これらのコマンドはemathCap.styで定義されていますから、使用する際はY=usepackage{emathCap}としておく必要があります。6.1.9 書式mawarikomi環境の書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=begin{mawarikomi}<#1>[#2](#3,#4)#5#6#1 : 段落当初の回り込みをしない行数#2 : 回り込み行数（相対指定可）先頭に‘l’を付けたときは図を左に配置(#3,#4) : 図の位置修正ベクトル#3 : (>0) 右，(<0) 左#4 : (>0) 上，(<0) 下#3,#4 共に単位必須（0のみは単位不要）#5 : 図の横幅（単位必須）#6 : 図，表など関連パラメータY=mawarikomisep テキストと図の間隔（デフォルト値 2pt)この2倍の空きができます。6.1.10 図の左配置行数指定オプション[#2]で，引数の先頭に‘l’ (left)をつけると図などが左に配置されます。53

### Page 60

(cid:2) (cid:3)図の左配置Y=begin{enumerate}Y=itemY=begin{mawarikomi}[l]{30pt}{%Y=begin{picture}(30,30)1. あああY=put(0,0){% 図あああY=framebox(30,30){図}}あああY=end{picture}}−→ あああ 2. いいいあああ いいいY=end{mawarikomi}Y=item いいいY=end{enumerate}(cid:4) (cid:5)6.1.11 図幅指定の省略図幅を指定する引数を空にすると，TEXが認識する図幅で代行されます。ただし，図の部分が複数の段落を持つときは省略できません。したがって，図（表）番号を付与するときはこの機能は使えません。(cid:2) (cid:3)図幅省略Y=begin{enumerate}Y=itemY=begin{mawarikomi}{}{% 1. あああ図Y=begin{picture}(30,30) あああY=put(0,0){% あああY=framebox(30,30){図}} あああY=end{picture}} −→ あああ あああ2. いいいあああいいいY=end{mawarikomi}いいいY=item いいいY=end{enumerate}(cid:4) (cid:5)この場合，図とテキスト部の間隔は16ptとしてあります。増減したいときは，増減する数値を図幅指定の引数に，‘+’あるいは‘−’ の符号付で与えます。極端な例です。54

### Page 61

(cid:2) (cid:3)図幅省略時の本文と図の間隔Y=begin{enumerate}Y=itemY=begin{mawarikomi}{-16pt}{%1. あああY=begin{picture}(30,30) 図あああY=put(0,0){%あああY=framebox(30,30){図}}あああY=end{picture}} −→あああ 2. いいいあああ いいいY=end{mawarikomi} いいいY=item いいいY=end{enumerate}(cid:4) (cid:5)文書全体でこの間隔を変更したいときは，Y=mawarikomikankakuの値を変更します。デフォルトはY=mawrikomikankaku=8ptとなっており，その2倍の16ptが空きます。文書全体でこの間隔を変更したければ，プリアンブルでY=mawrikomikankaku=10ptなどと，右辺値を変更します。（この変更で2倍の20ptが空くことになります。）6.1.12 テキスト部が短いとき図に比して，テキスト部が短く，回り込みが始まる前にテキスト部が終わってしまうときの処理です。まずは，具合の悪い例をご覧ください。(cid:2) (cid:3)テキストが短いときY=begin{enumerate}[(1)]Y=item =Ybegin{mawarikomi}{}{%Y=begin{zahyou*}[ul=5mm]% (1) あああ(0,4)(0,6) あああY=framebox(4,6){図} あY=end{zahyou*}} → 図(2) いいいあああいいいY=end{mawarikomi}いいいいY=item いいいY=end{enumerate}(cid:4) (cid:5)55

### Page 62

この場合第1問の本文が短いので，第2問が図にかかってしまいました。第2問も引き続きまわりこみをさせる mawarikomi*環境については§6.1.2 (p.45) で述べました。ここでは，第2問を図が終わった後に記述する方法について述べます。(cid:2) (cid:3)Y=mawarikomiowariY=begin{enumerate}[(1)](1) あああY=item =Ybegin{mawarikomi}{}{%あああY=begin{zahyou*}[ul=5mm]%あ(0,4)(0,6)図Y=framebox(4,6){図}Y=end{zahyou*}}→あああY=end{mawarikomi}Y=mawarikomiowari (2) いいいY=item いいい いいい いいいY=end{enumerate}(cid:4) (cid:5)すなわち，mawarikomi環境が終わったとき，Y=mawarikomiowari と記述します。（注） このような場合，nidan環境も使えますが，mawarikomi環境の方が多機能となりましたので，nidan環境は発展的解消とします。nidan環境はemathOld.styに保存されていますから、Y=usepackage{emathOld}としておけば，使用可能です。56

### Page 63

6.1.13 改ページとの関係(1)mawarikomi環境の図が，ページの境界にさしかかると，おかしなことがおきる可能性があります。完全に解決することはできませんが，いくつかの例を見ていただきましょう。まず，p.58〜p.59（この部分，背景色をivoryとしています）では，問題なしですが，57

### Page 64

あああいいいずずず図ずずず58

### Page 65

ずずず59

### Page 66

mawarikomi環境より前の部分が延びてくると，図は次ページに送られ，p.61の下部には大きな空白ができます。（背景色はlavender）60

### Page 67

あああいいい61

### Page 68

ずずず図ずずず62

### Page 69

図が次ページに送られるのは仕方がないとして，テキスト部は一部を繰り上げて，空白ができないようにしたければY=begin{mawarikomi}<0>{}{%と，mawarikomi環境に<0>オプションをつけます（背景色はskyblue）。その効用は：63

### Page 70

あああいいいずずず64

### Page 71

ずずず図ずずず65

### Page 72

6.1.14 改ページとの関係(2)mawarikomi環境部がページの境目に差し掛かると，いろいろ厄介な現象が生じます。その一事例です。この文書の67〜69ページを見てください（この部分は黄色の背景色がついています）。p.68は，たった2行で改ページされています。p.69に配置されているmawarikomi環境は，p.68の続きに配置できそうなのに，なぜか改ページされています。その理由の説明と，この現象を回避する一手段を見ていただきましょう。まずは，理由の推測です。1) emathMw.styは，図がページの境目にひっかかる場合，次ページに送る仕様となっています。 12) この文書では，p.68の終りで図がページの境目にひっかるので，図の前で改ページされます。この時点では，フロート（脚注）はないものとして判断が行われます。3) そのあとで，フロートが入ることにより，p.68の終りのY=section{mawarikomiを次ページに送らなくても良いのに}Y=repeatchar{い}{30}の2行が次ページに送られますが，図の前の改ページは取り消されることはありません。ということで，p.68は，2行だけということとなってしまったのです。対症療法です。この文書では，p.69に移されたmawarikomi環境は，ページ境目にきても改ページをしないようにします。そのための環境が，新設されたPmawarikomi環境です。p.70〜p.71では（この部分の背景色はシアンです），この新設環境を用いています。1emathMw.styを[samepage]オプション付でロードすると，次ページ送りの処理を禁止することもできます。この場合，以下の議論は無意味です。66

### Page 73

やたら改ページのmawarikomiあああ2あああいいい3いいい2脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注3きゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅう67

### Page 74

mawarikomiを次ページに送らなくても良いのにいいいきゃくちゅうきゃくちゅう68

### Page 75

ずずず図ずずず69

### Page 76

Pmawarikomi の効用あああ4あああいいい5いいい4脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注脚注5きゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅうきゃくちゅう70

### Page 77

Pmawarikomiで望みの位置にいいいずずず図ずずずきゃくちゅうきゃくちゅう71

### Page 78

6.2 複数の図の周りへの回り込み横幅の異なる複数の図の周りへテキストを回り込ませるのは面倒です。現時点では，自動ではなく手動で行う方法しかありません。(1) 図を配置する。(2) 図の周りに，テキストを回り込ませる。という手順で実現することにします。6.2.1 図の配置 — zuhaiti環境まずは，図の配置です。(cid:2) (cid:3)図の配置Y=begin{zuhaiti}Y=haiti{%Y=begin{tabular}{|c|c|c|}Y=hlineA & B & C Y=Y=Y=hline1 & 2 & 3 Y=Y=Y=hlinex & y & z Y=Y=Y=hlineあああAああBああCあY=end{tabular}}あああ1ああ2ああ3あY=haiti{%あああxああyああzあY=begin{picture}(20,80)%あああY=framebox(20,80){図}あああY=end{picture}}→ あああ図Y=end{zuhaiti}%あああ(cid:4) (cid:5)段落の先頭でzuhaiti環境を置き，その中でY=haitiコマンドで図表などを配置していきます。72

### Page 79

6.2.2 枠の設定 — Y=wakudoriこの時点では，文字が図にかぶっています。この文字を図の周りに回りこませます。そのためには，図の横幅を知らねばなりません。この場合は，zahyou環境のY=unitlengthとxの範囲から計算で求められますが，TEXが認識している図の横幅がタイプセットした際にできるログファイルに記録されています：図幅=57.8056pt図幅=20.0pt図と文字部分との間隔を10ptとして，初めの4行は 67.8pt,次の5行は，30pt 行の長さを短くしてみます。(cid:2) (cid:3)枠の設定Y=begin{zuhaiti}Y=haiti{%Y=begin{tabular}{|c|c|c|}=YhlineA & B & C Y=Y=Y=hline1 & 2 & 3 Y=Y=Y=hlinex & y & z Y=Y=Y=hline あああ A B CY=end{tabular}} あああ 1 2 3Y=haiti{% あああ x y zY=begin{picture}(20,80)% あああY=framebox(20,80){図} あああY=end{picture}} → あああ図Y=end{zuhaiti}% あああY=wakudori{4*67.8pt;5*30pt} あああ あああ あああ あああ(cid:4) (cid:5)新設コマンドY=wakudori{4*67.8pt;5*30pt}で，4行分右に67.8ptの空きを作り，引き続いて5行分30ptの空きを作ります。すなわちY=wakudoriの引数には73

### Page 80

行数*横幅を‘;’区切りで並べます。なお，このコマンドはzuhaiti環境の外に記述します。74

### Page 81

6.2.3 図の左配置2番目の図を左に配置してみましょう。(cid:2) (cid:3)図の左配置Y=begin{zuhaiti}Y=haiti{%Y=begin{tabular}{|c|c|c|}=YhlineA & B & C Y=Y=Y=hline1 & 2 & 3 Y=Y=Y=hlinex & y & z Y=Y=Y=hline あああ A B CY=end{tabular}} あああ 1 2 3Y=haiti[l]{% あああ x y zY=begin{picture}(20,80)% あああY=framebox(20,80){図} あああY=end{picture}} → あああ図Y=end{zuhaiti}% あああY=wakudori{3*67.8pt;6*(30pt,0pt)} あああ あああ あああ あああ(cid:4) (cid:5)すなわち，図を左配置するには，Y=haitiコマンドに[l]オプションをつけます。また，左配置した図を回り込ませるには，Y=wakudori の引数を行数*(左空きのサイズ,右空きのサイズ)の形で与えます。一見良さそうですが，よく見ると4行目が第1の図にかぶっています。この行は2つの図両方にかかっているのでした。その修正法を2つ紹介します。75

### Page 82

6.2.4 図の位置の微調整修正法その1は，2番目の図を1行分下に動かし，4行目は第1の図に対して回り込ませます。(cid:2) (cid:3)図の位置を調整Y=begin{zuhaiti}Y=haiti{%Y=begin{tabular}{|c|c|c|}=YhlineA & B & C Y=Y=Y=hline1 & 2 & 3 Y=Y=Y=hlinex & y & z Y=Y=Y=hlineあああ A B CY=end{tabular}}あああ 1 2 3Y=haiti[l]%あああ x y z(0pt,-=Ybaselineskip){%あああY=begin{picture}(20,80)%あああY=framebox(20,80){図}あああY=end{picture}} →あああ図Y=end{zuhaiti}%あああY=wakudori{4*67.8pt;6*(30pt,0pt)}あああ(cid:4) (cid:5)すなわち，図の位置をずらすには，Y=haitiコマンドに(dx,dy)オプションをつけます。dx, dyは単位を伴った長さで，dx は左右の動きでdx>0 のとき右へ，dx<0 のとき左へ動きます。dy は上下の動きでdy>0 のとき上へ，dy<0 のとき下へ動きます。ここでは，Y=haiti[l](0pt,-=Ybaselineskip){...により図を1行分下に動かしています。76

### Page 83

6.2.5 行の左右に枠修正法その2です。2つの図にかかる行の左右双方に枠をあけてしまう，という方法です。(cid:2) (cid:3)行の左右双方に枠Y=begin{zuhaiti}Y=haiti{%Y=begin{tabular}{|c|c|c|}=YhlineA & B & C Y=Y=Y=hline1 & 2 & 3 Y=Y=Y=hlinex & y & z Y=Y=Y=hlineY=end{tabular}}あああ A B CY=haiti[l]{%あああ 1 2 3Y=begin{picture}(20,80)%あああ x y zY=framebox(20,80){図}あああY=end{picture}}あああY=end{zuhaiti}%→ あああ図Y=wakudori{%あああ3*67.8pt;あああ1*(30pt,67.8pt);あああ5*(30pt,0pt)}あああ(cid:4) (cid:5)77

### Page 84

6.2.6 listとの併用enumerateなどlist系の環境下で用いるときの注意です。(cid:2) (cid:3)listと併用 – 失敗Y=begin{enumerate}Y=itemY=begin{zuhaiti}Y=haiti{%Y=begin{tabular}{|c|c|c|}=Yhline 1. あああ A B CA & B & C Y=Y=Y=hline あああ 1 2 31 & 2 & 3 Y=Y=Y=hline あああ x y zx & y & z Y=Y=Y=hline あああY=end{tabular}} あああY=haiti[l]% あああ(0pt,-=Ybaselineskip){% あああ図Y=begin{picture}(20,80)% あああY=framebox(20,80){図} あああY=end{picture}} あああY=end{zuhaiti}% あああY=wakudori{4*67.8pt;6*(30pt,0pt)} あああ あああいいい→あああいいいあああいいいあああいいいあああいいいあああいいいあああいいいあああ2. ううういいいううういいいううういいいううういいいうううY=itemうううY=end{enumerate}(cid:4) (cid:5)あらま。これでは困ります。Y=wakudoriはTEXのY=parshapeを用いています。普通は段落が変78

### Page 85

わればY=parshapeは解消してしまいますが，list環境下では，段落が変わってもY=parshapeを使い続けることになっています。対応法はY=wakudoriで設定した枠どりが終った次の段落の先頭でY=wakudori{}と枠どりの終了を宣言し，Y=parshapeをlist環境のものに戻しておくことです。(cid:2) (cid:3)listと併用 – 成功Y=begin{enumerate}Y=itemY=begin{zuhaiti}Y=haiti{%Y=begin{tabular}{|c|c|c|}=YhlineA & B & C Y=Y=Y=hline1 & 2 & 3 Y=Y=Y=hline1. あああ A B Cx & y & z Y=Y=Y=hlineあああ 1 2 3Y=end{tabular}}あああ x y zY=haiti[l]%あああ(0pt,-=Ybaselineskip){%あああY=begin{picture}(20,80)%あああY=framebox(20,80){図}あああY=end{picture}} 図あああY=end{zuhaiti}%あああY=wakudori{4*67.8pt;6*(30pt,0pt)} →あああいいいあああいいいあああいいあああ2. うううあああうううY=wakudori{}%いいいY=itemうううY=end{enumerate}(cid:4) (cid:5)79

### Page 86

6.2.7 Y=captionの使用Y=captionをつけるときは，Y=fgcaption,Y=tbcaptionを用いますが，Y=haitiの引数はY=hboxに入れてサイズを測っていますので，複数の段落を含むものは記述できません。そのためY=captionを使用する際は，minipage環境にくるんでおく必要があります。(cid:2) (cid:3)Y=captionの使用Y=begin{zuhaiti}Y=haiti{%Y=begin{minipage}{57.8pt}Y=tbcaption{表の例}Y=begin{tabular}{|c|c|c|}=YhlineA & B & C Y=Y=Y=hline1 & 2 & 3 Y=Y=Y=hlineあああx & y & z Y=Y=Y=hline 表 2: 表の例あああY=end{tabular} A B CあああY=end{minipage}} 1 2 3あああY=haiti[l](0pt,-=Ybaselineskip){% x y zあああY=begin{minipage}{50pt}あああY=begin{picture}(50,80)%あああY=framebox(50,80){図}あああY=end{picture}図 あああY=fgcaption{ず}→ あああY=end{minipage}あああ}あああY=end{zuhaiti}%図 2: ず あああY=wakudori{5*67.8pt;8*(60pt,0pt)}あああ(cid:4) (cid:5)80

### Page 87

6.2.8 テキスト部が複数の段落を持つ場合回り込むテキスト部が複数の段落を持つときは，ちと面倒です。Y=parshapeは複数の段落を通して与えることができませんから，段落ごとに，その段落の形を Y=wakudoriの引数に与えなければなりません。(cid:2) (cid:3)複数の段落を持つテキスト部Y=begin{zuhaiti}Y=haiti{%Y=begin{tabular}{|c|c|c|}=YhlineA & B & C Y=Y=Y=hline1 & 2 & 3 Y=Y=Y=hlinex & y & z Y=Y=Y=hlineY=end{tabular}}Y=haiti[l]% あああ A B C(0pt,-=Ybaselineskip){% あああ 1 2 3Y=begin{picture}(20,80)% いいい x y zY=framebox(20,80){図} いいいY=end{picture}} いいいY=end{zuhaiti}% いいいY=wakudori{2*67.8pt} → いいい図あああ いいいああああ いいいY=wakudori{2*67.8pt;6*(30pt,0pt)} いいい いいい いいい(cid:4) (cid:5)6.2.9 Y=unitlengthの変更についてzuhaiti環境は，実質的にはpicture環境です。そこでは，Y=unitlengthを1ptとしています。図を配置するコマンドY=haiti内でY=unitlengthを変更するときはグルーピングをしてY=unitlengthの変更を局部的にしておかないといけません。81

### Page 88

6.3 図番号の書式修正Y=captionコマンドによる図番号は図1: なんとかの図という具合に番号の後ろにコロンがつきます。これが邪魔であるというご意見をよく聞きます。確かに，タイトルをつけないで使用する場合にはコロンは不要ですね。そこで Y=EMcaptionを作りました。使用例です。(cid:2) (cid:3)Y=EMcaptionY=begin{enumerate}Y=itemY=begin{Fmawarikomi}{30pt}{%Y=begin{picture}(30,30)1. 右の図3においてあああY=put(0,0){% 図あああY=framebox(30,30){図}}あああY=end{picture}あああ 図 3Y=EMcaption{}あああY=label{Fig13}}−→ あああ右の図Y=ref{Fig13}においてあああ 2. いいいあああ いいいY=end{Fmawarikomi} いいいY=item いいいY=end{enumerate}(cid:4) (cid:5)関連して，Y=fgEMcaption, =YtbEMcaptionも定義されています。ただし，これらのコマンドはemathCap.styで定義されていますから、使用する際はY=usepackage{emathCap}としておく必要があります。7 enumerate環境の機能拡張この節のコマンド類は，emath.sty ではなく，emathE.sty に含まれています。82

### Page 89

7.1 小問を横に並べる。7.1.1 横に並べる個数指定小問を横に並べる環境 edaenumerate です。ただし，edaenumerate環境はemath.styではなく，emathEy.styで定義されています。使用するにはY=usepackage{emathEy}を宣言しておく必要があります。A. 一番多いのは，横に2問ずつ並べるタイプでしょうか。(cid:2) (cid:3)edaenumerate環境Y=begin{enumerate}Y=item 次の問に答えよ．Y=begin{edaenumerate}Y=item aaaY=item bbbY=item cccY=item dddY=end{edaenumerate}Y=end{enumerate}(cid:4) (cid:5)【1】次の問に答えよ．−→(1) aaa (2) bbb(3) ccc (4) ddd83

### Page 90

B. 横に3問ずつ並べたいときは <..> オプションを使います。(cid:2) (cid:3)edaenumerate<3>Y=begin{enumerate}Y=item 次の問に答えよ．Y=begin{edaenumerate}<3>Y=item aaaY=item bbbY=item cccY=item dddY=item eeeY=item fffY=end{edaenumerate}Y=end{enumerate}(cid:4) (cid:5)【1】次の問に答えよ．−→(1) aaa (2) bbb (3) ccc(4) ddd (5) eee (6) fffなお，LATEX2εで enumerate に [...] オプションを併用する場合はY=begin{edaenumerate}<3>[(1)]のように，<..> オプションを先に付けてください。84

### Page 91

C. 小問の一部は2問ずつ，一部は3問ずつ並べたい，という例です。(cid:2) (cid:3)変則Y=begin{enumerate}Y=item 次の問に答えよ．Y=begin{edaenumerate}Y=item aaaaaY=item bbbbbY=item cccccY=item dddddY=item<3> eeeY=item<3> fffY=item<3> gggY=end{edaenumerate}Y=end{enumerate}(cid:4) (cid:5)【1】次の問に答えよ．−→ (1) aaaaa (2) bbbbb(3) ccccc (4) ddddd(5) eee (6) fff (7) gggD. 小問の位置（左インデント）を変更するには (...) オプションを用います。(cid:2) (cid:3)edaenumerate(...)Y=begin{enumerate}Y=item 次の問に答えよ．Y=begin{edaenumerate}(2zw)Y=item aaaY=item bbbY=item cccY=item dddY=end{edaenumerate}Y=end{enumerate}(cid:4) (cid:5)【1】次の問に答えよ．−→(1) aaa (2) bbb(3) ccc (4) ddd85

### Page 92

E. テスト問題などでは，縦方向に空白を作りたいことがあります。<...> オプションにgyoukan=2cmなどと行間の長さを指定します。(cid:2) (cid:3)<gyoukan=..> 1. 次の問いに答えよ。Y=begin{enumerate}[1.~](1) aaa (2) bbbY=item 次の問いに答えよ。Y=begin{edaenumerate}%<gyoukan=2cm>[(1)]Y=item aaa →Y=item bbb(3) ccc (4) dddY=item cccY=item dddY=end{edaenumerate}Y=end{enumerate}(cid:4) (cid:5)横に並べる小問数も指定したければ，オプションを<retusuu=3,gyoukan=2cm>などと記述します。86

### Page 93

均等割りなら，Y=vfill も使えますし，<gyoukan==Yvfill>と指定するのもありです。(cid:2) (cid:3)Y=vfill で縦方向の空白Y=begin{enumerate}Y=item 次の問に答えよ．Y=begin{edaenumerate}<gyoukan==Yvfill>Y=item aaaY=item bbbY=item cccY=item dddY=end{edaenumerate}Y=end{enumerate}(cid:4) (cid:5)をタイプセットすると，下のようになります。【1】次の問に答えよ．(1) aaa (2) bbb(3) ccc (4) ddd87

### Page 94

また，横に並べた小問の間に縦罫線を入れたいことがあります。解答の余白を縦2cmとして，縦罫線を入れる例です。(cid:2) (cid:3)小問の間に縦罫線Y=begin{enumerate}Y=item 次の問に答えよ．Y=begin{edaenumerate}Y=item aaa =Yvspace{2cm}% 解答欄の高さY=edasikiri% 縦罫線Y=item bbb%Y=item ccc =Yvspace{2cm}%Y=edasikiri%Y=item ddd%Y=end{edaenumerate}Y=end{enumerate}(cid:4) (cid:5)【1】次の問に答えよ．(1) aaa (2) bbb−→(3) ccc (4) ddd88

### Page 95

F. eda... の書式です。【1】環境edaenumerate<横に並べる小問の個数(デフォルトは2）>(小問の左インデント)[enumerate のオプションと同じ(LaTeX2eのみ)]【2】コマンドY=item<横に並べる小問の個数（デフォルトは Y=begin{edaenumerate}の指定値）>(小問の横幅)[Y=item のオプションと同じ]89

### Page 96

7.1.2 ベタ並べedaenumerate 環境は，横に並べる個数を指定しますが，個数は指定せず，ベタに並べるのがbetaenumerate環境です。(cid:2) (cid:3)betaenumerate下の選択肢から選んで記号で答えよ。Y=begin{jquote}(3zw)Y=begin{betaenumerate}[A. ]Y=item $=Ybunsuu12$Y=item $=Ybunsuu13$Y=item $=Ybunsuu14$Y=item $=Ybunsuu15$Y=item $=Ybunsuu32$Y=item $=Ybunsuu43$Y=item 4Y=item 2Y=item 3Y=item 1Y=item 5Y=item $=Ybunsuu{1}{n+1}$Y=item $=Ybunsuu{n}{n+1}$Y=item $=Ybunsuu{1}{rn+1}$Y=item $=Ybunsuu{n}{rn+1}$Y=item $=Ybunsuu{1}{r(n+1)+1}$Y=item $=Ybunsuu{n}{n(n+1)+1}$Y=end{betaenumerate}Y=end{jquote}(cid:4) (cid:5)−→下の選択肢から選んで記号で答えよ。1 1 1 1 3 4A. B. C. D. E. F. G. 4 H. 2 I. 32 3 4 5 2 31 n 1 nJ. 1 K. 5 L. M. N. O.n+1 n+1 rn+1 rn+11 nP. Q.r(n+1)+1 n(n+1)+1余白量はデフォルトでY=def=Ybetalabelwidth{3em}としてあります。これを再定義して小さくすれば更に詰め込むことができます。90

### Page 97

7.1.3 yokoenumeratebetaenumerate環境は追い込み式の横並べですが，項目幅は項目ごとに異なります。長さが最大の項目幅で横並べするのが yokoenumerate 環境です。(cid:2) (cid:3)yokoenumerate環境Y=begin{enumerate}[1.~]Y=item =Ytextsf{betaenumerate}環境Y=begin{betaenumerate}Y=item aaaY=item bY=item cccccY=item dddddddddddY=item eeY=item ffffY=item gggggY=item hhhhhhY=end{betaenumerate}Y=item =Ytextsf{yokoenumerate}環境Y=begin{yokoenumerate}Y=item aaaY=item bY=item cccccY=item dddddddddddY=item eeY=item ffffY=item gggggY=item hhhhhhY=end{yokoenumerate}Y=end{enumerate}(cid:4) (cid:5)↓1. betaenumerate環境(a) aaa (b) b (c) ccccc (d) ddddddddddd (e) ee (f) ffff (g) ggggg(h) hhhhhh2. yokoenumerate環境(a) aaa (b) b (c) ccccc (d) ddddddddddd(e) ee (f) ffff (g) ggggg (h) hhhhhhこの環境とedaenumerate環境との違いは，edaenumerate環境は横に並べる項目数をこちらが指定するのに対して，yokoenumerate環境は項目幅と版面との兼ね合いでTEXが決めてくれるとい91

### Page 98

う違いです。7.2 enumerate 環境の中断・継続enumerate 環境をいったん中断して，後刻再開したいことがあります。その際，番号を継続させるための環境Enumerate, Enumerate*を定義しました。例えば，次のように用います。(cid:2) (cid:3)enumerate 環境の中断・継続次の問いに答えよ．Y=begin{Enumerate}Y=item 第1問Y=item{=Ylabel{val-a}} ．．．を満たすように，定数$a$の値を定めよ．Y=end{Enumerate}以下，$a$ は (Y=ref{val-a})で求めた値とする．Y=begin{Enumerate*}Y=item 第3問Y=item 第4問Y=end{Enumerate*}(cid:4) (cid:5)次の問いに答えよ．(1) 第1問(2) ．．．を満たすように，定数aの値を定めよ．−→以下，a は (2)で求めた値とする．(3) 第3問(4) 第4問すなわち，Enumerate 環境で始めて，それを Enumerate* 環境で続けることになります。Enumerate 環境は，実質 enumerate 環境と同じですが，後で番号を継続させる仕掛けを追加してあります。Enumerate* 環境は直前の Enumerate 環境または Enumerate* 環境の番号を引き継ぎます。92

### Page 99

7.3 指定した項目番号に * などを附加問題集などで，一部の問題に*印などをつけようという話です。(cid:2) (cid:3)Y=item*Y=begin{enumerate}[1.~]Y=item 次の問いに答えよ。Y=begin{edaenumerate}[%1. 次の問いに答えよ。Y=protect=Ypreitem(1)]Y=item* aaa → *(1) aaa (2) bbbY=item bbb(3) ccc *(4) dddY=item cccY=item* dddY=end{edaenumerate}Y=end{enumerate}(cid:4) (cid:5)すなわち，書式指定にY=preitemを置き，*を付けたい項目をアスタリスク付の Y=item* で記述します。*を番号の後ろにおきたければ(cid:2) (cid:3)Y=item**Y=begin{edaenumerate}[(1){%Y=makebox[0pt][l]=Ypostitem}~] 1. 次の問いに答えよ。Y=item** aaa→ (1)* aaa (2) bbbY=item bbbY=item ccc (3) ccc (4)* dddY=item** dddY=end{edaenumerate}(cid:4) (cid:5)書式指定にY=postitemを加え，アスタリスクを2個つけたY=item**を用います。また，後置記号のありなしで番号部分の横幅が揃うようにY=begin{edaenumerate}[(1){=Ymakebox[0pt][l]=Ypostitem}~]と，細工をしています。*以外の記号を使いたいときは，Y=item*, Y=item** に[..]オプションをつけます。(cid:2) (cid:3)Y=item*[..]Y=begin{edaenumerate}[%Y=protect=Ypreitem(1)] 1. 次の問いに答えよ。Y=item*[=Ydag] aaa→ †(1) aaa (2) bbbY=item bbb(3) ccc *(4) dddY=item cccY=item* dddY=end{edaenumerate}(cid:4) (cid:5)後置する場合です。93

### Page 100

(cid:2) (cid:3)Y=item**[..]Y=begin{edaenumerate}[(1){%Y=makebox[0pt][l]=Ypostitem}~] 1. 次の問いに答えよ。Y=item**[=Ydag] aaa→ (1)† aaa (2) bbbY=item bbb(3) ccc (4)* dddY=item cccY=item** dddY=end{edaenumerate}(cid:4) (cid:5)前と後ろの両方に記号をつけたい，ということは起こりそうもありませんが，可能ではあります。(cid:2) (cid:3)前後置Y=begin{edaenumerate}[%Y=protect=Ypreitem(1){%1. 次の問いに答えよ。Y=makebox[0pt][l]=Ypostitem}~]Y=item*[*][=Ydag] aaa → *(1)† aaa *(2) bbbY=item* bbb (3)† ccc (4)‡ dddY=item**[=Ydag] cccY=item*[][=Yddag] dddY=end{edaenumerate}(cid:4) (cid:5)と，Y=item*に[前置記号][後置記号]と2つのオプションをつけます。この場合，前置記号が‘*’であっても，明示する必要があります。以上の例はすべて edaenumerate 環境で示しましたが，一般の enumerate 環境，各種の横並びenumerate環境でも有効です。7.4 横幅一定のローマ数字小問などの番号にローマ数字を用いると(cid:2) (cid:3)小問番号にローマ数字Y=begin{enumerate}[(i)] (i) あああY=item あああ→ (ii) いいいY=item いいいY=item ううう (iii) うううY=end{enumerate}(cid:4) (cid:5)ローマ数字が左にせり出す感じになります。その点を配慮して94

### Page 101

(cid:2) (cid:3)Y=emromanY=begin{enumerate}[(%(i) あああY=protect=Yexpandafter=Yemroman i)]Y=item あああ → (ii) いいいY=item いいい(iii) うううY=item うううY=end{enumerate}(cid:4) (cid:5)大文字のローマ数字に対しては(cid:2) (cid:3)Y=emRomanY=begin{enumerate}[(%( I ) あああY=protect=Yexpandafter=YemRoman I)]Y=item あああ → (II) いいいY=item いいい(III) うううY=item うううY=end{enumerate}(cid:4) (cid:5)7.5 固定桁数のナンバリング 001, 002, 003, ...左に0を補って固定桁数で番号付けをするためのコマンドがY=Ofilです。(cid:2) (cid:3)Y=OfilY=begin{edaenumerate}<5>’(=YOfil{2}{=Ygetcurrentenum})’Y=item aaY=item bbY=item ccY=item ddY=item eeY=item ffY=item ggY=item hhY=item iiY=item jjY=end{edaenumerate}(cid:4) (cid:5)−→ (01) aa (02) bb (03) cc (04) dd (05) ee(06) ff (07) gg (08) hh (09) ii (10) jjすなわち，Y=Ofilは，桁数と数値の2つの引数をとります。95

### Page 102

7.6 番号付けにカタカナ・ひらがなを使う。この節の機能は，Waverさんから使用を認めていただいたマクロを使用させていただいています。有り難うございます。＞ Waver さん。enumerate 環境での番号付けは通常，1, 2, 3, ...a, b, c, ...のように行われますが，これをア,イ,ウ,...イ,ロ,ハ,...のようにする例です。{%Y=renewcommand{=Ylabelenumi}{%(Y=カタカナ{enumi})}(ア) y =xY=begin{enumerate}Y=item $y=x$ −→ (イ) y =x2Y=item $y=x^2$(ウ) y =x3Y=item $y=x^3$Y=end{enumerate}}%Y=カタカナ というコマンドで，ア,イ,ウ,エ,オ,カ,...と，カタカナの五十音順にナンバリングされます。ここを次のように変更することもできます。Y=イロハ でイ,ロ,ハ,ニ,ホ,ヘ,...Y=ひらがな であ,い,う,え,お,か,...Y=いろは でい,ろ,は,に,ほ,へ,...7.7 enumerate 環境のオプション文字の追加enumerate パッケージを使用すると，以下のオプション文字を用いて番号付けを制御することができます。1 : 1,2,3,4,5,6,7,.....I : I,II,III,IV,V,VI,VII,.....i : i,ii,iii,iv,v,vi,vii,.....A : A,B,C,D,E,F,G,.....a : a,b,c,d,e,f,g,.....96

### Page 103

emathE.sty では，オプションに使用できる文字として，下の7個を追加してあります。m ：(cid:6)1, (cid:6)2, (cid:6)3, (cid:6)4, (cid:6)5, (cid:6)6, (cid:6)7,.....n ： 1,2,3,4,5,6,7,.....ア ： ア,イ,ウ,エ,オ,カ,キ,...イ ： イ,ロ,ハ,ニ,ホ,ヘ,ト,...あ ： あ,い,う,え,お,か,き,...い ： い,ろ,は,に,ほ,へ,と,...一 ： 一,二,三,四,五,六,七,...ただし，最後の「一」は plext パッケージを必要とします。その他の文字はそのまま出力されますからY=begin{enumerate}[（ア）]とすれば，番号付けが（ア）,（イ）,（ウ）,（エ）,（オ）,（カ）,（キ）,...となります。このオプション文字の追加は，edaenumerate 環境に対しても有効です。その一例として n オプション — 縦長の丸付き数字 — を用いたものをごらん頂きましょう。(cid:2) (cid:3)enumerate 環境のオプション文字 m右の Y=texttt{BASIC} のプログラム（省略）の Y=framebox{ } に次のいずれかを補い，プログラムを完成させよ．{Y=ttfamilyY=begin{edaenumerate}<5>[n]Y=setcurrentenum{-1}%Y=item +Y=item -Y=item $=Yast$Y=item /Y=item =Y=item{}<>Y=item >Y=item{}<Y=item >=Y=item{}<=Y=end{edaenumerate}}(cid:4) (cid:5)97

### Page 104

右の BASIC のプログラム（省略）の に次のいずれかを補い，プログラムを完成させよ．−→0 + 1 - 2 ∗ 3 / 4 =5 <> 6 > 7 < 8 >= 9 <=ここで Y=setcurrentenum というコマンドが登場しますが，これは，enumerate 環境の現在の深さの番号変数の値を変更するものです。この例では，番号が1からではなく，0から始まっています。そのため，初期値を変更しておく必要があります。Y=setcounter{enumi}{-1}とするのが普通ですが，ある問題集の中にこの問題を収録したとき，問題集の番号を enumerate環境で付けますと，enumerate 環境の深さが変わることによりY=setcounter{enumii}{-1}と修正を必要とします。ここで用いたY=setcurrentenum{-1}は，現在のenumerate環境の深さを判断して，その番号を変更する機能を持つコマンドで，emath.styの中で定義されています。これと対をなすコマンドがY=getcurrentenumで，現在の問題番号を取得します。7.8 enumerate環境における番号付けの初期値・刻み値変更enumerate環境における番号付けで初期値を1以外の値にしたい。刻み値を1以外に指定したい。という要望にこたえるため，enumerate環境の<key=val>オプションのkeyにsyokiti, kizamitiを新設しました。,98

### Page 105

(cid:2) (cid:3)<kizamiti=10>Y=begin{reidai}刻み値を10に設定する例Y=begin{jquote}Y=begin{ttfamily}Y=begin{enumerate}<syokiti=90,kizamiti=10>[1]Y=item INPUT "分数A/B(0<A<B)を入力，A, B =";A, BY=item IF (B MOD A) = O THEN GOTO =Yref{end}Y=item N = INT(=YHako)+=YHakoY=item PRINT N;Y=item A = A*N-BY=item B = B*NY=item GOTO =YHakoY=item =Ylabel{end}PRINT =YHakoY=item ENDY=end{enumerate}Y=end{ttfamily}Y=end{jquote}Y=end{reidai}(cid:4) (cid:5)例題 1 刻み値を10に設定する例100 INPUT "分数A/B(0<A<B)を入力，A, B =";A, B110 IF (B MOD A) = O THEN GOTO 170120 N = INT( ア )+ イ130 PRINT N;→140 A = A*N-B150 B = B*N160 GOTO ウ170 PRINT エ180 END次は，刻み値を負にする例です。99

### Page 106

(cid:2) (cid:3)<kizamiti=-1>Y=begin{reidai}初期値を27, 刻み値を$-1$に設定する例Y=begin{jquote}Y=begin{enumerate}<syokiti=27,kizamiti=-1>[1.~]Y=item zzzY=item yyyY=begin{align}x&=1=YY=y&=2=Ylabel{yy}=YY=z&=3Y=end{align}Y=item xxxY=item wwwY=end{enumerate}Y=eqref{yy}においてY=end{jquote}Y=end{reidai}(cid:4) (cid:5)例題 2 初期値を27, 刻み値を−1に設定する例26. zzz25. yyyx=1 ···················· (cid:6)1→ y =2 ···················· (cid:6)2z =3 ···················· (cid:6)324. xxx23. www(cid:6)2において7.9 enumerate環境の前後左右の空き調整enumerate環境の前後左右の空きを調整するには，enumerate環境の<...>オプションapnenum=....を利用します。まずは，標準のenumerate環境です。100

### Page 107

(cid:2) (cid:3)enumerate環境Y=begin{enumerate}[1.~] 1. 次の問いに答えよ。Y=item 次の問いに答えよ。(1) あああY=begin{enumerate}[(1)]あああY=item あああ→ あああ(2) いいいY=item いいいY=end{enumerate}Y=end{enumerate}(cid:4) (cid:5)101

### Page 108

7.9.1 左インデントでは，左インデントの修正です。前ページ，標準のenumerate環境では，小問の左インデントは，大問のそれより全角2文字分深くなっています。それを同じにしてみましょう。(cid:2) (cid:3)Y=leftmarginの変更Y=begin{enumerate}[1.~]1. 次の問いに答えよ。Y=item 次の問いに答えよ。Y=begin{enumerate}% (1) あああ<apnenum={=Yleftmargin=0zw}>[(1)] あああY=item あああ → あああ (2) いいいY=item いいいY=end{enumerate}Y=end{enumerate}(cid:4) (cid:5)小問番号が左に出すぎていますから，小問の1行目だけ右に押し込みます。Y=itemindentを変更します。(cid:2) (cid:3)Y=itemindentの変更Y=begin{enumerate}[1.~]Y=item 次の問いに答えよ。1. 次の問いに答えよ。Y=begin{enumerate}%<apnenum={=Yleftmargin=0zw% (1) あああY=itemindent=1zw% あああ}>[(1)] → あああY=item あああ(2) いいいあああいいいY=item いいいY=end{enumerate}Y=end{enumerate}(cid:4) (cid:5)102

### Page 109

7.9.2 縦間隔次は縦間隔の修正です。大問と小問の間を詰めたい，というご意見はよく耳にします。Y=topsep,Y=parskipを変更します。(cid:2) (cid:3)大問と小問の縦間隔Y=begin{enumerate}[1.~]Y=item 次の問いに答えよ。Y=begin{enumerate}%1. 次の問いに答えよ。<apnenum={=Yleftmargin=0zw%(1) あああY=itemindent=1zw%あああY=topsep=0pt%あああY=parskip=0pt% →}>[(1)] (2) いいいY=item あああ いいいあああ いいいY=item いいいY=end{enumerate}Y=end{enumerate}(cid:4) (cid:5)小問同士の間隔も詰めたい，となると，Y=itemsepを修正します。(cid:2) (cid:3)小問同士の縦間隔Y=begin{enumerate}[1.~]Y=item 次の問いに答えよ。Y=begin{enumerate}%<apnenum={=Yleftmargin=0zw%1. 次の問いに答えよ。Y=itemindent=1zw%(1) あああY=topsep=0pt%あああY=parskip=0pt%→ あああY=itemsep=0pt%(2) いいい}>[(1)]いいいY=item あああいいいあああY=item いいいY=end{enumerate}Y=end{enumerate}(cid:4) (cid:5)103

### Page 110

7.9.3 縦間隔のグルーところで，縦間隔の初期値がどうなっているかを確認しておきます。topsep = 8.0pt plus 2.0pt minus 4.0ptparskip = 4.0pt plus 2.0pt minus 1.0ptitemsep = 4.0pt plus 2.0pt minus 1.0ptある意味で，グルーは TEXの命です。これらを0pt固定にするということは，ページ全体のバランスがとれなくなり，折角の TEXの美しさを損なうこととなりかねません。ということでグルーを付けておきましょう。(cid:2) (cid:3)enumerate環境Y=begin{enumerate}[1.~]Y=item 次の問いに答えよ。Y=begin{enumerate}%<apnenum={=Yleftmargin=0zw%1. 次の問いに答えよ。Y=itemindent=1zw%(1) あああY=topsep=0pt plus 6pt%あああY=parskip=0pt plus 3pt%→ あああY=itemsep=0pt plus 3pt%(2) いいい}>[(1)]いいいY=item あああいいいあああY=item いいいY=end{enumerate}Y=end{enumerate}(cid:4) (cid:5)7.9.4 Y=enumSep<apnenum=...>オプションは，当該enumerate環境のみに対する局所的な変更です。文書全体に対して同様の変更をするためには，Y=enumSep, =YenumSepi, =YenumSepii, ...コマンドが用意されています。Y=enumSepコマンドの引数にlist環境の第二引数に記述するものを与えます。例えば，Y=enumSep{=Ytopsep=0pt=Yparskip=0pt%Y=parsep=0pt=Yitemsep0pt}%と記述すると，行間は狭くなります。これはよく使いそうですから，Y=def=Ynarrowenumsep{=Ytopsep=0pt=Yparskip=0pt=Yparsep=0pt%Y=itemsep0pt}%104

### Page 111

と，代名詞 Y=narrowenumsep を定義してあります。(cid:2) (cid:3)enumerate環境の行間Y=enumSep{=Ynarrowenumsep}次の問いに答えよ． 次の問いに答えよ．Y=begin{enumerate}[1)] 1) aaa−→Y=item aaa 2) bbbY=item bbb 3) cccY=item cccY=end{enumerate}(cid:4) (cid:5)Y=enumSepはenumerate環境4レベルすべてについて共通の設定をしますが，レベル毎に変更したいというときは，Y=enumSepi, Y=enumSepii, Y=enumSepiii, Y=enumSepiv を使用することもできます。なお，これらのコマンドと，<apnenum=...>オプションを併用した場合は，当該enumerate環境に対しては<apnenum=...>オプションが優先されます。7.9.5 Y=enumLmargin文書全体で左マージンを変更するコマンドが Y=enumLmargin です。例えば次のように用います。(cid:2) (cid:3)enumerate環境の左マージンY=enumLmargin{1zw}%Y=begin{enumerate}[=YLarge 1.=Y ] 1.次の問いに答えよ．おおおおY=item 次の問いに答えよ．おおおY=begin{enumerate}[(1)]−→Y=item アアア (1) アアア アアアY=item イイイ (2) イイイ イイイY=end{enumerate}Y=end{enumerate}(cid:4) (cid:5)前節の行間を狭くするコマンドと併用すると，105

### Page 112

(cid:2) (cid:3)ケチケチ enumerateY=enumSep{=Ynarrowenumsep}%Y=enumLmargin{1zw}%1.Y=begin{enumerate}[=YLarge 1.=Y ] 次の問いに答えよ．おおおおY=item 次の問いに答えよ．おおお おおお おY=begin{enumerate}[(1)] −→ (1) アアアY=item アアア アアア (2) イイイY=item イイイ イイイY=end{enumerate}Y=end{enumerate}(cid:4) (cid:5)Y=enumLmarginはenumerate環境4レベルすべてについて左マージンを変更しますが，レベル毎に変更したいというときは，Y=enumLmargini,Y=enumLmarginii,Y=enumLmarginiii,Y=enumLmarginivを使用することもできます。なお，この目的にもY=apnlistを使用することができます。まずはデフォルトの確認です。(cid:2) (cid:3)enumerate環境あああY=begin{enumerate}[1.~]Y=item 次の問いに答えよ。 1. 次の問いに答えよ。おおお おおおY=begin{enumerate}[(1)](1) あああY=item あああY=item いいい (2) いいい→いいい いいいううう ううう2. アアアY=end{enumerate}アアアY=item アアア いいいY=end{enumerate} いいい(cid:4) (cid:5)左インデントを調整した一例です。106

### Page 113

(cid:2) (cid:3)Y=apnlistあああ あああ1. 次の問いに答えよ。おおおY=apnlist{=Yitemindent=1zwおおおY=leftmargin=1zw(1) あああY=listparindent=1zw}あああY=begin{enumerate}[1.~](2) いいいY=item 次の問いに答えよ。→ いいいおおおうううY=apnlist{=YnarrowsepうううY=itemindent=1zwY=topsep=0zw 2. アアアY=leftmargin=1zw アアアY=listparindent=1zw}いいいY=begin{enumerate}[(1)]いいい% 以下前の例と同じ(cid:4) (cid:5)7.10 edaenumerate環境の前後左右の空き調整edaenumerate環境における項目周りのアキの調整です。7.10.1 edaenumerate環境デフォルトのedaenumerate環境を見ておきます。(cid:2) (cid:3)edaenumerate環境Y=begin{enumerate}[1.~]Y=item 次のおおおY=begin{edaenumerate}[(1)]Y=itemあああY=itemいいいY=end{edaenumerate}Y=end{enumerate}(cid:4) (cid:5)↓1. 次のおおお(1) あああ (2) いいいあああ いいい107

### Page 114

7.10.2 preedasep=..オプション上のデフォルト状態に対して，「小項目の2行目以降を左に突き出したい」という要望があります。そこで，<preedasep=..>オプションを新設しました。（preedasepのデフォルト値は1.75zwです。）108

### Page 115

(cid:2) (cid:3)preedasep=..オプションY=begin{enumerate}[1.~]Y=item 次のおおおY=begin{edaenumerate}<preedasep=0pt>[(1)]Y=itemあああY=itemいいいY=end{edaenumerate}Y=end{enumerate}(cid:4) (cid:5)↓1. 次のおおお(1) あああ(あ2) いいいあああ いいい2行目以降のみならず，1行目も左に突き出てしまいましたから，<apnenum=..>オプションで1行目を修正します。(cid:2) (cid:3)apnenum=..オプションY=begin{enumerate}[1.~]Y=item 次のおおおY=begin{edaenumerate}<preedasep=0pt,apnenum={=Yitemindent=1.75zw}>[(1)]Y=itemあああY=itemいいいY=end{edaenumerate}Y=end{enumerate}(cid:4) (cid:5)↓1. 次のおおお(1) あああ(あ2) いいいあああ いいい109

### Page 116

7.10.3 postedasep=..オプション小項目間のアキは，<postedasep=..>オプションで調整できます。（postedasepのデフォルト値は.75zwです。）(cid:2) (cid:3)postedasep=..オプションY=begin{enumerate}[1.~]Y=item 次のおおおY=begin{edaenumerate}<preedasep=0pt,postedasep=2zw,apnenum={=Yitemindent=1.75zw}>[(1)]Y=itemあああY=itemいいいY=end{edaenumerate}Y=end{enumerate}(cid:4) (cid:5)↓1. 次のおおお(1) あああ(2) いいいあああ いいい110

### Page 117

7.10.4 edatopsep=..オプション大問とedaenumerate環境との縦間隔は<edatopsep=..>オプションで調整可能です。（edatopsepのデフォルト値は0ptです。）(cid:2) (cid:3)edatopsep=..オプションY=begin{enumerate}[1.~]Y=item 次のおおおY=begin{edaenumerate}<preedasep=0pt,postedasep=2zw,edatopsep=-.8zh,apnenum={=Yitemindent=1.75zw}>[(1)]Y=itemあああY=itemいいいY=itemうううY=itemえええY=end{edaenumerate}Y=end{enumerate}(cid:4) (cid:5)↓1. 次のおおお(1) あああ(2) いいいあああ いいい(3) ううう(4) えええううう えええ7.11 Y=item 直後のedaenumerate環境7.11.1 問題提示大問Y=itemには文章があって，そのあとに小問が続くのが普通ですが，111

### Page 118

(cid:2) (cid:3)普通はY=begin{enumerate}[=Yprotect=Yexpandafter=Yfbox 1]Y=item 次の問いに答えよ。Y=begin{edaenumerate}[(1)]Y=item 第1問Y=item 第2問Y=end{edaenumerate}Y=end{enumerate}(cid:4) (cid:5)1 次の問いに答えよ。→(1) 第1問 (2) 第2問大問には文章はなく，いきなり小問をedaenumerate環境で記述するときの話です。(cid:2) (cid:3)大問直後のedaenumerate環境Y=begin{enumerate}[=Yprotect=Yexpandafter=Yfbox 1]Y=itemY=begin{edaenumerate}[(1)]Y=item 第1問Y=item 第2問Y=end{edaenumerate}Y=end{enumerate}(cid:4) (cid:5)→ 1 (1) 第1問 (2) 第2問特に問題はないようですが，大問の左インデントをいじっていると問題が発生します。7.11.2 大問の左インデント操作との競合大問の左インデントを変更している場合は問題が発生します。(cid:2) (cid:3)Y=enumLmarginとの併用Y=enumLmargini{0pt}Y=begin{enumerate}[=Yprotect=Yexpandafter=Yfbox 1]Y=itemY=begin{edaenumerate}[(1)]Y=item 第1問Y=item 第2問Y=item 第3問Y=item 第4問Y=end{edaenumerate}Y=end{enumerate}(cid:4) (cid:5)112

### Page 119

(11) 第1問 (2) 第2問→(3) 第3問 (4) 第4問極端にY=enumLmargini{0pt}として，大問の左マージンをなくしてしまうと，大問番号と小問番号が重なります。＃ こんな馬鹿な使い方はしないほうがよろしいかと思いますが，＃ 小問番号を横に並べる＃ enumerate の2行目以降を左に突き出す＃ などという発想の先にこのような事態もおこってくるということでしょうか。＃ どこまで続くぬかるみぞ，といいたくなりますが．．．．．7.11.3 edaenumerate環境に<edafirstindent=..>オプションedaenumerate環境に <edafirstindent=..>オプションを付加する解決法です。(cid:2) (cid:3)<edafirstindent=..>オプションY=enumLmargini{0pt}Y=begin{enumerate}[=Yprotect=Yexpandafter=Yfbox 1]Y=itemY=begin{edaenumerate}<edafirstindent=2zw>[(1)]Y=item 第1問Y=item 第2問Y=item 第3問Y=item 第4問Y=end{edaenumerate}Y=end{enumerate}(cid:4) (cid:5)1 (1) 第1問 (2) 第2問→(3) 第3問 (4) 第4問7.11.4 emathAeとの併用emathAe.styを用いて，解答を巻末に集めるときはこの方式のほうがすっきりするようです。また，Y=kaitouコマンドも使用可能となります。113

### Page 120

(cid:2) (cid:3)emathAeとの併用Y=enumLmargin{0pt}Y=openKaiFileY=begin{enumerate}[=Yprotect=Yexpandafter=Yfbox1]Y=item 大問1Y=kaitou{=Ydef=YKaienumerate{edaenumerate}%Y=def=YKaienumopt{<edafirstindent=2zw,retusuu=3>}}%Y=begin{enumerate}[(1)]Y=item 小問1 Y=kaitou{解答1}Y=item 小問2 Y=kaitou{解答2}Y=item 小問3 Y=kaitou{解答3}Y=item 小問4 Y=kaitou{解答4}Y=item 小問5 Y=kaitou{解答5}Y=item 小問6 Y=kaitou{解答6}Y=end{enumerate}Y=end{enumerate}Y=closeKaiFileY=hrule【解答】Y=inputKaiFile(cid:4) (cid:5)1 大問1(1) 小問1(2) 小問2(3) 小問3(4) 小問4→(5) 小問5(6) 小問6【解答】1 (1) 解答1 (2) 解答2 (3) 解答3(4) 解答4 (5) 解答5 (6) 解答6114

### Page 121

7.11.5 betaenumerate環境では新設した<edafirstindent=..>は，betaenumerate環境に対しても有効です。(cid:2) (cid:3)betaenumerate環境の場合Y=enumLmargini{0pt}Y=begin{enumerate}[=Yprotect=Yexpandafter=Yfbox 1]Y=itemY=begin{betaenumerate}<edafirstindent=2zw>[(1)]Y=item 第1問Y=item 第2問Y=item 第3問Y=item 第4問Y=item 第5問Y=item 第6問Y=item 第7問Y=item 第8問Y=end{betaenumerate}Y=end{enumerate}(cid:4) (cid:5)1 (1) 第1問 (2) 第2問 (3) 第3問 (4) 第4問 (5) 第5問 (6) 第6問→(7) 第7問 (8) 第8問115

### Page 122

7.11.6 解答部のbetaenumerateemathAe.styを用いて，解答部をbetaenumerateとする場合も同様です。(cid:2) (cid:3)emathAeでbetaenumerateY=enumLmargin{0pt}Y=openKaiFileY=begin{enumerate}[=Yprotect=Yexpandafter=Yfbox1]Y=item 大問1Y=kaitou{=Ydef=YKaienumerate{betaenumerate}%Y=def=YKaienumopt{<edafirstindent=2zw>}}%Y=begin{enumerate}[(1)]Y=item 小問1 Y=kaitou{解答1}Y=item 小問2 Y=kaitou{かいとう2}Y=item 小問3 Y=kaitou{answer3}Y=item 小問4 Y=kaitou{解答4}Y=item 小問5 Y=kaitou{解答5}Y=item 小問6 Y=kaitou{解答6}Y=item 小問7 Y=kaitou{解答7}Y=item 小問8 Y=kaitou{解答8}Y=end{enumerate}Y=end{enumerate}Y=closeKaiFileY=hrule【解答】Y=inputKaiFile(cid:4) (cid:5)1 大問1(1) 小問1(2) 小問2(3) 小問3(4) 小問4(5) 小問5→(6) 小問6(7) 小問7(8) 小問8【解答】1 (1) 解答1 (2) かいとう2 (3) answer3 (4) 解答4 (5) 解答5(6) 解答6 (7) 解答7 (8) 解答8116

### Page 123

7.12 list環境の行間enumerate以外のlistに基づく環境description, itemize環境について，行間の修正をするためにY=apnlistを用意してあります。7.12.1 itemize環境itemize環境のデフォルト状態は(cid:2) (cid:3)itemize環境あああY=begin{itemize} • aaaY=item aaa→ • bbbY=item bbbY=item ccc • cccY=end{itemize}いいい(cid:4) (cid:5)項目間の行間を狭くするにはY=apnlistの引数にlist環境の第2引数に引き渡すものを記述します。あああ(cid:2) (cid:3)行間を狭く あああ • aaaあああ → • bbbY=apnlist{=Ynarrowsep}• cccY=begin{itemize}% 以下同じ いいい(cid:4) (cid:5)いいいY=narrowsepはY=def=Ynarrowsep{=Yparsep=Yz@=Yitemsep=Yz@=Yparskip=Yz@}とemathE.styで定義されています。すなわちY=parsep, =Yitemsep, =Yparskipを0ptとしています。この値を細かく調整することで好みのスタイルを実現できます。本文との間も詰めるには，Y=topsep=0ptを附加します。117

### Page 124

(cid:2) (cid:3) あああitemize環境あああ • aaaあああ → • bbbY=apnlist{=Ynarrowsep=Ytopsep=0pt}• cccY=begin{itemize}いいい% 以下同じいいい(cid:4) (cid:5)7.12.2 description環境description環境についても同様です。(cid:2) (cid:3)description環境あああAAA aaaY=begin{description}Y=item [AAA] aaa → BB bbbbY=item [BB] bbbbY=item [C] ccccc C cccccY=end{description}いいい(cid:4) (cid:5)あああ(cid:2) (cid:3)行間を狭く あああ AAA aaaあああ → BB bbbbY=apnlist{=Ynarrowsep}C cccccY=begin{description}% 以下同じ いいい(cid:4) (cid:5)いいい(cid:2) (cid:3) あああ本文との間隔あああ AAA aaaあああ → BB bbbbY=apnlist{=Ynarrowsep=Ytopsep=0pt}C cccccY=begin{description}いいい% 以下同じいいい(cid:4) (cid:5)7.12.3 enumerate環境enumerate環境に対してもY=apnlistは有効ですが，層ごとに指定するのはちと面倒です。118

### Page 125

まずはデフォルトの enumerate 環境です。(cid:2) (cid:3)enumerate環境あああ あああ あああY=begin{enumerate}[1.~]1. 次の問いに答えよ。Y=item 次の問いに答えよ。Y=begin{enumerate}[(1)](1) あああY=item あああ→ (2) いいいY=item いいいY=end{enumerate} 2. アアアY=item アアア アアアいいいY=end{enumerate}いいい(cid:4) (cid:5)第2層のenumerate環境の直前にY=apnlist{=Ynarrowsep=Ytopsep=0pt} を置いて，小問間の空き・大問と小問の間の空きを取り去ってみます。あああ(cid:2) (cid:3)Y=apnlist1. 次の問いに答えよ。あああ (1) あああ あああY=begin{enumerate}[1.~] (2) いいい→Y=item 次の問いに答えよ。 いいいY=apnlist{=Ynarrowsep=Ytopsep=0pt}2. アアアY=begin{enumerate}[(1)]アアア% 以下前の例と同じ(cid:4) (cid:5)いいいなお，Y=narrowsepはY=def=Ynarrowsep{=Yparsep==Yz@=Yitemsep=Yz@=Yparskip=Yz@}とemathE.styで定義されています。すなわちY=parsep, =Yitemsep, =Yparskipを0ptとしています。この値を細かく調整することで好みのスタイルを実現できます。先の例に戻り，大問間の行間も詰めたければ，第1層のenumerate環境の前にY=apnlist{narrowsep}119

### Page 126

を入れますと，あああ(cid:2) (cid:3) あああY=apnlistあああ 1. 次の問いに答えよ。あああ (1) あああY=apnlist{=Ynarrowsep} あああY=begin{enumerate}[1.~] → (2) いいいY=item 次の問いに答えよ。 いいいY=apnlist{=Ynarrowsep=Ytopsep=0pt} 2. アアアY=begin{enumerate}[(1)] アアア% 以下前の例と同じ(cid:4) (cid:5) いいい本文とenumerate環境部との縦間隔も詰めたい，となると第1層にもY=topsep=0ptを附加します。あああ(cid:2) (cid:3) あああY=apnlist1. 次の問いに答えよ。あああ(1) あああY=apnlist{=Ynarrowsep=Ytopsep=0pt}→ (2) いいいY=begin{enumerate}[1.~]いいいY=item 次の問いに答えよ。2. アアアY=begin{enumerate}[(1)]アアア% 以下前の例と同じいいい(cid:4) (cid:5)いいいこの場合，第1層，第2層のY=apnlistの引数は同一となりますから，第2層は省略可能です。（省略すれば，第1層のものが第2層以下すべてに有効となります。第2層はデフォルトのままにしたい，ということなら第2層の前にY=apnlist{=Yrelax}などと指定する必要があります。）7.13 問題番号の参照enumerate環境で番号付けされた問題番号にラベルをつけて，あとでそれを参照することができますが，第2層以下の場合，参照の形式がそれより上の層の番号まで含まれてしまいます。具体例を挙げてみましょう。第1層の番号付けが 1,2,3,...第2層の番号付けが a,b,c,...120

### Page 127

であるとします。(cid:2) (cid:3)問題番号の参照（デフォルト）Y=begin{enumerate}Y=item 第1問Y=begin{enumerate}Y=item 小問aY=item=Ylabel{mon1b}小問bY=item =Yref{mon1b}においてY=end{enumerate}Y=end{enumerate}(cid:4) (cid:5)1. 第1問−→a. 小問ab. 小問bc. 1bにおいてしかし，この場合は小問c における参照は1b においてではなく，大問番号を取り去ってb においてで十分です。このように，当該番号だけの参照を実現するためにY=refcurrentenumを用意しました。次のように用います。(cid:2) (cid:3)Y=refcurrentenumの効用Y=refcurrentenumY=begin{enumerate}Y=item 第1問Y=begin{enumerate}Y=item 小問aY=item=Ylabel{mon2b}小問bY=item =Yref{mon2b}においてY=end{enumerate}Y=end{enumerate}(cid:4) (cid:5)121

### Page 128

1. 第1問−→a. 小問ab. 小問bc. bにおいてデフォルト状態に戻すために，Y=refallenum を用意しました。(cid:2) (cid:3)Y=refallenumでデフォルトに戻すY=refallenumY=begin{enumerate}Y=item 第1問Y=begin{enumerate}Y=item 小問aY=item=Ylabel{mon3b}小問bY=item =Yref{mon3b}においてY=end{enumerate}Y=end{enumerate}(cid:4) (cid:5)1. 第1問−→a. 小問ab. 小問bc. 1bにおいて122

### Page 129

8 その他一般8.1 数式モードの中で英大文字をローマン体にする。8.1.1 caprm環境数式モードの中ではアルファベットはすべて斜体となります。ところが，点を表す記号は立体（ローマン体）で表す習慣です。例えば点 $A(x_1,y_1)$ などと記述すると，A が斜体となってしまいます。対応策は Y=mathrm{A}(x_1,y_1), Y=text{A}(x_1,y_1) などと A を立体にするコマンドを記述するのが普通です。別の対策として，数式モードで英大文字は立体で，小文字は斜体で表示させようという方法もあります。そのための環境 caprm 環境です。(cid:2) caprm (cid:3)Y=begin{caprm}二点 $A(a_1,a_2)$, $B(b_1,b_2)$ を結ぶ直線Y=end{caprm}(cid:4) (cid:5)という記述をタイプセットすると二点 A(a1,a2), B(b1,b2) を結ぶ直線と，大文字は立体，小文字は斜体となります。しかし，大文字はいつでも立体にするというのも問題です。例えば正弦定理a b c= = =2RsinA sinB sinCでは，大文字も斜体で書くのが習慣です。これは caprm 環境ではなく，通常の数式モードの方が良いでしょう。点を表す英大文字は立体で、三角形の頂角の大きさを表す英大文字は斜体で、などという区別はなかなかやっかいです。しかし，この caprm 環境はなかなか便利な場合もあります。例えば，点列 P1, P2, P3,······ , Pn,······の表現は caprm 環境だと(cid:2) caprm (cid:3)$ 点列 P_1,~P_2,~P_3,=Ycdots=Ycdots,~P_n,=Ycdots=Ycdots $(cid:4) (cid:5)と，簡潔に表されますが，普通の数式モードではやっかいで，一例を挙げると(cid:2) (cid:3)普通の数式モード$Y=mathrm{P_1,~P_2,=Ycdots=Ycdots},~=Ytext{P}_n,=Ycdots=Ycdots$とかP$_1$, P$_2$, $=Ycdots=Ycdots$, P$_n$, $=Ycdots=Ycdots$(cid:4) (cid:5)などと面倒になります。なお，caprm 環境内で英大文字を斜体にしたいときは Y=mathnormal を用います。例えば123

### Page 130

(cid:2) (cid:3)caprmで大文字を斜体$BC=2=Ymathnormal{R}=Ysin Y=mathnormal{A}$(cid:4) (cid:5)をタイプセットするとBC=2RsinAとなります。（注）caprm環境の中が数式モードになるわけではありません。caprm環境の中で，数式モードに入ると，そこでは大文字は立体で，小文字は数式イタリックになるというだけです。8.1.2 [o]オプションcaprm環境内で，あるブロックは大文字をデフォルトの数式イタリック体に戻すには，その部分を[o]オプション付のcaprm環境で囲みます。(cid:2) (cid:3)[o]オプションY=begin{caprm}三角形ABCにおいて三角形ABCにおいてY=[ BC=a,~CA=b,~AB=c =Y]BC=a, CA=b, AB=cとすると，Y=begin{caprm}[o]とすると，(cid:13)三角形ABCの面積Sは→ S = s(s−a)(s−b)(s−c)三角形ABCの面積$S$はとなる。ここでY=[ S==Ysqrt{s(s-a)(s-b)(s-c)} =Y]BC+CA+ABY=end{caprm} s=2となる。ここでY=[ s==Ybunsuu{BC+CA+AB}{2} =Y]Y=end{caprm}(cid:4) (cid:5)8.1.3 コマンド型環境にせず，コマンドでローマン体，数式イタリック体を切り替える方法もあります。Y=caprm ローマン体にY=caprm[o] 数式イタリック体に124

### Page 131

(cid:2) (cid:3)Y=caprmコマンドY=caprm%三角形ABCにおいて 三角形ABCにおいてY=[ BC=a,~CA=b,~AB=c =Y] BC=a, CA=b, AB=cとすると，% とすると，(cid:13)三角形ABCの面積SはY=caprm[o]=Yrelax% → S = s(s−a)(s−b)(s−c)三角形ABCの面積$S$はとなる。ここでY=[ S==Ysqrt{s(s-a)(s-b)(s-c)} =Y] BC+CA+ABs=2となる。ここでY=caprmY=[ s==Ybunsuu{BC+CA+AB}{2} =Y](cid:4) (cid:5)8.1.4 [l]オプション数式環境内で，小文字もローマン体にしたいときは，caprm 環境に [l] オプションをつけます。化学式などは小文字もローマン体です。caprm環境の [l] オプションY=begin{caprm}[l]$Nd_2Fe_{14}B$ −→ Nd2Fe14BY=end{caprm}8.1.5 Y=mathRM数式環境内で大文字だけをローマン体にするとき，それが1個所だけであるなどというときは，環境よりはコマンドの方が使いやすいでしょう。そのためのコマンド Y=mathRM です。例えばY=mathRM$Y=mathRM{A_nB_n}$ −→ AnBnにおいて，大文字はローマン体，小文字は数式イタリックでタイプセットされます。8.1.6 Y=bekutoru*始点，終点に添え字がついた場合のベクトルは面倒です。これを処理するため，caprm環境内での使用を前提とするY=bekutoru*コマンドを作りました。Y=bekutoruとの違いは，Y=bekutoru の引数はテキストモードであるのに対し，Y=bekutoru*の引数は数式モードである，ということです。125

### Page 132

例えば，ベクトルAnAn+1を両方のコマンドで表現してみます。Y=bekutoruとY=bekutoru*の違い−−−−−→Y=bekutoru{A$_n$A$_{n+1}$} −→ AnAn+1−−−−−→Y=bekutoru*{A_nA_{n+1}} −→ AnAn+1同様の趣旨のコマンドに Y=kaku*, Y=sankaku* があります。8.1.7 Y=mitSなどcaprm環境のもとでは，英大文字はローマン体となります。しかし，面積を表すS は数式イタリックとするのが慣わしです。そのためには$Y=mathnormal S$と記述すればよいのですが，タイピングを楽にするためにY=mitSと，略記することも可能としました。(cid:2) (cid:3)Y=mitSなどY=begin{caprm}Y=sankaku{ABC}において (cid:4)ABCにおいてY=[ AB=4,~BC=5,~CA=6 =Y]AB=4, BC=5, CA=6のとき，次の問いに答えよ。のとき，次の問いに答えよ。Y=begin{enumerate}[(1)] →Y=item $=Ycos=YmitA$を求めよ。 (1) cosAを求めよ。Y=item =Ysankaku{ABC}の面積 Y=mitS を求(2) (cid:4)ABCの面積Sを求めよ。めよ。Y=end{enumerate}Y=end{caprm}(cid:4) (cid:5)Y=mitSなどは，Y=ensuremathをかぶせてありますから，$Y=cos=YmitA$と，数式モードの中で使用してもよし，面積Y=mitS を求めよ。などと，地の文中で使用することもできます。（ただし，Y=mitSの後ろに半角空白を置いて，コマンドが“Y=mitSを求めよ。”ではないことを明示する必要があります。）8.2 インデント条件部分の記述などで，字下げをしたいときがあります。quote(quotation)環境を用いることもできますが，左インデント量を変えたい，右インデントは要らない，126

### Page 133

といった場面で使うために，jquote(jquotation)環境を用意しました。127

### Page 134

(cid:2) (cid:3)jquoteY=noindent左端 Y=hfill 右端Y=par本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文Y=begin{jquote}Y=texttt{jquote}環境による字下げは，左が全角2文字分，右は字下げ無しがデフォルトです．Y=end{jquote}本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文Y=begin{jquote}(5zw)Y=texttt{jquote}による字下げ量はオプション引数Y=texttt(...)によって指定することができます．Y=parここでは Y=cmd{begin}=Ytexttt{=Y{jquote=Y}(5zw)}としてみました．Y=end{jquote}本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文Y=begin{jquote}(5zw)(3zw)右インデントもつけたいときは，さらにY=texttt(...)オプションをつけます．この部分はY=Y=Y=cmd{begin}=Ytexttt{=Y{jquote=Y}(5zw)(3zw)}としてあります．なお，右インデントをつけるときは，必ず左インデント量を指定しなければなりません．Y=end{jquote}本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文Y=begin{jquote}[0pt]Y=texttt{jquote}環境のブロックと，その前後の段落との行間は，Y=begin{jquote}Y=cmd{topsep}Y=end{jquote}としてあります．これは Y=texttt{[...]}オプションで指定することができます．このブロックはY=cmd{begin}=Ytexttt{=Y{jquote=Y}[0pt]}としてみました．Y=the=Ytopsep上下の間隔を異なる値にしたいときは，Y=begin{jquote}Y=begin{verbatim}<tsep=..,bsep=..>Y=end{verbatim}Y=end{jquote}オプションを用います。Y=end{jquote}本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文(cid:4) 128 (cid:5)

### Page 135

左端 右端本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文jquote環境による字下げは，左が全角2文字分，右は字下げ無しがデフォルトです．本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文jquoteによる字下げ量はオプション引数(...)によって指定することができます．ここでは Y=begin{jquote}(5zw)としてみました．本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文右インデントもつけたいときは，さらに(...)オプションをつけます．−→ この部分はY=begin{jquote}(5zw)(3zw)としてあります．なお，右インデントをつけるときは，必ず左インデント量を指定しなければなりません．本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文jquote環境のブロックと，その前後の段落との行間は，Y=topsepとしてあります．これは [...]オプションで指定することができます．このブロックはY=begin{jquote}[0pt]としてみました．0.0pt上下の間隔を異なる値にしたいときは，<tsep=..,bsep=..>オプションを用います。本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文本文jquote環境の書式です。129

### Page 136

jquote環境の書式Y=begin{jquote}<key=val>(左インデント量)(右インデント量)[上下の行間隔]key はtsep=.. : 直前の段落との間隔調整 (ex. -=Ytopsep)bsep=.. : 直後の段落との間隔調整vsep=.. : tsep, bsep を同時指定デフォルト値は左インデント量 2zw右インデント量 0pt上下の行間隔 0ptとなっています。jquotation環境も同様です。なお，これらの環境は jquote.sty で定義されていますから、使用する際はY=usepackage{jquote}としておく必要があります。8.3 Y=EMparboxこの節では，ボックスのサイズを論じますので，Y=fboxでボックスを枠線で囲んで表示します。その際，Y=fboxsep=0ptとしてあります。8.3.1 Y=parbox複数行からなるブロックをまとめて一つのボックスとするのにY=parboxを用いることがあります。ただし，このコマンドはボックスの横幅を指定する必要があります。(cid:2) (cid:3)Y=parboxY=bigskipY=fbox{%Y=parbox{8zw}{% あいうえおあいうえおY=Y= → かきくけこかきくけこY=Y= やゆよやゆよ}%}Y=bigskip(cid:4) (cid:5)8.3.2 Y=EMparboxこの横幅指定が煩わしいからさぼろう，というのが新設したコマンドY=EMparbox です。130

### Page 137

(cid:2) (cid:3)Y=EMparboxY=bigskipY=fbox{%Y=EMparbox{% あいうえおあいうえおY=Y= → かきくけこかきくけこY=Y= やゆよやゆよ}%}Y=bigskip(cid:4) (cid:5)もっとも，この例の場合はtabular環境を使う方が普通でしょう。(cid:2) (cid:3)tabular環境Y=bigskipY=fbox{%Y=begin{tabular}{l}あいうえおあいうえおY=Y=→ かきくけこかきくけこY=Y=やゆよやゆよY=end{tabular}%}Y=bigskip(cid:4) (cid:5)8.3.3 Y=EMparboxのベースラインそのベースラインは，Y=parboxと同じです。131

### Page 138

(cid:2) (cid:3)ベースラインY=bigskipさY=fbox{%Y=parbox{8zw}{%あいうえおY=Y=かきくけこY=Y=やゆよ}%あいうえお あいうえお}→ さかきくけこ しかきくけこ すしやゆよ やゆよY=fbox{%Y=EMparbox{%あいうえおY=Y=かきくけこY=Y=やゆよ}%}すY=bigskip(cid:4) (cid:5)ベースラインを変更する方法もY=parboxと同様です。(cid:2) (cid:3)ベースラインの変更Y=bigskipさY=fbox{%Y=parbox[b]{8zw}{%あいうえおY=Y=かきくけこY=Y=やゆよ}%あいうえお あいうえお}→ かきくけこ かきくけこしさやゆよ しやゆよ すY=fbox{%Y=EMparbox[b]{%あいうえおY=Y=かきくけこY=Y=やゆよ}%}すY=bigskip(cid:4) (cid:5)132

### Page 139

8.4 Y=emovalboxfancybox.styで定義されているY=ovalboxは，eepic.styを用いた場合，上下の罫線と右四分円とがつながらない現象が発生します。そこで，emath.styにY=emovalboxを新設しました。(cid:2) (cid:3)Y=emovalbox(cid:10) (cid:12)あY=ovalbox{$t=1$}い あ (cid:10)(cid:11)t=1 (cid:12)(cid:13)い→あ(cid:11)t=1(cid:13)いあY=emovalbox{$t=1$}い(cid:4) (cid:5)コーナーの四分円の半径はデフォルトではY=fboxsepとしてありますが，変更するには[..]オプションを用います。(cid:2) (cid:3)コーナー半径の変更 (cid:4) (cid:5)→ あ(cid:2)t=1(cid:3)いあY=emovalbox[6pt]{$t=1$}い(cid:4) (cid:5)罫線の太さを変えたいなどに対しては，emathPs.styで定義されているY=EMpsovalboxをご使用ください。8.5 数式の配置 左（右）寄せと中央揃えの切り替え別行立て数式の配置は，Y=documentclass のオプションで fleqn を指定したときは左寄せ，そうでないときは中央揃えとなりますが，fleqnon, fleqnoff 環境を用いると，fleqnを指定していてもいなくても，2つの状態を切り替えることができます。サンプルをごらんいただきましょう。この文書は fleqn オプションをつけていますから，数式は左寄せとなります。(cid:2) (cid:3)デフォルトは左寄せY=begin{align*}y &= ax^2+bx+c=YY=y’&= 2ax+bY=end{align*}(cid:4) (cid:5)↓2y =ax +bx+c(cid:5)y =2ax+bfleqnoff 環境内では，数式は中央揃えとなります。133

### Page 140

(cid:2) (cid:3)Y=fleqnoffで中央揃えY=begin{fleqnoff}Y=begin{align*}y &= ax^2+bx+c=YY=y’&= 2ax+bY=end{align*}Y=end{fleqnoff}(cid:4) (cid:5)↓2y =ax +bx+c(cid:5)y =2ax+b134

### Page 141

なお，左寄せにしたときの左インデント量は Y=mathindent で指定することができますが，Y=fleqnonのオプション引数で指定することもできます。(cid:2) (cid:3)左インデント量の指定Y=begin{fleqnon}[4zw]=YrelaxあいうえおY=begin{align*}y &= ax^2+bx+c=YY=y’&= 2ax+bY=end{align*}Y=end{fleqnon}(cid:4) (cid:5)↓あいうえお2y =ax +bx+c(cid:5)y =2ax+bこのオプション引数のデフォルト値は Y=leftmargini です。数式を右寄せすることはあまり行われませんが，Y=tag*を用いれば実現できます。(cid:2) (cid:3)数式の右寄せY=begin{gather}x=−1Y=tag*{$x=-1$}=YY= →y =1Y=tag*{$y=1$}Y=end{gather}(cid:4) (cid:5)8.6 数式番号を左に出力emathでは，数式番号は右端に出力します。y =ax+b ···················· (cid:6)1y =px 2 +qx+r ···················· (cid:6)2文書全体で数式番号を左に出力するには，Y=usepackage[leqno]{amsmath}とでもすればよいのですが，emathを使用する文書では，その必要が生ずることはないでしょう。下の公式集は，次の要求にこたえたものです。(1) 公式にナンバリングをする。(2) 公式は等号の位置で桁揃えをする(2)の桁揃えの要求がなければ，(1)のナンバリングはenumerate環境で実現できるのですが，桁揃えをするとなると，数式部分はalign, alignatなどを使いたくなります。ということで，ナンバリングを数式番号を左に出すことで対応しようとしたのが下の結果です。135

### Page 142

(cid:2) (cid:3)Y=EMleqnoなどY=begin{itemsquarebox}{公式（その1）}Y=EMleqno% この環境内のみ数式番号左配置Y=EMsaveeqno% 数式番号退避Y=resetcounter{equation}% 数式番号リセットY=preEqlabel{}% 数式番号に3点リーダをつけないY=def=Ytagform#1{#1.}% 数式番号の形式を変更Y=vspace{-=Ybaselineskip}Y=begin{alignat}{3}&(fg)’ &&=f’g &&+fg’ =YY=&(fgh)’&&=f’gh &&+fg’h+fgh’Y=end{alignat}Y=EMrestoreeqno% 数式番号復元Y=end{itemsquarebox}(cid:4) (cid:5)公式（その1）(cid:5) (cid:5) (cid:5)1. (fg) =f g +fg→(cid:5) (cid:5) (cid:5) (cid:5)2. (fgh) =f gh+fg h+fgh上の環境の外では，数式番号，形式などに影響がないことを確認します。ax+by+c=0 ···················· (cid:6)3x 2 +y 2 =r 2 ···················· (cid:6)48.7 行末にマーク証明終わりを表すマークを行末に置くためのコマンドがY=owariです。(cid:2) (cid:3)Y=owariよって証明された。Y=owari(cid:4) (cid:5)−→ よって証明された。 (cid:6)このコマンドは別行立て数式行でも有効です。また，終わり記号を変更するにはY=owariの[...]オプションを用います。(cid:2) (cid:3)別行立て数式内の Y=owariY=fleqnoffY=begin{equation}y=2x^2-3x+1 =Yowari[=YCdots （答）]Y=end{equation}(cid:4) (cid:5)−→ y =2x 2−3x+1 …（答） ···················· (cid:6)1なお，amsmath.sty の ver.2 では上の例は136

### Page 143

Y=[ y=2x^2-3x+1 =Yowari[=YCdots （答）] Y=]と簡潔に書くことができます。行末に「…（答）」とすることは多いので，省略コマンドY=kotae もあります。これはオプションで3点リーダーの個数を指定することができます。一例です。(cid:2) (cid:3)Y=kotae−→ ∴ x=2 …………（答）$Y=therefore ~ x=2$ =Ykotae[4](cid:4) (cid:5)位置を行末から少し内側に寄せたいときは<..>オプションを用います。(cid:2) (cid:3)Y=kotae−→ ∴ x=2 …………（答）$Y=therefore ~ x=2$ =Ykotae[4]<2zw>(cid:4) (cid:5)8.8 リーダー罫文字列と文字列の間を ··· でつなげるのに，Y=dotfillコマンドがあります。(cid:2) (cid:3)Y=dotfill$y=ax^2+bx+c$=Ydotfill 放物線(cid:4) (cid:5)−→ y =ax2+bx+c........................................................放物線点々の位置をY=baselineではなく，少し上にあげたい，というのでコマンド Y=cdotfill を作りました。(cid:2) (cid:3)Y=cdotfill$y=ax^2+bx+c$=Ycdotfill 放物線(cid:4) (cid:5)−→ y =ax2+bx+c·······················································放物線このコマンドは[#1]オプションでリーダー罫の長さを指定することができます。(cid:2) (cid:3)Y=cdotfillの長さ指定オプション$a_1$, $a_2$,=Ycdotfill[3em], $a_n$,=Ycdotfill[3em](cid:4) (cid:5)−→ a1, a2,······, an,······左右の文字列とリーダー罫あわせた長さを指定する例です。(cid:2) (cid:3)Y=cdotfillの長さ指定オプション１２３４５６７８９０１２３４５６Y=par=YnoindentY=makebox[16zw]{$y=ax^2+bx+c$=Ycdotfill 放物線}(cid:4) (cid:5)１２３４５６７８９０１２３４５６−→y =ax2+bx+c···········放物線137

### Page 144

点と点の間隔を調整したいときは，Y=cdotskipを再定義します。デフォルトは Y=def=Ycdotskip{1.5mu}となっています。(cid:2) (cid:3)Y=cdotskipの変更$y=ax^2+bx+c$=Ycdotfill 放物線Y=par=YnoindentY=def=Ycdotskip{0.5mu}%$y=ax^2+bx+c$=Ycdotfill 放物線(cid:4) (cid:5)y =ax2+bx+c·······················································放物線−→y =ax2+bx+c··········································································放物線左右の文字列がともに全角文字のときは，リーダー罫の位置を少し上に上げたい，というのがY=Cdotfill です。(cid:2) (cid:3)Y=Cdotfill無理数Y=cdotfill 循環しない無限小数Y=par=Ynoindent無理数Y=Cdotfill 循環しない無限小数(cid:4) (cid:5)無理数····················································循環しない無限小数−→····················································無理数 循環しない無限小数Y=Cdotfillにも，長さ指定オプションがあります。その使い方などはY=cdotfillと同様です。8.9 支柱高さを揃えるには，支柱を使います。まずは，高さ・深さが不揃いな例をご覧ください。(cid:2) (cid:3)高さが不揃いな例 √ √→ a b$Y=sqrt{a}=Ysqrt{b}$(cid:4) (cid:5)a,bの高さ・深さが異なるため，根号が不揃いとなっています。このような場面では，Y=mathstrutという支柱が使われます。(cid:2) (cid:3)Y=mathstrut (cid:13) (cid:13)→ a b$Y=sqrt{a=Ymathstrut}=Ysqrt{b=Ymathstrut}$(cid:4) (cid:5)Y=mathstrutは，‘(’の高さと深さをもつ幅が0の支柱です。plain.texでY=def=Ymathstrut{=Yvphantom(}と定義されており，LATEXもその定義を採用しています。Y=vphantom#11は，#1と同じ高さ・深さをもつ支柱ですが，次の場合は分数 よりも少し高さ・深さを増やした2支柱がほしくなります。138

### Page 145

(cid:2) (cid:3)天地寸詰まりの表$Y=begin{array}{|c|c|}=Yhlinex yx & y Y=Y= Y=hline → 1222 & Y=bunsuu12 =YY= Y=hlineY=end{array}$(cid:4) (cid:5)emath.styでは，Y=EMvphantomなるコマンドでそれを実現しています。(cid:2) (cid:3)Y=EMvphantom$Y=begin{array}{|c|c|}=Yhline x yx & y Y=Y= Y=hline → 122 & Y=EMvphantom[4pt][3pt]{=Ybunsuu12}=Ybunsuu12 =YY= Y=hline 2Y=end{array}$(cid:4) (cid:5)1Y=EMvphantom[4pt][3pt]{=Ybunsuu12}で，分数 よりも，2高さを 4pt,深さを 3pt増やした支柱を作っています。この支柱は利用頻度が高そうですから，別名をY=bsityuuとしてあります。(cid:2) (cid:3)Y=bsityuu$Y=begin{array}{|c|c|}=Yhline x yx & y Y=Y= Y=hline → 122 & Y=bsityuu=Ybunsuu12 =YY= Y=hline 2Y=end{array}$(cid:4) (cid:5)Y=EMvphantom, Y=bsityuuの書式です。139

### Page 146

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=EMvphantom[#1][#2]#3#3 の高さに #1 を附加し，#3 の深さに #2 を附加した支柱を表す。#1 のデフォルト値は 0pt#2 のデフォルト値は #1Y=EMvphantom*[#1][#2]#3支柱を立てるだけではなく，#3をタイプセットする。Y=bsityuu[#1][#2]分数2分の1の高さに #1 を附加し，分数2分の1の深さに #2 を附加した支柱を表す。#1 のデフォルト値は 4pt#2 のデフォルト値は 3pt8.10 下線8.10.1 Y=underline下線を引くコマンドはY=underlineです。(cid:2) (cid:3)Y=underline下線を引きます。Y=underline{あいうえお}下線を引きます。あいうえお→ただし，このコマンドは，行をまたぐことができません。Y=underline{ただし，このコマンドは，行をまたぐことができません。}(cid:4) (cid:5)複数行に渡る下線を引くスタイルファイルにjumoline.styがあります。jumoline.styについては，その作者である 中島 浩さんのホームページhttp://www.para.tutics.tut.ac.jp/~nakasima/latex/をご覧ください。8.10.2 波下線8.10.2.1 ulem.sty 波下線を引くには，ulem.styで定義されているY=uwaveを用いるのが一般的な方法です。(cid:2) (cid:3)Y=uwaveあいうえお→ あいうえお (cid:2) か (cid:2)(cid:2) き (cid:2)(cid:2) く (cid:2)(cid:2) け (cid:2)(cid:2) こ (cid:2)(cid:2) さしすせそY=uwave{かきくけこ}さしすせそ(cid:4) (cid:5)140

### Page 147

数式に適用するときは，(cid:2) (cid:3)数式に対するY=uwaveY=uwaveの引数内で数式モードにY=cmd{uwave}の引数内で数式モードにしてもだしてもだめで，めで，Y=Y= 1lim =0Y=uwave{$=Ydlim{x=Yto=Yinfty}=Ybunsuu1x=0$}(cid:2)x(cid:2)→(cid:2)∞(cid:2)(cid:2)(cid:2)x(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)→ 数式モード内にY=uwaveを配置しY=Y=なければなりません。数式モード内にY=cmd{uwave}を配置しなければ1lim =0なりません。Y=Y= x→∞x(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)$Y=uwave{=Ydlim{x=Yto=Yinfty}=Ybunsuu1x=0}$(cid:4) (cid:5)8.10.2.2 Y=namikasen ところで，dviout.exe でみている限り綺麗なのですが，pdf にしてみると，波のつながり具合が乱れてきます。ということもあって，emath.styにY=namikasenを新設しました。こちらは，コマンドの引数を数式モードにする方式です。(cid:2) (cid:3)Y=namikasen1あいうえお あいうえお lim =0 さしすせx→∞x(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)Y=namikasen{%そさしすせそさしすせそさしすせ→$Y=dlim{x=Yto=Yinfty}=Ybunsuu1x=0$}そさしすせそさしすせそさしすせさしすせそさしすせそさしすせそさしすせそそさしすせそさしすせそさしすせそさしすせそさしすせそ(cid:4) (cid:5)ただし，行をまたがることはできません。なお，Y=namikasenを用いるには，ulem.styは不要です。8.10.2.3 波二重下線 Y=uwaveによる波下線を二重にするコマンドY=uuwaveをemath.sty に新設しました。ただし，この下請けはulem.styにありますから，このスタイルファイルを読み込んでおく必要があります。(cid:2) (cid:3)Y=uuwave 1lim =0 あああx→∞x$Y=uuwave{=Ydlim{x=Yto=Yinfty}=Ybunsuu1x=0}$ (cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)(cid:2)→あああ あああ あああ(cid:4) (cid:5)Y=namikasenの方で，波下線を二重とするには，Y=namikasenに[1.5]などと，オプションを与えます。[...]内の数値は，二重線の間隔（単位は pt）です。(cid:2) (cid:3)Y=namikasen[..]1Y=namikasen[1.5]{% lim =0 あああx→∞x(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)$Y=dlim{x=Yto=Yinfty}=Ybunsuu1x=0$} →あああ(cid:4) (cid:5)8.10.2.4 太波下線 太い波下線を引くには，コマンドY=hutonamikasenを用います。141

### Page 148

(cid:2) (cid:3)Y=namikasenUehoseiY=namikasen{かきくけこ}かきくけこ(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)かきくけこ→ (cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)Y=hutonamikasen{かきくけこ}かきくけこ(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)Y=hutonamikasen[2]{かきくけこ}(cid:4) (cid:5)ただし，Y=hutonamikasenは，内部でY=scaleboxを用いていますから，graphicx.styを必要とします。emathでは，emathP*.styを用いれば，graphicx.sty は自動的に読み込まれます。8.10.2.5 Y=namikasenと上下のアキY=namikasenUehosei =Ynamikasenとその下線を引く対象との間隔を調整するコマンドがY=namikasenUehoseiです。(cid:2) (cid:3)Y=namikasenUehoseiY=namikasen{かきくけこ}かきくけこ(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)下線の位置を対象に近づけたけれ下線の位置を対象に近づけたければ →ばかきくけこ(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)Y=namikasenUehosei{-2pt}Y=namikasen{かきくけこ}(cid:4) (cid:5)Y=namikasenUehoseiの引数に，波線縦位置を補正する数値（単位付）を与えます。正の値を与えれば下に，負の値を与えれば上に動きます。Y=namikasenSitahosei 逆に下線の下，すなわち下線と下の行との間隔を調整するのがY=namikasenSitahoseiです。(cid:2) (cid:3)Y=namikasenSitahosei標準はかきくけこおおお標準はY=namikasen{かきくけこ} (cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)おおお下線と次の行を離したければ下線と次の行を離したければ →標準はかきくけこおおお(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)(cid:27)Y=namikasenSitahosei{10pt}おおお標準はY=namikasen{かきくけこ}おおお(cid:4) (cid:5)上の例，後半ではY=namikasenSitahosei{10pt}として，波下線と次の行との間隔をデフォルトより10pt増やしています。142

### Page 149

9 メモリ不足への対応9.1 pool size図の描画には多くのメモリを必要とするようで，1ページの図が多いときなど! TeX capacity exceeded, sorry [pool size=67010].といったエラーメッセージに遭遇することがあります。この場合は，texmf.cnf というファイルを編集します。編集する前に，フロッピなどにオリジナルを保存した上でお願いします。このファイルは TEXをインストールしたフォルダの...=Ytexmf=Yweb2cに存在します。このファイルはテキストファイルですから，エディタで開いてpool_size = 125000という行を探します。（右辺値は異なるかもしれません。）この式の右辺値を 300000などと修正し，上書き保存します。pool_size = 300000なお，機種によってはこのファイルの拡張子が表示されないかもしれません（単に texmf と表示されます）。9.2 main memory size! TeX capacity exceeded, sorry [main memory size=263001].といったエラーメッセージの処理は，かなり厄介です。以下の記述では，TeX が c:=Yptex にインストールしてあるものとします。インストールドライブ，フォルダが異なる場合は読み替えてください。(1) 修正するファイルのバックアップの作成修正するファイルはtexmf.cnf, platex.fmtの２つです。現在，c:=Yptex=Ytexmf=Yweb2cにあるものをフロッピ，MO,などにコピーします。(2) texmf.cnf の修正エディタで texmf.cnf を開きます。検索機能を利用してmain_memoryを探してください。main_memory = 263000 % words of inimemory available; also applies to inimf&mp143

### Page 150

という行が見つかるはずです。ここを修正します。私はmain_memory = 526000 % words of inimemory available; also applies to inimf&mpと修正しました。ついでに，その少し下のpool_size = 125000もpool_size = 250000と増やしました。(3) platex.fmt の作成DOS 窓で，キーボードからc:cd Y=ptex=Ytexmf=Ytex=Yplatex=Ybaseと打ち込み，c:=Yptex=Ytexmf=Ytex=Yplatex=Ybaseをカレントフォルダにします。その上で，キーボードからptex --ini platex.ltxと打ち込み，リターンキーを押します。いろいろなメッセージが流れますが，作業が終了すると，DOS Prompt が出ます。（注）ここで LATEXのバージョンが古いと!Latex source files more than 1 year old!.1.573 ...LaTeX source files more than 1 year old!}などのメッセージが表れることがあります。このときは委細構わず，リターンキーを押せば作業は続行されます。もちろん，この機会に LATEXのバージョンアップをされることをお勧めしますが.....(4) platex.fmt を所定の場所に移す。(3) の作業の結果，c:=Yptex=Ytexmf=Ytex=Yplatex=Ybaseに二つのファイルplatex.fmt, platex.logが作成されます。前者をc:=Yptex=Ytexmf=Yweb2cにコピーします。(5) c:=Yptex=Ytexmf=Ytex=Yplatex=Ybase に作成された platex.fmt, platex.log を削除します。144

### Page 151

9.3 hash sizeメモリ不足もいろいろあります。! TeX capacity exceeded, sorry [hash size=10000].への対処法です。こちらは簡単で，texmf.cnf を書き換えるだけです。エディタで texmf.cnf を開き ‘hash’ で検索をかけるとhash_extra = 0という行が見つかります。この右辺値を，たとえば 2000 などとしてやればOKです。フォーマットファイルを作り変える必要はありません。9.4 save size! TeX capacity exceeded, sorry [save size=4000].への対処法です。これもtexmf.cnf を書き換えるだけです。texmf.cnf 中の一行save_size = 4000 % for saving values outside current groupの数値を例えば，8000 に増やします。フォーマットファイルの作り直しは不要です。9.5 number of strings! TeX capacity exceeded, sorry [number of strings=10603].への対処法です。これもtexmf.cnf を書き換えるだけです。texmf.cnf 中の一行max_strings = 15000 % max number of stringsの数値を例えば，20000 に増やします。フォーマットファイルの作り直しは不要です。145

### Page 152

10 謝辞このマクロ集の作成については，Waverさんからいろいろと有用なご助言をいただきました。また，7.6節のマクロはすべて Waver さんから使用を認めていただいたものです。また，平行四辺形の記号については，トニイさんからここでの使用を認めていただきました。あわせて感謝の意を表します。146

### Page 153

索 引apnenum=, 100 Y=EMrestoreeqno, 135Y=apnlist, 117 Y=emRoman, 95Y=atag, 38 Y=emroman, 94Y=EMsaveeqno, 135Y=baaiwake, 37Y=EMvphantom, 139Y=beku, 12Y=enumLmargin, 105Y=bekusityuu, 13Y=enumSep, 104Y=bekutoru, 12Y=bekutoru*, 125 fleqnoff 環境, 133Y=bekutorukata, 13 fleqnon 環境, 133Y=bekutorusityuu, 13 Fmawarikomi 環境, 51betaenumerate 環境, 90 Y=Fsyndiv, 8Y=bsityuu, 139Y=gauss, 17Y=bunsuu, 1Y=getcurrentenum, 98caprm 環境, 123 Y=gyoube, 18Y=Cdotfill, 138 gyoukan=, 86Y=cdotfill, 137 Y=Gyouretu, 18Y=Cnum, 19 Y=gyouretu, 17Y=conj, 19Y=heikou, 21Y=DEG, 21 Y=heikousihenkei, 23Y=Deg, 21 Y=hutonamikasen, 141Y=degree, 21Y=item*, 93Y=Deruta, 25Y=item**, 93Y=dint, 25Y=itemtopmath, 41Y=dlim, 23Y=izyohou, 7Y=dpower, 11Y=dumyeq, 39jquotion 環境, 130jquote 環境, 130edaenumerate 環境, 83Y=edaitem, 83Y=kagenhou, 9Y=edasikiri, 88Y=kaizyou, 26edatopsep=, 111Y=kaku, 21Y=EMabs, 14Y=kaku*, 126Y=emabs, 15Y=kinzi, 1Y=EMcaption, 82kizamiti=, 98emcases 環境, 36Y=kmaru, 29Y=EMleqno, 135Y=knagamaru, 30Y=emovalbox, 133Y=ko, 22Y=EMparbox, 130Y=ko*, 22147

### Page 154

Y=kotae, 137 Y=retube, 18Y=Kumiawase, 27 retusuu=, 86Y=kumiawase, 26 Y=retuwa, 23Y=kynagamaru, 31Y=sankaku, 21Y=kyokukeisiki, 20Y=sankaku*, 126Y=kyouyaku, 19Y=secarrow, 24Y=marudashref, 38 Y=setcurrentenum, 98Y=marudashtag, 38 Y=sevarrow, 24Y=mathindent, 32, 33 Y=shikaku, 22Y=mathRM, 125 Y=souzi, 21mawarikomi 環境, 44, 53 Y=sqrt, 10mawarikomi* 環境, 44 Y=stasuki, 8Y=mawarikomikankaku, 55 Y=suuretu, 23Y=mawarikomiowari, 56 Y=syndiv, 7Y=mawarikomisep, 47 syokiti=, 98Y=mitS, 126 Y=syuugou, 26Y=nagamaru, 30 Y=tagform, 33Y=namikasen, 141 Y=Tasuki, 9Y=narrowenumsep, 105 Y=tasuki, 8Y=narrowsep, 117 Y=tasukikata, 9Y=necarrow, 24 Y=tbEMcaption, 82Y=neqq, 1 Y=Teisei, 5Y=nevarrow, 24 Y=teisei, 3Y=nheikou, 21 Y=teisekibun, 25nidan 環境, 56 Tmawarikomi 環境, 51Y=tretuwa, 23Y=Ofil, 95Y=tsqrt, 11Y=owari, 136Y=wakudori, 74Y=pgyouretu, 19Y=polar, 20 Y=Yakubun, 2postedasep=, 110 Y=yakubun, 1Y=postitem, 93 Y=ynagamaru, 31preedasep=, 108 yokoenumerate 環境, 91Y=preEqlabel, 32Y=zettaiti, 14Y=preitem, 93Y=zuhaiti, 72Y=pxpercent, 3Y=zyohou, 6Y=refallenum, 122Y=Zyunretu, 27Y=refcurrentenum, 121Y=zyunretu, 26Y=resetcounter, 34円弧, 22Y=resettagform, 33Y=Retube, 18 凹凸, 24148

### Page 155

角（∠）, 21角度の記号, 21弧, 22三角形, 213乗根, 10シグマ, 23斜体と立体, 123数式のインデント, 33数式番号, 32数式番号の書式, 33数式番号のリーダー罫, 32数列記号, 23数列の和, 23絶対値記号, 14増減と凹凸, 24増減表, 24相似, 21度の記号, 21二重根号, 11平行, 21平行四辺形, 22約分, 1, 2, 5立体と斜体, 123149

## 図形描画.pdf

### Page 1

picture 環境支援マクロ集emathP.styver.0.66emathPb.styver.0.01emathPg.styver.0.00emathPh.styver.2.45emathPk.styver.0.94emathPxy.styver.0.31emathT.styver.0.42使用例tDB2005/11/02概 要中学・高校で数学のプリントにつける図の作成に必要な記号，コマンド，環境を集めたマクロ集です．このマクロ集のマクロについてのご質問，バグ報告，修正・追加の提案等はhttp://emath.s40.xrea.com/の掲示板へどうぞ。

### Page 2

目 次0 emathパッケージにおけるグラフィックス 11 zahyou環境 31.1 なぜzahyou環境か . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 31.2 zahyou環境 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 32 直線図形 42.1 折れ線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 42.2 点線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52.2.1 Y=emDottedline . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52.2.2 <G=..>オプション . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 52.2.3 <C=..>オプション . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62.2.4 応用例 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62.3 破線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62.3.1 Y=Dashline . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 62.3.2 Y=hasen . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 72.3.3 Y=Hasen . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 82.3.4 Y=Hasen* . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 92.4 鎖線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 102.5 複数の折れ線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 102.6 矢線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 112.6.1 Y=yasen . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 112.6.2 Y=ArrowLine . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 132.6.3 始点・終点位置の微調整 . . . . . . . . . . . . . . . . . . . . . . . . . . . . 142.6.4 鏃の形状. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 152.6.5 矢印の位置 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 172.6.6 矢線を点線・破線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 172.6.7 複数の矢線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 182.7 多角形 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 182.8 正多角形，極座標→直交座標. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 192.9 角の丸い多角形 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 202.10 分点 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 202.11 格子 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 212.12 さいころ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 223 文字列 243.1 文字列 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 243.1.1 Y=Put . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 243.1.2 文字位置の調整 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 243.1.3 文字列位置の簡易指定 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 263.1.4 文字列の回転 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 273.1.5 文字列から基準点への矢線 . . . . . . . . . . . . . . . . . . . . . . . . . . . 29i

### Page 3

3.2 複数の点の定義とラベル付け. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 323.2.1 Y=tenretu . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 323.2.2 Y=tenretu* . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 333.2.3 Y=oresen . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 343.2.4 Y=rtenretu . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 353.2.5 座標に計算式を記述 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 363.3 線分に文字列 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 363.3.1 線分の長さ表記 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 363.3.2 Y=HenKo : 文字列の配置調整 . . . . . . . . . . . . . . . . . . . . . . . . . . 383.3.3 弧に矢印. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 403.3.4 Y=HenKoの中点，中心 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 413.3.5 Y=HenKoの形状いろいろ . . . . . . . . . . . . . . . . . . . . . . . . . . . . 423.3.6 辺にY=brace . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 463.3.7 等辺記号. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 493.3.8 平行記号. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 513.4 角の内部に記号 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 523.4.1 Y=Kakukigou . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 523.4.2 直角記号. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 593.4.3 一般角 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 623.5 数式にpicture環境を併置 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 653.5.1 sikipicture環境 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 653.5.2 Y=sikiBi, Y=sikiTi . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 663.5.3 Y=sikixposi, Y=sikiyhposi, Y=sikiydposi . . . . . . . . . . . . . . . . . . 673.5.4 Y=sikixlposi, Y=sikixrposi . . . . . . . . . . . . . . . . . . . . . . . . . . 683.5.5 使用例 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 693.5.6 bunpicture環境 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 724 円・楕円 744.1 円 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 744.1.1 円 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 744.1.2 円の破線描画 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 744.1.3 円弧 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 754.1.4 矢印付きの円弧(1) 偏角指定. . . . . . . . . . . . . . . . . . . . . . . . . . 774.1.5 矢印付きの円弧(2) 端点指定. . . . . . . . . . . . . . . . . . . . . . . . . . 784.1.6 等弧記号. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 794.1.7 扇形 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 804.1.8 弓形 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 804.2 楕円 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 814.2.1 楕円 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 814.2.2 楕円弧 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 824.2.3 破線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 824.2.4 矢印 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 834.2.5 回転記号. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 83ii

### Page 4

5 円・直線の交点 875.1 2直線の交点 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 875.1.1 2直線の交点(1) Y=LandL . . . . . . . . . . . . . . . . . . . . . . . . . . . . 875.1.2 2直線の交点(2) Y=Landl . . . . . . . . . . . . . . . . . . . . . . . . . . . . 885.1.3 2直線の交点(3) Y=landl . . . . . . . . . . . . . . . . . . . . . . . . . . . . 885.1.4 2直線の交点(4) Y=Landk . . . . . . . . . . . . . . . . . . . . . . . . . . . . 895.1.5 垂線の足. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 905.1.6 直線に関する対称点 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 915.2 円と直線の交点 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 945.2.1 円と直線の交点(1) Y=CandL . . . . . . . . . . . . . . . . . . . . . . . . . . 945.2.2 円と直線の交点(2) Y=Candl . . . . . . . . . . . . . . . . . . . . . . . . . . 945.2.3 円と直線の交点(3) Y=Candk . . . . . . . . . . . . . . . . . . . . . . . . . . 955.3 円と円の交点 Y=CandC . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 966 楕円と直線の交点 976.1 Y=EandL. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 976.2 Y=Eandl. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 976.3 Y=Eandk. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 986.4 楕円の接線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 986.4.1 Y=DaennoSessen . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 986.4.2 Y=DaenniSessen . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 996.4.3 Y=Earg . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1007 塗りつぶし(1) 1027.1 多角形内部の塗りつぶし . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1027.2 円内部の塗りつぶし . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1027.3 扇形の塗りつぶし . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1037.4 弓形の塗りつぶし . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1047.5 楕円の塗りつぶし . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1047.6 弓形（楕円弧）の塗りつぶし. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1057.7 カラー指定 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1057.7.1 Y=colorによる塗り色指定 . . . . . . . . . . . . . . . . . . . . . . . . . . . 1057.7.2 Y=En*の[nuriiro=..]オプション . . . . . . . . . . . . . . . . . . . . . . . 1067.7.3 円周の色は？ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1077.7.4 PostScriptでは . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1078 斜線塗り(1) 1088.1 多角形 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1088.2 円 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1088.3 扇形など . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1098.4 格子セルのぬりつぶし . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1108.5 境界線と斜線の間を空ける . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1128.6 2円の共通部分に斜線. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1128.7 破線による斜線塗り . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 115iii

### Page 5

8.8 斜線塗りの制約条項 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1169 三角形の五心 1179.1 重心 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1179.2 外心 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1179.3 内心 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1199.4 傍心 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1219.5 垂心 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 1239.6 角の二等分線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12410 三角形の決定 12710.1 三辺 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12710.2 二角夾辺 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12710.3 二辺夾角 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 12811 正弦定理・余弦定理 13011.1 正弦定理 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13011.2 余弦定理 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13112 ベクトル 13312.1 ベクトル演算 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13312.2 平行四辺形 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13312.3 回転 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13413 座標平面 13613.1 連立不等式の解を図表示 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13613.2 zahyou 環境 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13813.3 座標軸描画のタイミング . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13913.4 zahyou環境のオプション . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 13913.4.1 Y=unitlengthの指定 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14013.4.2 座標軸の名称変更 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14113.4.3 軸記号の配置オプション . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14213.4.4 矢印のサイズ変更 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14313.4.5 軸の線種変更 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14413.4.6 描画領域の周辺に余白 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14413.4.7 縦横比の変更 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14613.5 zahyou環境の縦方向配置 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14713.5.1 デフォルトの確認 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14713.5.2 下揃え . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14813.5.3 上揃え . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 14913.5.4 中央揃え. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15013.6 zahyou環境の書式 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15213.7 目盛り . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15213.7.1 座標軸上に等間隔の目盛り . . . . . . . . . . . . . . . . . . . . . . . . . . . 152iv

### Page 6

13.7.2 グリッド線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15413.7.3 軸上に目盛り . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15613.8 座標軸への垂線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 15814 点・直線・円 16214.1 点の位置に黒丸 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16214.2 2点間の距離 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16314.3 直線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16414.3.1 ２点を通る直線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16414.3.2 1点と方向ベクトルによる直線 . . . . . . . . . . . . . . . . . . . . . . . . 16614.3.3 1点と方向角による直線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16714.3.4 線種の変更 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16714.3.5 直線 ax+by+c=0 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16814.3.6 直線 y =ax+b . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 16914.3.7 点P(x1, y1)と直線ax+by+c=0の距離 . . . . . . . . . . . . . . . . . . 16914.3.8 点P(x1, y1)と2点A,Bを通る直線の距離 . . . . . . . . . . . . . . . . . . 16914.4 円の接線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17014.4.1 円周上の点における接線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17014.4.2 円外の点からの接線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17114.4.3 二つの円の共通接線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17214.5 半直線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17315 関数のグラフ 17516 空間座標 17616.1 Zahyou 環境 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17616.2 角錐 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17816.3 角柱 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 17916.4 直線と平面の交点 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18016.5 垂線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18216.6 空間曲線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18317 作表 18617.1 列幅指定 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18617.2 表の罫線を太く . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18717.2.1 Y=arrayrulewidth . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18717.2.2 外枠のみを太く . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18717.2.3 二重罫線との併用 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18817.2.4 太罫線の太さ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18817.2.5 特定のブロック枠を太く . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18817.3 罫線を点線で . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 18917.4 カラムに斜線 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 189v

### Page 7

18 囲み 19018.1 rectbox環境 . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 19019 その他 19119.1 線の太さ . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . 191vi

### Page 8

0 emathパッケージにおけるグラフィックスemathパッケージでは，図を描画するのに二つの手法を用意しています。(1) tpic specialsを用いる方法emathPh.sty, emathPk.sty, emathP.sty では，tpic specialsを用いて，図を描画します。(2) Post Scriptを用いる方法emathPs.sty では，Post Scriptを用いて，図を描画します。いずれにせよ，Y=specialコマンドを用いてグラフィックスを扱うのは，OS・dvi-ware依存となります。従って，emathP?.sty等のロードに先立ってgraphicx.styを，グラフィックスドライバを指定してロードしておく必要があります。例えばY=usepackage[dvips]{graphicx}Y=usepackage[dviout]{graphicx}Y=usepackage[dvipdfm]{graphicx}Y=usepackage[dvipdfmx]{graphicx}カラーを用いる場合は，color.styを，graphicx.styと同一のドライバを指定してロードしておく必要があります。Y=usepackage[dvips]{graphicx,color}Y=usepackage[dviout]{graphicx,color}Y=usepackage[dvipdfm]{graphicx,color}Y=usepackage[dvipdfmx]{graphicx,color}注 1. TEX環境がデフォルトのグラフィックスドライバを指定している場合は，単にY=usepackage{graphicx,color}とすれば，デフォルトのドライバが用いられます。注 2. dvipdfmxは，EPS において，座標が負の部分を無条件にカットする，などの振る舞いがありますので，emathではお勧めいたしかねます。emathパッケージでは，dvipsを標準としています。またdvipdfmxは図形の回転処理が独特ですから，どうしてもdvipdfmxを使用したい場合はY=usepackage[dvipdfmx]{graphicx,color}としておく必要があります。こうしても，EPS ファイルの座標が負の部分をカットすることは回避できません。なお，dvipdfmxには，カラーの tpic が扱えないバージョンがあります。1

### Page 9

注 3. dvipdfmは，EPS において，座標が負の部分をカットする点は dvipdfmxと同様です。注 4. dvioutを用いたとき，白く塗りつぶしたはずが黒くなる，という場合の対策です。(a) dvioutの画面で黒塗りとなる場合は，グラフィックスドライバが不適切です。Y=usepackage[dvips]{graphicx,color}と，グラフィックスドライバを明示するのがよいでしょう（ emathなどの読み込みに先立って）。【補足】 dviout のメニューバーからOptionSetup ParametersGraphicとたどって，Ghostscript の項がOn(default)になっていることも必要です。(b) dvioutの画面では正常だが，印刷すると黒塗りになるという場合は，dviout の設定の問題です。具体的な手順です：dviout のメニューバーからOptionSetup ParametersGraphicとたどり，その下方color specialsの左にチェックが入っていることを確認し，右のドロップダウンリストでauto mode(rep)replace(def)replace(bak)のいずれかを選び，その右の Save ボタンさらに下の OK ボタンを押します。2

### Page 10

1 zahyou環境1.1 zahyouなぜ 環境かLATEXで座標平面を描画するには，picture環境があります。ただし，負の数を扱うには，picture環境の引数を計算しなければなりません。例えば，−3<x<3,−2<y <2の範囲を描画するには(cid:2) (cid:3)picture環境 (cid:3)Y=unitlength=8mmY=begin{picture}(6,4)(-3,-2)% (cid:2)→Y=put(-3,0){=Yvector(1,0){6}}%Y=put(0,-2){=Yvector(0,1){4}}%Y=end{picture}%(cid:4) (cid:5)引数の与え方が面倒であることと，座標軸の描画もまとめて面倒を見てしまおう，ということでzahyou環境です。1.2 zahyou環境y(cid:2) (cid:3)zahyou環境Y=unitlength=8mm→ O xY=begin{zahyou}(-3,3)(-2,2)%Y=end{zahyou}%(cid:4) (cid:5)picture環境とは，引数の与え方が異なり，(xmin, xmax)(ymin, ymax)と，x, yの区間を与えます。なお，この環境内では，次の変数が定義されています。Y=xmin xの区間の最小値Y=xmax xの区間の最大値Y=ymin yの区間の最小値Y=ymax yの区間の最大値Y=O 原点Y=XMAX x軸の右端の点Y=XMIN x軸の左端の点Y=YMAX y軸の上端の点Y=YMIN y軸の下端の点Y=RT 描画領域右上のコーナーY=RB 描画領域右下のコーナーY=LT 描画領域左上のコーナー3

### Page 11

Y=LB 描画領域左下のコーナー座標軸を描画する必要がない場合に対してはzahyou*環境を用意してあります。(cid:2) (cid:3)zahyou*環境Y=unitlength=8mmY=begin{zahyou*}(-3,3)(-2,2)%→Y=Drawline{=YLB=YRT=YRB=YLT=YLB}Y=En=YO{2}%Y=end{zahyou*}%(cid:4) (cid:5)上記リスト中，Y=Drawlineは，指定点を折れ線で結びます。Y=En=YO{2}は点Y=O（原点）を中心とする半径2の円を描画しています。詳細は後述します。zahyou環境には，細かい微調整をするためのオプションがありますが，これについては後述します。2直線図形2.1折れ線折れ線を描画するのに，epic.sty で定義されている Y=drawline を用いることができます．(cid:2) (cid:3)Y=drawlineY=begin{picture}(3,3)%−→Y=drawline(0,0)(3,0)(2,3)%Y=end{picture}(cid:4) (cid:5)このスタイルファイルでは，点を Y=def=YA{(3,0)}などと変数で表すことにしています．その場合は，Y=drawline は使えません．代わりに Y=Drawline を用意しました．このコマンドは内部でY=drawline を呼び出していますから，epic.sty を必要とします．(cid:2) (cid:3)Y=DrawlineY=begin{picture}(3,3)%Y=def=YO{(0,0)}%Y=def=YA{(3,0)}% −→Y=def=YB{(2,3)}%Y=Drawline{=YO=YA=YB}%Y=end{picture}(cid:4) (cid:5)Y=Drawline の書式は4

### Page 12

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Drawline#1#1 : 点列2.2点線点線を描画するにはY=emdottedlineを用います。y(cid:2) (cid:3)Y=emdottedlineY=begin{zahyou}[ul=5mm](-3,3)(-3,3)Y=emdottedline(-2,2)(2,-1) → O xY=end{zahyou}(cid:4) (cid:5)2.2.1 Y=emDottedlineemathでは，点列を一つにまとめて扱いますので，Y=emDottedlineを定義しました。ただし，このコマンドはmultido.styで定義されているY=multido を用います。Y=emDottedlineコマンドを使用するには，プリアンブルでY=usepackage{multido}を宣言しておく必要があります。y(cid:2) (cid:3)Y=emDottedlineAY=begin{zahyou}[ul=5mm](-3,3)(-3,3)Y=tenretu{A(-2,2)w;B(2,-1)e} → O xY=emDottedline{=YA=YB} BY=end{zahyou}(cid:4) (cid:5)点と点の間隔は，デフォルトは3ptとしてありますが，これを変更するには<G=..>オプションを用います。2.2.2 <G=..>オプションさて，その<G=..>オプションを用いて，もう少し点を稠密にして見ましょう。y(cid:2) (cid:3)<G=..>オプションAY=begin{zahyou}[ul=5mm](-3,3)(-3,3)Y=tenretu{A(-2,2)w;B(2,-1)e} → O xY=emDottedline<G=2pt>{=YA=YB} BY=end{zahyou}(cid:4) (cid:5)5

### Page 13

2.2.3 <C=..>オプション配置する点の形状を変更するには，<C=..>オプションを用います。y(cid:2) (cid:3)<C=..>オプション ∗A ∗ ∗∗∗Y=begin{zahyou}[ul=5mm](-3,3)(-3,3) ∗ ∗∗∗∗Y=tenretu{A(-2,2)w;B(2,-1)e} → O ∗ ∗ ∗ x∗∗Y=emDottedline<C=$*$,G=5pt>{=YA=YB} BY=end{zahyou}(cid:4) (cid:5)小さい円（黒塗りの）にしますか。(cid:2) (cid:3)小さい円を配置 yAY=begin{zahyou}[ul=5mm](-3,3)(-3,3)Y=ukansan{1pt}=Ytyokkei→ O xY=tenretu{A(-2,2)w;B(2,-1)e}BY=emDottedline<C==Ycircle*=Ytyokkei>{=YA=YB}Y=end{zahyou}(cid:4) (cid:5)ここで登場しているコマンドY=ukansan#1#2は，#1に与えられた，単位付の長さを，Y=unitlengthを単位とする無名数に換算した結果を#2の制御綴に与えるものです。2.2.4 応用例奥村先生の掲示板 Q&A に「行列の点々」という投稿がありました。emathを用いる一案です。⎡ ⎤a1 b1+d1 c1⎢ ⎥⎢ a2 b2+d2 c2 ⎥⎢ ⎥⎢ a3 b3+d3 c3 ⎥⎢ ⎥⎢ ⎥⎢ ⎥⎢ ⎥⎢ ⎥⎣ ⎦an−1 bn−1+dn−1 cn−1an bn+dn cn2.3破線2.3.1 Y=Dashline破線を引くコマンドは Y=Dashline です．6

### Page 14

(cid:2) (cid:3)Y=DashlineY=begin{picture}(3,3)%Y=def=YO{(0,0)}%Y=def=YA{(3,0)}% −→Y=def=YB{(2,3)}%Y=Dashline{0.2}{=YO=YA=YB}%Y=end{picture}(cid:4) (cid:5)このコマンドは内部で eepic.sty の Y=dashline を呼び出しています．書式もほぼ同様で(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Dashline[#1]#2#3#1 : stretch#2 : dashlength#3 : 点列です．[dashdotgap] はサポートしていません．[stretch] で代用してください．(cid:2) (cid:3)Y=Dashline[stretch]Y=begin{picture}(3,3)%Y=def=YO{(0,0)}%Y=def=YA{(3,0)}% −→Y=def=YB{(2,3)}%Y=Dashline[25]{0.2}{=YO=YA=YB}%Y=end{picture}(cid:4) (cid:5)2.3.2 Y=hasenY=dashlineの第1引数は Y=unitlengthの値によって変えなければなりません。(cid:2) (cid:3)Y=DashlineとY=unitlengthY=unitlength=10mmY=begin{picture}(3,3)Y=dashline{.2}(0,0)(3,3)Y=end{picture}=YY=→Y=unitlength=1mmY=def=YB{(30,30)}Y=begin{picture}(30,30)Y=dashline{2}(0,0)(30,30)Y=end{picture}(cid:4) (cid:5)7

### Page 15

これは面倒ですから，Y=hasenを作りました。(cid:2) (cid:3)Y=hasenY=unitlength=10mmY=begin{picture}(3,3)Y=hasen(0,0)(3,3)Y=end{picture}=YY= →Y=unitlength=1mmY=begin{picture}(30,30)Y=hasen(0,0)(30,30)Y=end{picture}(cid:4) (cid:5)また，Y=dashlineにおける第1引数は不要とし，Y=hasenの形状はオプション引数で指定する方式を取りました。Y=hasenの書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=hasen[#1](x1,y1)(x2,y2).....(xN,yN)#1 : L=（破線の実線部分の長さ） デフォルト値=1mm: G=（破線のギャップの長さ） デフォルト値=0.9mm(x1,y1)...(xN,yN) : 折れ線の頂点列オプション引数を与えて破線の形状を変更する例です。(cid:2) (cid:3)Y=hasenの形状変更Y=unitlength=10mmY=begin{picture}(3,3) →Y=hasen[L=2mm,G=2mm](0,0)(3,3)Y=end{picture}(cid:4) (cid:5)ただし，ギャップの長さは必ずしも指定した長さにはなりません。というのは，破線の両端における実線部分が指定した長さとなるようにギャップを調整しているからです。細かいことですが，Y=drawlineで描画した直線とY=dashlineで描画した破線の位置がずれることがあります。これを修正するのもY=hasenを開発した目的の一つです。2.3.3 Y=HasenY=drawline, Y=dashline に対して，Y=Drawline, Y=Dashline があるように，Y=hasen に対してもY=Hasen を定義しています。その書式は8

### Page 16

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Hasen[#1]#2#1 : L=（破線の実線部分の長さ） デフォルト値=1mm: G=（破線のギャップの長さ） デフォルト値=0.9mm#2 : 破線で結ぶ点列(cid:2) (cid:3)Y=HasenyY=begin{zahyou}[ul=10mm](-.5,2.5)(-.5,1.5) A BY=tenretu{A(0,1)w;B(2,1)e;C(2,0)s} →Y=Hasen{=YA=YB=YC}O C xY=end{zahyou}(cid:4) (cid:5)複数の点列を定義するY=tenretuなど，まだ説明していないコマンドが登場してしまいましたが，ここでは折れ線を破線で引く例としてご覧ください。2.3.4 Y=Hasen*2点を破線で結ぶコマンドY=hasen, Y=Hasenは，両端から実線部分が始まりますが，これを両端からは空白部分が始まるようにしたものが*つきコマンドです。下の例では，実線ABと破線BCの境界がBではなくなってしまいます。yA(cid:2) (cid:3)Y=HasenY=begin{zahyou}[ul=10mm](-.5,1.5)(-2.5,2.5) BY=tenretu{A(1,2)e;B(1,1)e;C(1,-1)e;D(1,-2)e}Y=kuromaru{=YA;=YB;=YC;=YD} → O xY=Drawlines{=YA=YB;=YC=YD}Y=Hasen{=YB=YC} CY=end{zahyou}(cid:4) (cid:5) DY=Hasen*と比較してみてください。yA(cid:2) (cid:3)Y=Hasen*Y=begin{zahyou}[ul=10mm](-.5,1.5)(-2.5,2.5) BY=tenretu{A(1,2)e;B(1,1)e;C(1,-1)e;D(1,-2)e}Y=kuromaru{=YA;=YB;=YC;=YD} → O xY=Drawlines{=YA=YB;=YC=YD}Y=Hasen*{=YB=YC} CY=end{zahyou}(cid:4) (cid:5) D9

### Page 17

2.4鎖線鎖線をひくコマンドは Y=Chainlineです。(cid:2) (cid:3)Y=ChainlineY=begin{picture}(3,3)%Y=def=YA{(0,0)}%Y=def=YB{(3,0)}%Y=put(0,3){=YChainline{=YA=YB}}% −→Y=put(0,2){=YChainline[.2][.1]{=YA=YB}}%Y=put(0,1){=YChainline[.5][.1]{=YA=YB}}%Y=put(0,0){=YChainline[.5][.4]{=YA=YB}}%Y=end{picture}(cid:4) (cid:5)その書式は(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Chainline[#1][#2]#3#1 : 一つの線分の長さ#2 : 線分と線分の間の長さ#3 : 点列2.5複数の折れ線複数の折れ線を描画するコマンド Y=Drawlines もあります。複数の折れ線を‘;’で区切ります。(cid:2) (cid:3)Y=DrawlinesY=begin{picture}(3,3)%Y=def=YO{(0,0)}%Y=def=YA{(2,0)}%−→Y=def=YB{(3,3)}%Y=def=YC{(1,3)}%Y=Drawlines{=YO=YA=YB=YC=YO=YB;=YA=YC}%Y=end{picture}(cid:4) (cid:5)折れ線の線種を変更するには，<...> オプションを用います。10

### Page 18

(cid:2) (cid:3)線種の変更Y=begin{picture}(3,3)%Y=def=YO{(0,0)}%Y=def=YA{(2,0)}%Y=def=YB{(3,3)}%Y=def=YC{(1,3)}% −→Y=Drawline{=YO=YA=YB=YC=YO}%Y=Drawlines<%sensyu==Ydashline[40]{.1}>{%Y=O=YB;=YA=YC}%Y=end{picture}(cid:4) (cid:5)Y=Drawlinesの書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Drawlines<#1>#2<#1> : <sensyu==Ydashlines[40]{.1}>などによる線種のローカルな変更#2 : 複数の点列を‘;’で区切る2.6矢線矢線を引くコマンドは2種類用意してあります。Y=yasenは，成分を指定します。もうひとつのY=ArrowLineは，始点と終点を指定します。2.6.1 Y=yasenまずは成分を与えて矢線を描画するコマンド Y=yasen を使用する一例です：(cid:2) (cid:3)Y=yasenY=begin{zahyou*}[ul=10mm](0,4)(0,3)Y=put(0,0){=Ykousi43}%→Y=put(1,0){=Yyasen(-1,3)}%Y=put(3,0){=Yyasen(1,3)}%Y=end{zahyou*}(cid:4) (cid:5)このコマンドは，矢線の傍に文字列を配置するオプションをもっています。11

### Page 19

(cid:2) (cid:3)<..>オプションY=begin{zahyou*}[ul=10mm](0,4)(0,3)Y=put(0,0){=Ykousi43}%Y=put(1,0){% (cid:2)a (cid:2)b→Y=yasen<[ne]{=Ybeku a}>(-1,3)}%Y=put(3,0){%Y=yasen<[nw]{=Ybeku b}>(1,3)}%Y=end{zahyou*}(cid:4) (cid:5)すなわち<...>オプションに，文字列を与えます。その際，Y=Putの配置オプションを附加することができます。なお，文字列を配置する基準点は，矢線の中点です。これを動かすのが[..]オプションです。(cid:2) (cid:3)[..]オプションY=begin{zahyou*}[ul=10mm](0,4)(0,4) (cid:2)aY=put(0,0){=Ykousi43}% (cid:2)bY=put(1,0){%→Y=yasen[1]<[n]{=Ybeku a}>(-1,3)}%Y=put(3,0){%Y=yasen[.8]<[nw]{=Ybeku b}>(1,3)}%Y=end{zahyou*}(cid:4) (cid:5)[..]オプションのデフォルト値は0.5，すなわち中点です。これを[1]とすれば，終点，[0]とすれば，始点がそれぞれ文字列配置の基準点となります。Y=yasenの書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=yasen[#1]<#2>(#3,#4)Y=Yasen[#1]<#2>#3#1 : ラベルを置く位置（デフォルト=0.5, 中点）#2 : ラベル（位置指定を含めて）(#3,#4) : 成分（始点は Y=put (=YPut) で指定）成分を，まとめてひとつにして扱うものが Y=Yasen です。(cid:2) (cid:3)Y=YasenY=begin{zahyou*}[ul=10mm](0,4)(0,3)Y=def=Yavec{(1,3)}Y=put(0,0){=Ykousi43}% →Y=put(0,0){=YYasen=Yavec}%Y=put(3,0){=YYasen=Yavec}%Y=end{zahyou*}(cid:4) (cid:5)12

### Page 20

Y=Yasenに対しても，[...], <...> オプションがY=yasenと同様に使用できます。2.6.2 Y=ArrowLine矢線を引くコマンドが Y=ArrowLine です．(cid:2) (cid:3)Y=ArrowLineY=begin{picture}(2,2)Y=def=YA{(0,2)}%−→Y=def=YB{(2,0)}%Y=ArrowLine=YA=YB%Y=end{picture}(cid:4) (cid:5)矢線の傍に文字列を配置することも可能です。(cid:2) (cid:3)Y=ArrowLineの文字列配置オプションY=begin{zahyou*}[ul=10mm](0,4)(-1,4)Y=tenretu{A(0,0)s;B(3,0)s;C(4,3)n;D(1,3)n}D CY=Drawline{=YB=YC=YD}{Y=thicklinesY=ArrowLine<putstr=[s]{=Yprotect=Ybeku (cid:2)d→b}>Y=A=YBY=ArrowLine<putstr=[nw]{=Yprotect=YbekuA (cid:2)b Bd}>Y=A=YD}%Y=end{zahyou*}(cid:4) (cid:5)すなわち，<...>オプションとして，putstrの右辺値に，文字列を配置オプションとともに記述します。配置基準点（デフォルトは中点）を変更するには，キーワードputposを用います。(cid:2) (cid:3)Y=ArrowLineの文字列配置基準点の変更Y=begin{zahyou*}[ul=10mm](0,4)(-1,4)D CY=tenretu{A(0,0)s;B(3,0)s;C(4,3)n;D(1,3)n}Y=Drawline{=YB=YC=YD=YA}→{Y=thicklinesY=ArrowLine<putpos=0.9,putstr=[n]{=Ybeku b}>(cid:2)bA BY=A=YB}Y=end{zahyou*}(cid:4) (cid:5)Y=ArrowLineの書式です。13

### Page 21

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=ArrowLine<#1>[#2]#3#4#1 : key=valsensyu=putstr= （矢線の傍に置く配置オプション+文字列）putpos= （文字列の配置基準位置：デフォルトは0.5, 中点）#2 : 矢印を置く位置（デフォルト = 1 すなわち終点）ただし #2=b のときは，両端に矢印#3 : 始点#4 : 終点2.6.3 始点・終点位置の微調整Y=ArrowLineで引かれる矢線の始点・終点を少しずらしたいときがあります。例えば(cid:2) (cid:3)Y=ArrowLineY=begin{zahyou*}[ul=10mm](-.5,2.5)(-.5,1.5)BY=tenretu{A(0,0)w;B(2,1)e}→Y=Kuromaru=YBAY=ArrowLine=YA=YBY=end{zahyou*}(cid:4) (cid:5)のような場合，矢印が終点の黒丸にめり込んでいます。矢印の終点を左下に少しずらしたいときなどのために<Henvi=..> 始点に対する修正ベクトル<Henvii=...> 終点に対する修正ベクトルオプションを新設しました。右辺値はベクトルで，成分は単位を伴った長さです。右辺値には‘,’が入りますから，右辺値全体を{...}でくくる必要があります。(cid:2) (cid:3)<Henvii=..>オプションY=begin{zahyou*}[ul=10mm](-.5,2.5)(-.5,1.5)BY=tenretu{A(0,0)w;B(2,1)e}→Y=Kuromaru=YBAY=ArrowLine<Henvii={(-.8pt,-.4pt)}>=YA=YBY=end{zahyou*}(cid:4) (cid:5)なお<henvi=..> 始点に対する修正ベクトル<henvii=...> 終点に対する修正ベクトルも同機能ですが，右辺値の成分はY=unitlengthを単位とする無名数で与えます。14

### Page 22

2.6.4 鏃の形状鏃のサイズを変更することもできます．例えばY=changeArrowHeadSize{1.5}とすれば，鏃の大きさは1.5倍になります。(cid:2) (cid:3)Y=changeArrowHeadSizeY=begin{picture}(2,2)Y=def=YA{(0,2)}Y=def=YB{(2,0)} −→{Y=changeArrowHeadSize{1.5}Y=ArrowLine=YA=YB}Y=end{picture}(cid:4) (cid:5)鏃の開き具合も調整できます．デフォルトはY=def=YArrowHeadAngle{18}%となっています．これを 30 とすると，鏃は正三角形になります．(cid:2) (cid:3)Y=ArrowHeadAngle{Y=changeArrowHeadSize{3}%Y=begin{picture}(2,2)Y=def=YA{(0,2)}%−→Y=def=YB{(2,0)}%Y=changeArrowHeadSize[30]{1.5}%Y=ArrowLine=YA=YB%Y=end{picture}}(cid:4) (cid:5)サイズ・開き具合の両方を同時に変更するときはY=changeArrowHeadSize[30]{3}とY=changeArrowHeadSizeのオプションで開き角を指定することもできます。(cid:2) (cid:3)Y=ArrowHeadAngle{Y=changeArrowHeadSize[30]{3}%Y=begin{picture}(2,2)Y=def=YA{(0,2)}% −→Y=def=YB{(2,0)}%Y=ArrowLine=YA=YB%Y=end{picture}}(cid:4) (cid:5)Y=ArrowLineで引かれる矢線において，鏃は二等辺三角形を塗りつぶしていますが，その底辺に窪みをつけることも可能です。窪みの深さの「二等辺三角形の高さを1としての比率」をY=ArrowHeadPitで指定します。次の図では，座標軸が2個描画されますが，上が従来の形状，下が窪みをつけた形状です。15

### Page 23

y(cid:2) Y=ArrowHeadPit (cid:3) O xY=begin{zahyou}[ul=8mm](-3,3)(-3,3)Y=ArrowLine=YLB=YRTY=end{zahyou}→ yY=def=YArrowHeadPit{0.25}Y=begin{zahyou}[ul=8mm](-3,3)(-3,3)Y=ArrowLine=YLB=YRTY=end{zahyou}(cid:4) (cid:5)O xY=changeArrowHeadSizeに<...>オプションを用いて，窪みを指定することもできます。Y=def=YArrowHeadPit{.25}とY=changeArrowHeadSize<.25>{1}は同値です。前者の方が簡潔ですが，矢印の長さ・開き角を変更する際には後者の方が便利でしょうか。そんな馬鹿な，という極端な例です：(cid:2) (cid:3) ABY=changeArrowSizeによる指定 yY=changeArrowHeadSize[30]<0.3333>{4}Y=bekutorukata{fill}Y=bekutoru{AB} →O xY=begin{zahyou}[ul=8mm](-3,3)(-3,3)Y=ArrowLine=YLB=YRTY=end{zahyou}(cid:4) (cid:5)なお，これら矢線では鏃が塗りつぶされますが，これを枠線のみ描画させるにはY=renewcommand=YArrowHeadType{l}とします。デフォルトは Y=newcommand=YArrowHeadType{f} としてあります．16

### Page 24

(cid:2) (cid:3)塗りつぶさない鏃{Y=def=YArrowHeadType{l}%Y=changeArrowHeadSize{3}%Y=begin{picture}(2,2)−→Y=def=YA{(0,1)}%Y=def=YB{(2,1)}%Y=ArrowLine=YA=YB%Y=end{picture}}(cid:4) (cid:5)2.6.5 矢印の位置矢印を途中に付けるためには，[...] オプションで，矢印を置く位置を指定します．(cid:2) (cid:3)Y=ArrowLine[0.5]{Y=unitlength8mm=YsmallY=begin{picture}(4,3)%Y=def=YO{(0,0)}%Y=def=YA{(4,3)}%Y=def=YB{(4,0)}%Y=ArrowLine[.5]=YO=YA%Y=ArrowLine[.5]=YA=YB%Y=ArrowLine[.5]=YB=YO%Y=end{picture}}%(cid:4) (cid:5)−→また，矢印を両向きにつけたいときは[b]オプションをつけます。(cid:2) (cid:3)両向き矢印Y=unitlength10mm=YrelaxY=begin{picture}(2,1)Y=def=YA{(0,.5)} →Y=def=YB{(2,.5)}Y=ArrowLine[b]=YA=YBY=end{picture}(cid:4) (cid:5)2.6.6 矢線を点線・破線矢線の線種を変更するには Y=ArrowLine に<sensyu=...> オプションを付与します。17

### Page 25

(cid:2) (cid:3)矢線を点線でY=unitlength10mm=YrelaxY=begin{picture}(2,1)Y=def=YA{(0,.5)}Y=def=YB{(2,.5)} →Y=ArrowLine%<sensyu==Yprotect=Yemdottedline>%Y=A=YBY=end{picture}(cid:4) (cid:5)(cid:2) (cid:3)矢線を破線でY=unitlength10mm=YrelaxY=begin{picture}(2,1)Y=def=YA{(0,.5)}Y=def=YB{(2,.5)} →Y=ArrowLine%<sensyu==Yprotect=Yhasen>%Y=A=YBY=end{picture}(cid:4) (cid:5)2.6.7 複数の矢線複数の矢線を引くコマンドが Y=ArrowLines です。始点・終点を‘;’で区切って並べます。(cid:2) (cid:3)Y=ArrowLinesY=unitlength=10mmY=begin{picture}(4,2)Y=def=YA{(0,0)}Y=def=YB{(3,0)}→Y=def=YC{(4,2)}Y=def=YD{(1,2)}Y=ArrowLines[.5]{%Y=A=YB;=YB=YC;=YC=YD;=YD=YA}Y=end{picture}(cid:4) (cid:5)2.7多角形多角形を描画するコマンドがY=Takakkeiです。18

### Page 26

(cid:2) (cid:3)Y=多角形Y=begin{picture}(3,3)%Y=def=YO{(0,0)}%Y=def=YA{(3,0)}% −→Y=def=YB{(2,3)}%Y=Takakkei{=YO=YA=YB}%Y=end{picture}(cid:4) (cid:5)Y=Takakkeiの始点Oと終点Bを結ぶ線分が強制的に付加されます。2.8正多角形，極座標→直交座標円周上に点をとるときは，極座標形式の方が便利です．これを直交座標に変換するコマンドY=kyokuTyoku です．使用例として，正六角形を描画してみました．(cid:2) (cid:3)Y=kyokuTyokuY=begin{picture}(3,3)(-1.5,-1.5)%Y=kyokuTyoku(1,90)=YA%Y=kyokuTyoku(1,150)=YB%Y=kyokuTyoku(1,210)=YC%Y=kyokuTyoku(1,270)=YD%Y=kyokuTyoku(1,330)=YE%−→Y=kyokuTyoku(1,30)=YF%Y=def=YO{(0,0)}%Y=En=YO{1}%Y=thicklinesY=Drawline{=YA=YB=YC=YD=YE=YF=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)Y=kyokuTyoku(1,90)=YAで，極座標(1,90)を直交座標に変換した(0,1)がY=Aにセットされます．Y=kyokuTyokuの書式です．(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=kyokuTyoku(#1,#2)#3(#1,#2) : 極座標#3 : 変換した直交座標を代入するコントロールシーケンス(1) このスタイルファイルでは，原則として，角の単位は六十分法で表します．19

### Page 27

(2) Y=kyokuTyokuは点を一つずつ定義しますが，複数の点列を定義するコマンドY=rtenretu, =Yrtenretu*もあります。(3) 正多角形を描画するためのemPoly.styもあります。2.9角の丸い多角形多角形を描画するコマンドY=TakakkeiのバリエーションY=ovalTakakkeiコマンドは多角形のコーナーを丸くするコマンドです。まずは，Y=Takakkeiの使用例からご覧ください。(cid:2) (cid:3)Y=TakakkeiCY=begin{zahyou*}%[ul=10mm,Ueyohaku=1em,DHidariyohaku=1em,%Sitayohaku=1em]%→(0,4)(0,4)Y=tenretu{A(1,0)s;B(4,1)e;%BC(2,4)n;D(0,3)w}Y=Takakkei{=YA=YB=YC=YD}AY=end{zahyou*}(cid:4) (cid:5)コーナーを切り取って，円弧で結びます。切り取る線分の長さをY=ovalTakakkeiの第1引数に与えます。単位を伴った数値を指定します。(cid:2) (cid:3)Y=ovalTakakkeiY=begin{zahyou*}%[ul=10mm,Ueyohaku=1em,Hidariyohaku=1em,%Sitayohaku=1em]%→(0,4)(0,4)Y=tenretu*{A(1,0)s;B(4,1)e;%C(2,4)n;D(0,3)w}Y=ovalTakakkei{5mm}{=YA=YB=YC=YD}Y=end{zahyou*}(cid:4) (cid:5)2.10分点線分を内分（外分）する点を求めるコマンド Y=Bunten です．(cid:4)ABC の辺BCの中点MとAを結ぶ線分を描画する例です．20

### Page 28

(cid:2) (cid:3)Y=BuntenY=begin{picture}(3,3)%Y=def=YA{(2,3)}%Y=def=YB{(0,0)}%Y=def=YC{(3,0)}%Y=Bunten=YB=YC{1}{1}=YM% −→Y=Drawline{=YA=YM}Y=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)Y=Bunten の書式は(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Bunten#1#2#3#4#5#1 : 端点1#2 : 端点2#3#4 : 内（外）分比#5 : 分点すなわち #1 と #2 を結ぶ線分を #3:#4 に分ける点の座標を #5 にセットします．特に1:1の内分点，すなわち中点を求めるコマンドY=Tyuutenも便利です。(cid:2) (cid:3)Y=BuntenY=begin{picture}(3,3)%Y=def=YA{(2,3)}%Y=def=YB{(0,0)}%Y=def=YC{(3,0)}%Y=Tyuuten=YB=YC=YM% −→Y=Drawline{=YA=YM}Y=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)2.11格子碁盤の目状の街路図などは良く登場します．格子を描画するコマンド Y=kousi です．21

### Page 29

(cid:2) (cid:3)Y=kousiY=unitlength5mmY=begin{picture}(6,4)% −→Y=kousi{6}{4}%Y=end{picture}%(cid:4) (cid:5)縦横のサイズを変更したいときは，(横サイズ,縦サイズ) オプションを指定します．サイズの単位は Y=unitlength です．(cid:2) (cid:3)Y=kousi(..,..)オプション{Y=unitlength8mm=YsmallY=begin{picture}(5,2.5)% −→Y=kousi(1,0.5){5}{5}%Y=end{picture}}%(cid:4) (cid:5)Y=kousi の書式です．(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=kousi(#1,#2)#3#4#1 : 横方向1区画の長さ（デフォルト=1）#2 : 縦方向1区画の長さ（デフォルト=1）#3 : 横方向のブロック数#4 : 縦方向のブロック数置く位置は Y=put で指定する．格子を点線・破線で引いてみます。(cid:2) (cid:3)格子線を破線で引くY=unitlength5mmY=begin{picture}(6,4)%−→{Y=def=Ysensyu{=Ydashline[40]{.1}}%Y=kousi{6}{4}}%Y=end{picture}%(cid:4) (cid:5)2.12さいころさいころの目を表すコマンド Y=saikoro を用意しました．22

### Page 30

(cid:2) (cid:3)さいころY=saikoro{1}~(cid:4) (cid:5) (cid:4) (cid:5) (cid:4) (cid:5)Y=saikoro{2}~(cid:2)(cid:4) (cid:3)(cid:5) (cid:2)(cid:4) (cid:3)(cid:5) (cid:2)(cid:4) (cid:3)(cid:5)Y=saikoro{3}=YY= −→(cid:2) (cid:3) (cid:2) (cid:3) (cid:2) (cid:3)Y=saikoro{4}~Y=saikoro{5}~Y=saikoro{6}(cid:4) (cid:5)ただし，このコマンドはascmac.styで定義されているY=keytopコマンドを使用していますから，このスタイルファイルを使用することが前提です．さらに，このスタイルファイルは emathP から読み込まれるeepic.styと相性が悪いことがあります．その対策をitembbox.styで施していますので，ascmac.styに引き続き itembbox.styも読み込んでおく必要があります．23

### Page 31

3文字列3.1文字列3.1.1 Y=PutLATEXの picture 環境において，文字列を配置するコマンドはY=putです。emath では，点の位置を Y=A などの変数名で指定します。そこで Y=Put の登場となります。(cid:2) (cid:3)Y=PutY=begin{picture}(3,2)BY=def=YA{(0,0)}Y=def=YB{(3,2)}→Y=Drawline{=YA=YB}Y=Put=YA{A} AY=Put=YB{B}Y=end{picture}(cid:4) (cid:5)うまくないですね。単に Y=Put=YA{A} では，文字‘A’の左下が指定した点A(0,0)にくるように配置されます。これを修正するのに(dx,dy)[pos]オプションを用意しました。次節以降この解説をしますが，とりあえずY=Putの書式をご覧ください。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Put#1(#2,#3)[#4]#5#1 : 文字列を置く位置（座標）(#2,#3) : 位置の修正ベクトル（長さの単位が必要です。）#4 : 配置 (l,r,t,b)#5 : 文字列3.1.2 文字位置の調整文字列位置の微調整を行う例です。24

### Page 32

(cid:2) (cid:3)位置の調整前Y=begin{picture}%(3.2,4)(-.1,-.5)%Y=def=YA{(2,3)}%Y=def=YB{(0,0)}%AY=def=YC{(3,0)}%Y=Bunten=YB=YC{1}{1}=YM%Y=Put=YA{A}%−→Y=Put=YB{B}%Y=Put=YC{C}%Y=Put=YM{M}% B M CY=Drawline{=YA=YM}Y=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)(cid:2) (cid:3)位置の調整後Y=begin{picture}%(3.2,4)(-.1,-.5)%Y=def=YA{(2,3)}%Y=def=YB{(0,0)}%AY=def=YC{(3,0)}%Y=Bunten=YB=YC{1}{1}=YM%Y=Put=YA(0,2pt)[b]{A}%−→Y=Put=YB(0,0)[r]{B }%Y=Put=YC(0,0)[l]{ C}%Y=Put=YM(0,-2pt)[t]{M}%B CMY=Drawline{=YA=YM}Y=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)Aの調整は (0,2pt) の指定により，頂点Aの上 2pt のところが基準になります。[b]指定により，基準点が文字のbottomとなるように配置されます。(x,y) の x, y は単位をつけた数値です。0だけは単位をつけなくてもよい，としてあります。文字位置の調整量(#2,#3)は直交座標成分ですが，[r](#2,#3)とすれば，極座標指定とみなされます。Aの位置を変えてみます。25

### Page 33

(cid:2) (cid:3)調整量を極座標指定Y=begin{picture}%(3.2,4)(-.1,-.5)%Y=def=YA{(2,3)}%Y=def=YB{(0,0)}%AY=def=YC{(3,0)}%Y=Bunten=YB=YC{1}{1}=YM%Y=Put=YA[r](2pt,45)[lb]{A}%−→Y=Put=YB(0,0)[r]{B }%Y=Put=YC(0,0)[l]{ C}%Y=Put=YM(0,-2pt)[t]{M}%B CMY=Drawline{=YA=YM}Y=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)3.1.3 文字列位置の簡易指定位置の調整を記述するのは面倒なので，簡易指定オプションを用意しました。その書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Put#1[#2]#3#1 : 文字列を置く位置（座標）#2 : 位置指定オプションn = 北 （上）nw= 北西（左上）w = 西 （左）sw= 南西（左下）s = 南 （下）se= 南東（右下）e = 東 （右）ne= 北東（右上）#3 : 文字列これを用いると，先の例は次のように記述できます。26

### Page 34

(cid:2) (cid:3)位置の簡易指定オプションY=begin{picture}%(3.2,4)(-.1,-.5)%Y=def=YA{(2,3)}%Y=def=YB{(0,0)}%AY=def=YC{(3,0)}%Y=Bunten=YB=YC{1}{1}=YM%Y=Put=YA[n]{A}% 位置の−→Y=Put=YB[w]{B}% 簡易指定Y=Put=YC[e]{C}% オプションY=Put=YM[s]{M}%B CMY=Drawline{=YA=YM}Y=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)すなわち，点からみて文字列をおくべき方位を指定します。（注）Y=Put の正しいコマンド名は Y=emathPut です。コマンド名 Y=Putが他のスタイルファイルと競合した場合は，Y=emathPut をお使いください。3.1.4 文字列の回転Y=Put[#1] には前節のほか次のオプションがあります。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)kaiten =ddd 文字を回転するhoukou =vvv 回転角を間接的に指定from =PPP 次の to=QQQ と併せて回転角を間接的に指定to =QQQ次は kaiten=ddd で文字を回転させます。回転角 ddd は符号付きの六十分法でです。27

### Page 35

(cid:2) (cid:3)kaiten=Y=unitlength6mm=YfootnotesizeyY=begin{zahyou}(-2.5,2.5)(-2.5,2.5)1Y=tenretu*{A(0,-1);B(1,0)} −x=Y=Put=YA[w]{$-1$} y→ O 1 xY=Put=YB[s]{1}−1Y=Tyokusen=YA=YB{}{}Y=Put[kaiten=45]=YB(0,1mm)[lb]{%$y=x-1$}Y=end{zahyou}(cid:4) (cid:5)回転角を方向ベクトルによって与えるオプションhoukou=vvv です。(cid:2) (cid:3)houkou=Y=unitlength6mm=YfootnotesizeY=begin{zahyou}(-2.5,2.5)(-2.5,2.5) y2Y=tenretu*{A(0,2);B(1,0)} y=Y=Put=YA[w]{2} 2−Y=Put=YB[s]{1} → O 1 2 x xY=Tyokusen=YA=YB{}{}Y=Subvec=YB=YA=YABY=Put[houkou==YAB]=YA(1mm,0)[lb]{%$y=2-2x$}Y=end{zahyou}(cid:4) (cid:5)2点を与えて回転角を指示する例です。(cid:2) (cid:3)from= , to=Y=unitlength6mm=YfootnotesizeyY=begin{zahyou}(-2.5,2.5)(-2.5,2.5) 2yY=tenretu*{A(0,2);B(1,0)} =2−Y=Put=YA[w]{2}2→ O 1x xY=Put=YB[s]{1}Y=Tyokusen=YA=YB{}{}Y=Put[from==YA,to==YB]=YA(1mm,0)[lb]{%$y=2-2x$}Y=end{zahyou}(cid:4) (cid:5)文字列を白抜きにします。28

### Page 36

(cid:2) (cid:3)白抜きY=unitlength6mm=YfootnotesizeY=begin{zahyou}(-2.5,2.5)(-2.5,2.5) y2Y=tenretu*{O(0,0);A(0,2);B(1,0)} y=Y=Put=YA[w]{2} 2−Y=Put=YB[s]{1} → O 1 2 x xY=En*=YO{2}Y=Tyokusen=YA=YB{}{}Y=Put[from==YA,to==YB]=YA(%1mm,0)[lb]{=Ycolorbox{white}{$y=2-2x$}}Y=end{zahyou}(cid:4) (cid:5)文字の外側の余白は Y=fboxsep により調整できます。(cid:2) (cid:3)Y=fboxsepによる余白調整Y=unitlength6mm=YfootnotesizeY=begin{zahyou}(-2.5,2.5)(-2.5,2.5) y2Y=tenretu*{O(0,0);A(0,2);B(1,0)} y=Y=Put=YA[w]{2} 2−2Y=Put=YB[s]{1} → O 1x xY=En*=YO{2}Y=Tyokusen=YA=YB{}{}{Y=fboxsep=0pt=YPut[from==YA,to==YB]=YA(%1mm,0)[lb]{=Ycolorbox{white}{$y=2-2x$}}}Y=end{zahyou}(cid:4) (cid:5)3.1.5 文字列から基準点への矢線文字列を置きたい付近で図が込み入っている場合，文字列を少し離れた位置において，そこから該当個所に矢線を引くためのコマンドが Y=PutStr です。(cid:2) (cid:3)Y=PutStr{Y=unitlength8mm=YrelaxY=begin{picture}(3,3)A(1, 1)Y=def=YA{(1,1)} −→Y=def=YAA{(2,2)}Y=PutStr=YAA[e]{A(1, 1)}to=YAY=end{picture}}(cid:4) (cid:5)矢線を円弧にしたいときは to の後ろに [半径] オプションをつけます。半径は無名数で単位はY=unitlength です。29

### Page 37

(cid:2) (cid:3)Y=PutStr{Y=unitlength8mm=YrelaxY=begin{picture}(3,3)A(1, 1)Y=def=YA{(1,1)} −→Y=def=YAA{(2,2)}Y=PutStr=YAA[e]{A(1, 1)}to[1.2]=YAY=end{picture}}(cid:4) (cid:5)半径に負の値を指定すると，矢印が負の回転を表す方向につきます。(cid:2) (cid:3)Y=PutStr{Y=unitlength8mm=YrelaxY=begin{picture}(3,3)A(1, 1)Y=def=YA{(1,1)} −→Y=def=YAA{(2,2)}Y=PutStr=YAA[e]{A(1, 1)}to[-1.2]=YAY=end{picture}}(cid:4) (cid:5)addvec=オプション 矢印の先端が曲線に埋没しているのが気になる場合の対策です。矢印の先端の位置を微調整するためにのオプションが[addvec=..]です。上の例で，矢印の先端を上方に1.1pt持ち上げてみます。(cid:2) (cid:3)Y=PutStryY=begin{zahyou}[ul=7.5mm](-2,3)(-2,3)A(1, 1)Y=PutStr{(1,2)}(0,0)[b]{A(1, 1)}%to[addvec={(0,1.1pt)}]{(1,1)}{Y=Thicklines →Y=En=YO{1.414} O xY=kTyokusen=YO{45}{}{}}%Y=end{zahyou}(cid:4) (cid:5)すなわち，addvecの右辺値に矢印の位置を修正するベクトルを与えますが，その成分は，単位を伴った数値です。x成分，y成分の間に‘,’が入りますから，addvec={(0,1.1pt)}と，右辺全体を{ }でくくっておく必要があります。極座標形式の指定法 また，線幅が細くても対象点に黒丸をつけたりした場合も矢印が埋没します。30

### Page 38

(cid:2) (cid:3)Y=PutStryY=begin{zahyou}[ul=7.5mm](-2.5,3)(-2.5,3)√Y=def=YA{(1,1.732)} A(1, 3)Y=PutStr{(-1,2)}(0,0)[r]%{A(1, $=Ysqrt3$)}%→to=YA O xY=En=YO{2}Y=kTyokusen=YO{60}{}{}Y=Kuromaru=YAY=end{zahyou}(cid:4) (cid:5)この場合は，微調整ベクトルを極座標形式で与える方法も用意しました。(cid:2) (cid:3)Y=PutStryY=begin{zahyou}[ul=7.5mm](-2.5,3)(-2.5,3)√Y=def=YA{(1,1.732)} A(1, 3)Y=PutStr{(-1,2)}(0,0)[r]%{A(1, $=Ysqrt3$)}%→to[addvec={r(1.2pt,180)}]=YA O xY=En=YO{2}Y=kTyokusen=YO{60}{}{}Y=Kuromaru=YAY=end{zahyou}(cid:4) (cid:5)すなわち，r(.,.)と，先頭に‘r’を附加します。円弧にする場合の半径指定 矢線を円弧にするには，[...]オプションに，[hankei=..]を附加します。(cid:2) (cid:3)Y=PutStr√ yY=begin{zahyou}[ul=7.5mm](-2.5,3)(-2.5,3)A(1, 3)Y=def=YA{(1,1.732)}Y=PutStr{(-1,2.5)}(0,0)[r]%{A(1, $=Ysqrt3$)}%→to[hankei=-2,addvec={r(1.2pt,120)}]=YA O xY=En=YO{2}Y=kTyokusen=YO{60}{}{}Y=Kuromaru=YAY=end{zahyou}(cid:4) (cid:5)右辺値は，Y=unitlengthを単位とする無名数であるのは，今までの仕様を引きずっています。Y=PutStr の arrowheadsize=オプション Y=PutStrは，デフォルトでは矢印がつきます。矢印のサイズを変更するためにのオプションがarrowheadsize=..です。特に右辺値を0とすれば，矢印がつかないこととなります。31

### Page 39

(cid:2) (cid:3)Y=PutStryY=begin{zahyou}[ul=10mm](-1.2,2.5)(-1.2,1.5)Y=En=YO{1}(1, 0)Y=PutStr{(1.2,.5)}[e]{(1, 0)}to →O x[hankei=-1,arrowheadsize=0]%{(1,0)}Y=end{zahyou}(cid:4) (cid:5)Y=PutStrの書式 Y=PutStrの書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=PutStr#1[#2]#3to[#4]#5#1 : 文字列を置く位置#2 : #1 から見ての方位（デフォルト = e ）#3 : 文字列#4 : 文字列から出る矢印を円弧にしたいときはその半径を指定する。key=val の形式も可能hankei=..addvec=..arrowheadsize=..#5 : 文字列から出る矢印の終点Y=PutStr#1(#2,#3)[#4]#5to[#6]#7#1〜#5 : Y=Put 文と同じ#6 : 文字列から出る矢印を円弧にしたいときはその半径を指定する。#7 : 文字列から出る矢印の終点3.2複数の点の定義とラベル付け3.2.1 Y=tenretu複数の点の定義とラベル付けを同時に片付けようというのがY=tenretuコマンドです。32

### Page 40

(cid:2) (cid:3)Y=tenretuY=begin{picture}%(3.2,4)(-.1,-.5)% AY=tenretu{%A(2,3)n;B(0,0)w;C(3,0)e}%Y=Bunten=YB=YC{1}{1}=YM% −→Y=Put=YM[s]{M}%Y=Drawline{=YA=YM}%{Y=thicklines B CMY=Drawline{=YA=YB=YC=YA}}%Y=end{picture}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)複数の点の定義とラベルつけY=tenretu#1Y=tenretu*#1（定義のみ ラベル付けはオプション）#1 は点列を ‘;’ で区切った列#1は[##1]##2(##3,##4)##5の形式で点列を ‘;’ で区切る。##1 : オプションで，点の位置に置く文字列（省略時は，##2 と同じ）##2 : Y=##2 という変数の頂点名[r] : をつけると極座標形式とみなす[s] : をつけると相対移動とみなす(##3,##4) : 頂点の座標##5 : 頂点の近傍に置く文字列の配置オプション[方角] オプションに限り区切子 ‘[’, ‘]’ を省略可能Y=edef=Y##2{(##3,##4)}として，点Y=##2 が定義され，Y=Put にY=Put=Y##2##5{##1}として引き渡される。）3.2.2 Y=tenretu**を附加した Y=tenretu* は，点を定義するだけで，ラベル付けはしません。33

### Page 41

(cid:2) (cid:3)Y=tenretuY=begin{picture}%(3.2,4)(-.1,-.5)%Y=tenretu*{%A(2,3);B(0,0);C(3,0)}%−→Y=Bunten=YB=YC{1}{1}=YM%Y=Drawline{=YA=YM}%{Y=thicklinesY=Drawline{=YA=YB=YC=YA}}%Y=end{picture}(cid:4) (cid:5)3.2.3 Y=oresen更にそれらを折れ線で結んでしまおう，というのがY=oresenです。(cid:2) (cid:3) AY=oresenY=begin{picture}%(3.2,4)(-.1,-.5)%−→Y=oresen{%A(2,3)n;B(0,0)w;C(3,0)e}%Y=end{picture}B C(cid:4) (cid:5)<sensyu=...>オプションを利用して，折れ線を点線・破線・鎖線にすることも可能です。(cid:2) (cid:3) A線種の変更（鎖線）Y=begin{picture}%(3.2,4)(-.1,-.5)%−→Y=oresen<sensyu==Ychainline>{%A(2,3)n;B(0,0)w;C(3,0)e}%Y=end{picture}B C(cid:4) (cid:5)(cid:2) (cid:3)線種の変更（破線） AY=begin{picture}%(3.2,4)(-.1,-.5)%Y=oresen<% −→sensyu==Ydashline[40]{.1}>{%A(2,3)n;B(0,0)w;C(3,0)e}%B CY=end{picture}(cid:4) (cid:5)Y=oresenの書式です。34

### Page 42

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=oresen<#1>#2<#1> : 線種を変更するときのオプションsensyu==Ydashline[40]{.1}sensyu==Ychainline[.4][.2]など#2 は折れ線の頂点列を ‘;’ で区切った列#2は[##1]##2(##3,##4)##5の形式で点列を ‘;’ で区切る。##1 : オプションで，点の位置に置く文字列（省略時は，##2 と同じ）##2 : Y=##2 という変数の頂点名[r] : をつけると極座標形式とみなす[s] : をつけると相対移動とみなす(##3,##4) : 頂点の座標##5 : 頂点の近傍に置く文字列の配置オプション[方角] オプションに限り区切子 ‘[’, ‘]’ を省略可能Y=edef=Y##2{(##3,##4)}として，点Y=##2 が定義され，Y=Put にY=Put=Y##2##5{##1}として引き渡される。）3.2.4 Y=rtenretuY=tenretu(*)による点の定義は直交座標を前提としています。[r]オプションで極座標形式にすることができますが，多くの点を極座標形式で定義するには，煩雑です。そこで，すべての点が極座標形式であるときに使用するためにY=rtenretu(*)を作りました。(cid:2) (cid:3)Y=rtenretuY=begin{zahyou}[ul=10mm](-1.2,1.5)(-1.2,1.5) yC BY=smallY=rtenretu{A(1,0)ne;B(1,60)ne;C(1,120)nw;D A→D(1,180)nw;E(1,240)sw;F(1,300)se} O xY=Drawline{=YA=YB=YC=YD=YE=YF=YA}E FY=En=YO{1}Y=end{zahyou}(cid:4) (cid:5)中心が原点以外のときは[...]オプションで指定します。35

### Page 43

(cid:2) (cid:3)Y=rtenretu[極]Y=begin{zahyou}[ul=10mm](-0.2,2.5)(-1.2,1.5)yY=small C BY=def=YTyuusin{(1,0)}Y=rtenretu[=YTyuusin]{A(1,0)ne;B(1,60)ne; → D AO xC(1,120)nw;D(1,180)nw;E(1,240)sw;F(1,300)se}Y=Drawline{=YA=YB=YC=YD=YE=YF=YA} E FY=En=YTyuusin{1}Y=end{zahyou}(cid:4) (cid:5)*付のY=rtenretu*とY=rtenretuの関係は，Y=tenretu*とY=tenretuの関係と同じです。3.2.5 座標に計算式を記述Y=tenretuに<perl>オプションを付加すると，座標に計算式を記述することができます。ただし，perlとの連携機能を前提としますから，samplePp.texをご覧ください。3.3線分に文字列3.3.1 線分の長さ表記線分の両端を円弧で結び，その中央部に長さなどを記入するためのコマンド Y=HenKo です。(cid:2) (cid:3)Y=HenKoY=begin{zahyou*}(0,3)(0,3)BY=tenretu{A(1,1)sw;B(2,2)ne} √−→Y=HenKo=YA=YB{$=Ysqrt{2}$}% 2AY=Drawline{=YA=YB}Y=end{zahyou*}(cid:4) (cid:5)Y=HenKoは基本的には，線分の両端と中央部に置く文字列の3個の引数を与えます。なお，与える両端の点の順序を逆転させると，円弧と文字列が線分の反対側に表示されます。(cid:2) (cid:3)端点の順序Y=begin{zahyou*}(0,3)(0,3) B√Y=tenretu{A(1,1)sw;B(2,2)ne} 2−→Y=HenKo=YB=YA{$=Ysqrt{2}$}%AY=Drawline{=YA=YB}Y=end{zahyou*}(cid:4) (cid:5)書式は36

### Page 44

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=HenKo[#1]<#2>#3#4#5#1: 弧を点線にする場合，点の個数(*を指定した場合は，一任)#2: key=valhenkoH=.. 辺と弧の距離(単位付数値) デフォルト値=1.6exhenkohi=..右辺値は無名数で，辺と弧の距離をデフォルトの何倍にするかを指定putoption=..henkosep=.. (白抜きボックスの Y=fboxsep)yazirusi=a/r/bhenkomozikaiten=1/-1linewidth=..henkotype=0/1 (0:円弧（デフォルト）, 1:楕円, 2:折れ線)#3,#4 : 両端の点#5 : 配置する文字列引数が多いですが，必須のものは，上の例のように #3, #4, #5 だけです。線分と弧の間隔を調整するには，henkoH=..オプションを用います。デフォルト値の1.6exから大きくしてみましょう。(cid:2) (cid:3)文字と線分との間隔Y=begin{zahyou*}(0,3)(0,3) BY=tenretu{A(1,1)sw;B(2,2)ne}−→ √Y=HenKo<henkoH=3ex>=YA=YB{$=Ysqrt{2}$}% 2AY=Drawline{=YA=YB}Y=end{zahyou*}(cid:4) (cid:5)弧の部分を点線にするには [#1] で，弧上に置く点の個数を指定します。(cid:2) (cid:3)弧を点線でY=begin{zahyou*}(0,3)(0,3) BY=tenretu{A(1,1)sw;B(2,2)ne} √−→2Y=HenKo[20]=YA=YB{$=Ysqrt{2}$}%AY=Drawline{=YA=YB}Y=end{zahyou*}(cid:4) (cid:5)極端な話し，これを [0] と指定すれば，円弧は描かれません。37

### Page 45

(cid:2) (cid:3)文字のみY=begin{zahyou*}(0,3)(0,3) BY=tenretu{A(1,1)sw;B(2,2)ne} √−→2Y=HenKo[0]=YA=YB{$=Ysqrt{2}$}%AY=Drawline{=YA=YB}Y=end{zahyou*}(cid:4) (cid:5)なお，文字列は線分の中央に置かれますが，これをどちらかに寄せるコマンドがY=sPut です。(cid:2) (cid:3)Y=sPut{Y=unitlength10mm=Ysmall yY=begin{zahyou}(-1,2)(-1,2.5) P(cid:2)pY=def=YO{(0,0)}%Y=def=YP{(1,2)}%−→Y=Put=YP(0,0)[l]{ P}%Y=sPut[.75]=YO=YP(0,0)[rb]{% O x$Y=beku p$}%Y=ArrowLine=YO=YP%Y=end{zahyou}}%(cid:4) (cid:5)書式は(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=sPut[#1]#2#3(#4,#5)[#6]#7#1 : 比率 (0~1)#2 : 始点#3 : 終点(#4,#5) : 位置の修正ベクトル 単位必須#6 : Y=makebox の [..] オプション#7 : 文字列#2 から #3 へ向かう線分の #1 倍の位置(Y=X)に，Y=Put=YX(#4,#5)[#6]#7 として文字列(#7)を置く。（注）dviout.exe による印刷で，辺の傍に記した長さの文字などが黒いボックスになってしまう場合は，dviout のgraphic — color specials 設定をreplace(def) または replace(bak) にしてみてください。3.3.2 Y=HenKo : 文字列の配置調整Y=HenKoで線分の傍に置く文字列が長くなったときなど文字位置を調整したいときがあります。その一例です。38

### Page 46

(cid:2) (cid:3)修正前Y=unitlength10mm=YfootnotesizeAY=drawaxisfalseY=begin{zahyou}(-.5,2.5)(-.5,2.5)√Y=Thicklines → 2+ 3Y=oresen{A(0,2)n;B(2,0)s}Y=thinlines BY=HenKo=YA=YB{$2+=Ysqrt3$}Y=end{zahyou}(cid:4) (cid:5)√文字列2+ 3が線分にかかっていますので，左に動かします。調整に入る前に，デフォルトの文字列配置について述べます。基準点は円弧の中点で，文字列ボックスの中心がこの基準点にくるように配置されます。では，基準点を左に4mm動かしてみましょう。(cid:2) (cid:3)平行移動Y=unitlength10mm=YfootnotesizeY=drawaxisfalse AY=begin{zahyou}(-.5,2.5)(-.5,2.5)Y=Thicklines√→ 2+ 3Y=oresen{A(0,2)n;B(2,0)s}Y=thinlinesBY=HenKo<putoption={(-4mm,0)}>=YA=YB%}>%{$2+=Ysqrt3$}Y=end{zahyou}(cid:4) (cid:5)<putoption={(-4mm,0)}>の部分が平行移動をするためのオプションで，Y=Putにオプションとして引き渡されます。すなわち，円弧の中点をY=QとしてY=Put=YQ(-4mm,0){$2+=Ysqrt3$}が実行されます。文字列が長いときは，文字列を回転して線分と平行にする方がよいでしょうか。<henkomozikaiten=1> オプションです。39

### Page 47

(cid:2) (cid:3)回転Y=unitlength10mm=YfootnotesizeAY=drawaxisfalseY=begin{zahyou}(-.5,2.5)(-.5,2.5)Y=tenretu{A(0,2)n;B(2,0)s} → 2 +√Y=HenKo<henkomozikaiten=1>=YA=YB% 3{$2+=Ysqrt3$} B{Y=Thicklines=YDrawline{=YA=YB}}Y=end{zahyou}(cid:4) (cid:5)オプションの右辺値を−1とすれば，文字は180度回転します。(cid:2) (cid:3)逆回転Y=unitlength10mm=YfootnotesizeAY=drawaxisfalseY=begin{zahyou}(-.5,2.5)(-.5,2.5)Y=tenretu{A(0,2)n;B(2,0)s} → 3√+Y=HenKo<henkomozikaiten=-1>=YA=YB% 2{$2+=Ysqrt3$} B{Y=Thicklines=YDrawline{=YA=YB}}Y=end{zahyou}(cid:4) (cid:5)3.3.3 弧に矢印弧の端末に矢印をつけるオプションが<yazirusi=a>オプションです。(cid:2) (cid:3)<yazirusi=a>オプションY=begin{zahyou*}(0,3)(0,3)Y=def=YA{(1,1)}%Y=def=YB{(2,2)}% BY=Put=YA{=Ymakebox(0,0)[r]{A }}% → rY=Put=YB{=Ymakebox(0,0)[l]{ B}}% AY=HenKo<yazirusi=a>=YA=YB{$r$}%Y=Drawline{=YA=YB}Y=end{zahyou*}(cid:4) (cid:5)逆向きにつけるには40

### Page 48

(cid:2) (cid:3)<yazirusi=r>オプションY=begin{zahyou*}(0,3)(0,3)Y=def=YA{(1,1)}%Y=def=YB{(2,2)}% BY=Put=YA{=Ymakebox(0,0)[r]{A }}% → rY=Put=YB{=Ymakebox(0,0)[l]{ B}}% AY=HenKo<yazirusi=r>=YA=YB{$r$}%Y=Drawline{=YA=YB}Y=end{zahyou*}(cid:4) (cid:5)両向きにつけるには(cid:2) (cid:3)<yazirusi=b>オプションY=begin{zahyou*}(0,3)(0,3)Y=def=YA{(1,1)}%Y=def=YB{(2,2)}% BY=Put=YA{=Ymakebox(0,0)[r]{A }}% → rY=Put=YB{=Ymakebox(0,0)[l]{ B}}% AY=HenKo<yazirusi=b>=YA=YB{$r$}%Y=Drawline{=YA=YB}Y=end{zahyou*}(cid:4) (cid:5)3.3.4 Y=HenKoの中点，中心Y=HenKoコマンド発行後，円弧の中点，円弧の中心位置を知りたいことがあります。Y=HenKoTyuuten =YHenKoで描画される円弧の中点はY=HenKoTyuutenに保存されています。(cid:2) (cid:3)Y=HenKoTyuutenY=begin{zahyou*}[ul=8mm](-.5,3)(-.5,2.5) BY=tenretu{A(0,0)nw;B(3,2)ne}Y=Drawline{=YA=YB} →Y=HenKo=YA=YB{} AY=Kuromaru=YHenKoTyuutenY=end{zahyou*}(cid:4) (cid:5)Y=HenKoTyuusin =YHenKoで描画される円弧の中心をY=HenKoTyuusinに保存します。41

### Page 49

(cid:2) (cid:3)Y=HenKoTyuutenY=begin{zahyou*}[ul=8mm](-1,4)(-1,4)Y=tenretu{A(0,0)sw;B(2,0)se}Y=Drawline{=YA=YB}Y=HenKo=YA=YB{}Y=Kuromaru=YHenKoTyuusin →Y=Hasen{=YA=YHenKoTyuusin=YB}Y=Enko<hasen={[.5][.8]}>=YHenKoTyuusin%A B{tuukaten==YA}%{hazimeten==YB}{owariten==YA}Y=end{zahyou*}(cid:4) (cid:5)応用例 Y=HenKoTyuuten, Y=HenKoTyuusinを利用した例です。(cid:2) (cid:3)応用例Y=begin{zahyou*}[ul=8mm](-.5,2.5)(-.5,4.5)Y=tenretu{A(2,4)n;B(1,2)se;C(0,0)s}AY=Drawline{=YA=YC}Y=HenKo=YA=YB{}Y=Bunten=YHenKoTyuusin=YHenKoTyuuten{.95}{.05}=YPY=Bunten=YHenKoTyuusin=YHenKoTyuuten{1.05}{-.05}=YQ → BY=Drawline{=YP=YQ}Y=HenKo=YB=YC{}Y=Bunten=YHenKoTyuusin=YHenKoTyuuten{.95}{.05}=YPCY=Bunten=YHenKoTyuusin=YHenKoTyuuten{1.05}{-.05}=YQY=Drawline{=YP=YQ}Y=end{zahyou*}(cid:4) (cid:5)3.3.5 Y=HenKoの形状いろいろY=HenKoの<henkotype=..>オプションにより，円弧部分のバリエーションについて説明します.この節では，Y=HenKoの方が焦点ですから，辺のほうは破線描画としておきます。色つけ 円弧の部分に色をつけるには <henkocolor=...> オプションを用います。(cid:2) (cid:3)<henkocolor=..>オプションY=begin{zahyou*}[ul=6mm](0,5)(0,4)Y=tenretu{A(0,1)w;B(4,2)e}→ BY=Hasen{=YA=YB}aAY=HenKo<henkocolor=red>=YA=YB{$a$}Y=end{zahyou*}(cid:4) (cid:5)42

### Page 50

<henkotype=..>オプション デフォルトでは，辺の両端を円弧で結びますが，この形状を変えるオプションが <henkotype=..>オプションです。<henkotype=ellipse> 円弧ではなく，楕円弧にするオプションが<henkotype=1> または <henkotype=ellipse>です。(cid:2) (cid:3)<henkotype=ellipse>オプションY=begin{zahyou*}[ul=6mm](0,5)(0,4)Y=tenretu{A(0,1)w;B(4,2)e}→ BY=Hasen{=YA=YB}aAY=HenKo<henkotype=ellipse>=YA=YB{$a$}Y=end{zahyou*}(cid:4) (cid:5)<henkotype=triangle> 円弧ではなく，辺の両端点・文字列を配置する点を結ぶ三角形を描画するオプションが<henkotype=2> または <henkotype=triangle>です。(cid:2) (cid:3)<henkotype=triangle>オプションY=begin{zahyou*}[ul=6mm](0,5)(0,4)Y=tenretu{A(0,1)w;B(4,2)e}→ BY=Hasen{=YA=YB}aAY=HenKo<henkotype=triangle>=YA=YB{$a$}Y=end{zahyou*}(cid:4) (cid:5)<henkotype=parallel> 円弧ではなく，辺と平行な線分を描画するオプションが<henkotype=3> または <henkotype=parallel>です。(cid:2) (cid:3)<henkotype=parallel>オプションY=begin{zahyou*}[ul=6mm](0,5)(0,4)Y=tenretu{A(0,1)w;B(4,2)e}→ BY=Hasen{=YA=YB}aAY=HenKo<henkotype=parallel>=YA=YB{$a$}Y=end{zahyou*}(cid:4) (cid:5)43

### Page 51

yazirusi=a/r/bオプション この形状は，線分ABの長さを表すときなどに利用できそうです。そして，Y=HenKoで描画される方の線分には矢印をつけることが多いようです。(cid:2) (cid:3)<yazirusi=b>オプションY=begin{zahyou*}[ul=6mm](0,5)(0,4)Y=tenretu{A(0,1)w;B(4,2)e}→ BY=Hasen{=YA=YB}aAY=HenKo<henkotype=parallel,yazirusi=b>=YA=YB{$a$}Y=end{zahyou*}(cid:4) (cid:5)Y=HenKo<yazirusi=..>=YA=YB{...}におけるyazirusi=..の右辺値はa: 点Y=Aから点Y=Bに向かう向きr: 点Y=Bから点Y=Aに向かう向きb: 両向きのいずれかです。<henkosideb=..,henkosidet=..> オプション この場合，さらに補助線—線分の両端とY=HenKoによって引かれる並行線分の両端を結ぶ線分（若干延長して)が欲しくなるかもしれません。(cid:2) (cid:3)<henkosideb=..,henkosidet=..>オプションY=begin{zahyou*}[ul=6mm](0,5)(0,4)Y=tenretu{A(0,1)w;B(4,2)e}Y=Hasen{=YA=YB} → BY=HenKo<henkotype=parallel,yazirusi=b,% A ahenkosideb=0,henkosidet=1.5>=YA=YB{$a$}Y=end{zahyou*}(cid:4) (cid:5)この場合，補助線は，辺の端点とY=HenKoによって引かれる線分（矢線）の端点を結ぶ線分をY=henkosideb : 1-=YhenkosidebとY=henkosidet : 1-=Yhenkosidetに分ける2点を結ぶ線分となります。なお，<henkocolor=..>オプションによる色づけはY=HenKoによる線分（両向き矢線）に対してのみ働きます。(cid:2) (cid:3)<henkocolor=..>オプションY=begin{zahyou*}[ul=6mm](0,5)(0,4)Y=tenretu{A(0,1)w;B(4,2)e}Y=Hasen{=YA=YB}→ BY=HenKo<henkotype=parallel,yazirusi=b,%aAhenkocolor=red,%henkosideb=0,henkosidet=1.5>=YA=YB{$a$}Y=end{zahyou*}(cid:4) (cid:5)44

### Page 52

補助線に対する色づけは<henkosidecolor=..>オプションで行います。(cid:2) (cid:3)<henkosidecolor=..>オプションY=begin{zahyou*}[ul=6mm](0,5)(0,4)Y=tenretu{A(0,1)w;B(4,2)e}Y=Hasen{=YA=YB}→ BY=HenKo<henkotype=parallel,yazirusi=b,%aAhenkocolor=red,henkosidecolor=green,%henkosideb=0,henkosidet=1.5>=YA=YB{$a$}Y=end{zahyou*}(cid:4) (cid:5)まさかねぇ〜(^^ゞ<henkotype=bracket> 円弧ではなく，大括弧にするオプションが<henkotype=1> または <henkotype=bracket>です。(cid:2) (cid:3)<henkotype=bracket>オプションY=begin{zahyou*}[ul=6mm](0,5)(0,4)Y=tenretu{A(0,1)w;B(4,2)e}→ BY=Hasen{=YA=YB}aAY=HenKo<henkotype=bracket>=YA=YB{$a$}Y=end{zahyou*}(cid:4) (cid:5)角を丸く コーナーを丸くするオプションが<Oval=..>オプションです。右辺値は，単位を伴った長さでコーナーの四分円の半径を指定します。(cid:2) (cid:3)<Oval=...>オプションY=begin{zahyou*}[ul=6mm](0,5)(0,4)Y=tenretu{A(0,1)w;B(4,2)e}Y=Hasen{=YA=YB}→ BaAY=HenKo<henkotype=bracket,Oval=4pt,henkocolor=cyan>Y=A=YB{$a$}Y=end{zahyou*}(cid:4) (cid:5)注：<henkotype=brace>はありません。後述のY=rotUbraceコマンドをご覧ください.<agezoko=..>オプション Y=HenKoの端点を辺から浮かせたいときがあります。そのためのオプションです。右辺値は無名数で単位は Y=unitlength です。単位をつけた数値で指定したいときは<Agezoko=..>オプションを用います。45

### Page 53

(cid:2) (cid:3)<agezoko=>オプションY=begin{zahyou*}[ul=6mm](0,5)(0,4)Y=tenretu{A(0,1)w;B(4,2)e}→ BY=Hasen{=YA=YB}A aY=HenKo<henkotype=bracket,Agezoko=5pt>=YA=YB{$a$}Y=end{zahyou*}(cid:4) (cid:5)<agezokovi=..,agezokovii=..>オプション Y=HenKoの端点をオプションの右辺値だけずらすオプションです。右辺値はベクトルで，成分は無名数—単位はY=unitlengthです。単位をつけた数値で指定したいときは<Agezokovi=..,=YAgezokovii=..>オプションを用います。末尾‘i’が始点に，‘ii’が終点に対する補正ベクトルです。(cid:2) (cid:3)<agezokovi=>オプションY=begin{zahyou*}[ul=6mm](0,5)(0,2)Y=tenretu{A(0,1)nw;B(4,1)ne}Y=Hasen{=YA=YB}A BY=HenKo<henkotype=bracket>=YA=YB{} →Y=HenKo<henkotype=bracket,henkocolor=red,%Agezokovi={(-2pt,0)},Agezokovii={(2pt,0)},%henkoH=3pt>=YA=YB{}Y=end{zahyou*}(cid:4) (cid:5)3.3.6 辺にY=braceY=underbrace, Y=overbraceを傾いた線分に対して使用するコマンドがY=rotUbrace, Y=rotObraceです。まずは，Y=rotUbraceの書式から(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=rotUbrace[#1]#2#3#4点#2から点#3へ向かう有向線分の，進行方向右側に Y=underbrace をつけ，中央下部に文字列#4を配置する。（#4 は数式モード内と解釈される。--- Y=scriptstyle ）Y=underbrace 記号と有向線分の間隔を空けたいときは#1にdepth=3ptなどと，間隔を単位付き数値で指定する。46

### Page 54

では，簡単な使用例です。(cid:2) (cid:3)Y=rotUbraceY=footnotesizeY=begin{zahyou}[ul=4mm](-1,11)(-1,6)% y5Y=tenretu*{A(0,5);B(10,0)}% (cid:8)Y=Put=YA[w]{5}=YPut=YB[s]{10}%→ (cid:9)(cid:10)Y=kuromaru[2pt]{=YA;(2,4);(4,3); 6個(6,2);(8,1);=YB}%O (cid:11)10xY=Tyokusen=YA=YB{}{}%Y=rotUbrace=YA=YB{=Ytext{6個}}%Y=end{zahyou}(cid:4) (cid:5)すなわち点A(0, 5)から点B(10, 0)へ向かう線分の下にY=underbraceをつけ，その中央部に格子点の個数を示しています。この文字列はデフォルトでは Y=scriptstyle で小さすぎますので，Y=textstyleを付加しています。Y=underbraceを線分から少し離したい，という場面もあるでしょう。そのためのオプションが[depth=...]です。右辺値は単位を伴った数値です。(cid:2) (cid:3)[depth=...オプションY=footnotesizeY=begin{zahyou}[ul=4mm](-1,11)(-1,6)%yY=tenretu*{A(0,5);B(10,0)}% 5(cid:8)Y=Put=YA[w]{5}=YPut=YB[s]{10}%Y=kuromaru[2pt]{=YA;(2,4);(4,3); → (cid:9)(cid:10)6(6,2);(8,1);=YB}% 個Y=Tyokusen=YA=YB{}{}% O (cid:11)10xY=rotUbrace[depth=3pt]=YA=YB%{Y=text{6個}}%Y=end{zahyou}(cid:4) (cid:5)基準となる線分は有向線分として扱われます。上の例で，向きを入れ変えると(cid:2) (cid:3)有向線分の向きを逆Y=footnotesizeyY=begin{zahyou}[ul=4mm](-1,11)(-1,6)%5(cid:11)Y=tenretu*{A(0,5);B(10,0)}%Y=Put=YA[w]{5}=YPut=YB[s]{10}% 個 6→ (cid:10)(cid:9)Y=kuromaru[2pt]{=YA;(2,4);(4,3);(6,2);(8,1);=YB}%O (cid:8)10xY=Tyokusen=YA=YB{}{}%Y=rotUbrace=YB=YA{=Ytext{6個}}%Y=end{zahyou}(cid:4) (cid:5)47

### Page 55

Y=brace記号が線分ABに関して対称な位置に付きます。文字の向きがおかしいですか。これはY=underbraceを回転させているからで，文字の向きを逆にするには，Y=overbraceを用いればよいでしょう。ということで，つぎはY=rotObraceの話しに移ります。(cid:2) (cid:3)Y=rotObraceY=footnotesizeY=begin{zahyou}[ul=4mm](-1,11)(-1,6)% y5(cid:10)Y=tenretu*{A(0,5);B(10,0)}%Y=Put=YA[w]{5}=YPut=YB[s]{10}% (cid:11) 6 (cid:8)個→Y=kuromaru[2pt]{=YA;(2,4);(4,3);(6,2);(8,1);=YB}% (cid:9)O 10xY=Tyokusen=YA=YB{}{}%Y=rotObrace=YA=YB{=Ytext{6個}}%Y=end{zahyou}(cid:4) (cid:5)線分とY=overbrace記号を離すためのオプションは[height=...]です。(cid:2) (cid:3)[height=...]オプションY=footnotesizeyY=begin{zahyou}[ul=4mm](-1,11)(-1,6)% (cid:10)5Y=tenretu*{A(0,5);B(10,0)}%6Y=Put=YA[w]{5}=YPut=YB[s]{10}% (cid:11)(cid:8)個→Y=kuromaru[2pt]{=YA;(2,4);(4,3);(cid:9)(6,2);(8,1);=YB}%O 10xY=Tyokusen=YA=YB{}{}%Y=rotObrace[height=3pt]=YA=YB{=Ytext{6個}}%Y=end{zahyou}(cid:4) (cid:5)Y=rotObraceの書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=rotObrace[#1]#2#3#4点#2から点#3へ向かう有向線分の，進行方向左側に Y=overbrace をつけ，中央上部に文字列#4を配置する。（#4 は数式モード内と解釈される。--- Y=scriptstyle ）Y=overbrace 記号と有向線分の間隔を空けたいときは#1にheight=3ptなどと，間隔を単位付き数値で指定する。48

### Page 56

3.3.7 等辺記号2つの線分の長さが等しいときに，縦棒を引いたりして表現するためのコマンド Y=Touhenkigouです。(cid:2) (cid:3)Y=TouhenkigouY=begin{picture}(3.4,4)(-.2,-.5)%Y=def=YB{(0,0)}%AY=def=YC{(3,0)}%Y=def=YA{(1.5,3)}%Y=Put=YA{=Ymakebox(0,0.5){A}}%Y=Put=YB{=Ymakebox(0,0)[r]{B }}% −→ | |Y=Put=YC{=Ymakebox(0,0)[l]{ C}}%Y=Touhenkigou=YA=YBB CY=Touhenkigou=YA=YCY=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Touhenkigou[#1]<#2><#3>(#4)#5#6#1 : 記号（デフォルトは | ）#2 : 個数#3 : #2で複数を指定した場合の記号間間隔（デフォルト0.5pt）#4 : 位置（デフォルトは0.5，すなわち中点）#5, #6 : 線分の両端辺上に置く縦棒を2本（3本）にしたいときは <#2> オプションを用います。49

### Page 57

(cid:2) (cid:3)Y=TouhenkigouY=begin{picture}(3.4,4)(-.2,-.5)%Y=def=YB{(0,0)}%AY=def=YC{(3,0)}%Y=def=YA{(1.5,3)}%Y=Put=YA{=Ymakebox(0,0.5){A}}%Y=Put=YB{=Ymakebox(0,0)[r]{B }}% −→ || |||Y=Put=YC{=Ymakebox(0,0)[l]{ C}}%Y=Touhenkigou<2>=YA=YBB CY=Touhenkigou<3>=YA=YCY=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)複数の線分に等辺記号をつけるコマンドが Y=touhenkigou です。線分を‘;’で区切って並べます。(cid:2) (cid:3)Y=touhenkigouY=begin{picture}(3.4,4)(-.2,-.5)%Y=def=YB{(0,0)}% AY=def=YC{(3,0)}%Y=def=YA{(1.5,3)}%Y=Put=YA{=Ymakebox(0,0.5){A}}%−→ || ||Y=Put=YB{=Ymakebox(0,0)[r]{B }}%Y=Put=YC{=Ymakebox(0,0)[l]{ C}}%Y=touhenkigou<2>{=YA=YB;=YA=YC}%B CY=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=touhenkigou[#1]<#2>#3#1 : 辺上に置く記号（デフォルトは | ）#2 : 個数#3 : 線分列（区切子は‘;’）50

### Page 58

3.3.8 平行記号(cid:2) (cid:3)Y=heikoukigouY=unitlength5mm=Ysmall B DY=begin{picture}(6,6)Y=tenretu{A(1,1)s;B(4,5)n;→C(3,1)s;D(6,5)n}Y=heikoukigou{=YA=YC;=YB=YD}A CY=heikoukigou[2]{=YA=YB;=YC=YD}Y=end{picture}(cid:4) (cid:5)(1) すなわち一番簡単な使用法はY=heikoukigou{=YP=YQ;=YR=YS}などと，新コマンドY=heikoukigouの引数に平行記号をつけたい線分を‘;’で区切って並べます．(2) (1)の場合，記号‘>’は1個だけつきますが，これを2個にしたければY=heikoukigou[2]{=YP=YQ;=YR=YS}と，Y=heikoukigouに[2]オプションをつけます．(3) さらに記号のサイズ，間隔，位置などを調整したいときは[...] オプションにkey=val,key=val,....の形のオプションを列記します．どの様なオプションがあるかは，次の書式をご覧ください．(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)平行記号線分の中央に，記号 ‘>’ を配置する。Y=heikoukigou[#1]#2#1 : 記号の個数または key=valheikoukigoukosuu=記号の個数（デフォルト値は1）heikoukigouiti =記号の位置（デフォルト値は0.5,すなわち線分の中点）heikoukigoukankaku=記号を複数配置するときの間隔（デフォルト値は1mm）heikoukigousize =記号の大きさ（デフォルト値は2）#2 : 線分の列を‘;’区切りで列記する．51

### Page 59

3.4角の内部に記号3.4.1 Y=Kakukigou角の内部に円弧などを描き，角の大きさなどを表示させるコマンドY=Kakukigou です。(cid:2) (cid:3)Y=KakukigouY=begin{picture}(3,3)%CY=tenretu{A(1,1)w;B(2,1)e;C(2,2)e}%−→Y=Kakukigou=YB=YA=YC{45=YDeg}%45◦A BY=Drawline{=YC=YA=YB}%Y=end{picture}(cid:4) (cid:5)Y=Kakukigou の基本的な使用法は角を構成する3点（真ん中が角の頂点）と角内に置く記号（文字列）の4つの引数を与えます。書式は(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)角の内部に円弧を描き，その傍に記号などを置く。Y=Kakukigou[#1]<#2>#3#4#5<#6><#7>#1 : 円弧の上に置く記号#1=a のときは角記号に矢印をつける。#1=r のときは角記号に逆向きの矢印をつける。#1=b のときは角記号に両向きの矢印をつける。#1=| のときは，円弧中央に円弧と垂直な短い線分注：| は，アルファベット小文字のエル(l)ではなく，縦棒(|)です。#2 : 円弧の個数#3#4#5 : 角BAC#4 が角の頂点半直線 #4#3 を 回転して #4#5 に重ねる回転を表示する。#6 : 円弧と頂点の距離係数（デフォルト値 1 ）hankei=（無名数） 半径の指定Hankei=（単位付） 〃siteiten= 円弧が指定点を通過hasen=[破線の長さ][破線の間隔] 円弧を破線で#7 : 円弧の中心と角の頂点位置（デフォルト値 0 ）以下，Y=emathPut に続く。Y=Kakukigou* : 円弧の内部を塗りつぶします。#3 と #5 を入れ替えると，52

### Page 60

(cid:2) (cid:3)角の向きY=begin{picture}(3,3)%CY=tenretu{A(1,1)w;B(2,1)e;C(2,2)e}%−→Y=Kakukigou=YC=YA=YB[w]{135=YDeg}%135◦A BY=Drawline{=YC=YA=YB}%Y=end{picture}(cid:4) (cid:5)すなわち，半直線 #4#3 を正の向きに回転して #4#5 に重ねる回転を表示します。円弧の位置を調整するには <#6> オプションを用います。デフォルトを1として，1より大きくすれば頂点から離れ，1より小さくすると頂点に近づきます。(cid:2) (cid:3)円弧の位置Y=begin{picture}(3,3)%CY=tenretu{A(1,1)w;B(2,1)e;C(2,2)e}%−→ 45◦Y=Kakukigou=YB=YA=YC<2>{45=YDeg}%A BY=Drawline{=YC=YA=YB}%Y=end{picture}(cid:4) (cid:5)円弧の半径を直接指定することも可能です。(cid:2) (cid:3)円弧の半径指定Y=begin{picture}(3,3)%CY=tenretu{A(1,1)w;B(2,1)e;C(2,2)e}%−→ 45◦Y=Kakukigou=YB=YA=YC<hankei=.8>{45=YDeg}%A BY=Drawline{=YC=YA=YB}%Y=end{picture}(cid:4) (cid:5)hankei=の右辺値の単位はY=unitlengthです。これをY=unitlengthに依存しない値で指定するには，Hankei=とします。(cid:2) (cid:3)円弧の半径指定（単位付）Y=begin{picture}(3,3)%CY=tenretu{A(1,1)w;B(2,1)e;C(2,2)e}%−→ 45◦Y=Kakukigou=YB=YA=YC<Hankei=8mm>{45=YDeg}%A BY=Drawline{=YC=YA=YB}%Y=end{picture}(cid:4) (cid:5)円弧が通過すべき一点を指定する方法もあります。(cid:2) (cid:3)円弧の通過点指定Y=begin{picture}(3,3)%CY=tenretu{A(1,1)w;B(2,1)e;C(2,2)e}%−→ 45◦Y=Kakukigou=YB=YA=YC<siteiten==YB>{45=YDeg}%A BY=Drawline{=YC=YA=YB}%Y=end{picture}(cid:4) (cid:5)53

### Page 61

円弧の曲がり具合は，<#7> オプションで調整します。デフォルトは 0 ですが，1に近づけると半径が小さくなっていきます。(cid:2) (cid:3)Y=KakukigouY=begin{picture}(3,3)%CY=tenretu{A(1,1)w;B(2,1)e;C(2,2)e}%−→ 45◦Y=Kakukigou=YB=YA=YC<2><.5>{45=YDeg}%A BY=Drawline{=YC=YA=YB}%Y=end{picture}(cid:4) (cid:5)円弧の中央部に円弧に垂直な縦線を1本入れる表示法もあります。[|] オプションです。(cid:2) (cid:3)円弧の中心に縦棒Y=begin{picture}(3,3)%CY=tenretu{A(1,1)w;B(2,1)e;C(2,2)e}%−→Y=Kakukigou[|]=YB=YA=YC{45=YDeg}%45◦A BY=Drawline{=YC=YA=YB}%Y=end{picture}(cid:4) (cid:5)円弧に矢印をつけるには Y=Kakukigou に [a] オプションをつけます。(cid:2) (cid:3)円弧に矢印Y=begin{picture}(3,3)%CY=tenretu{A(1,1)w;B(2,1)e;C(2,2)e}%−→Y=Kakukigou[a]=YB=YA=YC{45=YDeg}%45◦A BY=Drawline{=YC=YA=YB}%Y=end{picture}(cid:4) (cid:5)[a] オプションでは，矢印は正の回転方向につきます。これを逆向きにつけたいときは，[a] オプションに代えて[r] オプションをつけます。(cid:2) (cid:3)逆向きに矢印Y=begin{picture}(3,3)%CY=tenretu{A(1,1)w;B(2,1)e;C(2,2)e}%−→Y=Kakukigou[r]=YB=YA=YC{45=YDeg}%45◦A BY=Drawline{=YC=YA=YB}%Y=end{picture}(cid:4) (cid:5)[b] オプションをつけると，両向きに矢印がつきます。(cid:2) (cid:3)両向きに矢印Y=begin{picture}(3,3)%CY=tenretu{A(1,1)w;B(2,1)e;C(2,2)e}%−→Y=Kakukigou[b]=YB=YA=YC{45=YDeg}%45◦A BY=Drawline{=YC=YA=YB}%Y=end{picture}(cid:4) (cid:5)54

### Page 62

円弧の内部を塗りつぶすには，Y=Kakukigou*コマンドを用います。(cid:2) (cid:3)円弧の内部を塗りつぶすY=begin{picture}(3,3)%CY=tenretu{A(1,1)w;B(2,1)e;C(2,2)e}%−→Y=Kakukigou*=YB=YA=YC{45=YDeg}%45◦A BY=Drawline{=YC=YA=YB}%Y=end{picture}(cid:4) (cid:5)塗りつぶしの濃度を指定するには[...]オプションを用います。0（白）と1（真黒）の間の数を指定します。(cid:2) (cid:3)円弧の内部を黒で塗りつぶすY=begin{picture}(3,3)%CY=tenretu{A(1,1)w;B(2,1)e;C(2,2)e}%−→Y=Kakukigou*[1]=YB=YA=YC{45=YDeg}%45◦A BY=Drawline{=YC=YA=YB}%Y=end{picture}(cid:4) (cid:5)複数の角を区別するため，角内の円弧を2重，3重にすることができます。<..>オプションです。(cid:2) (cid:3)円弧を二重にY=begin{picture}(4,4)%Y=tenretu{A(1,1)w;B(3,1)e;C(2,3)e}%Y=Kakukigou=YB=YA=YC[e]{$=Yalpha$}%Y=Kakukigou<2>=YC=YB=YA[w]{$=Ybeta$}%Y=Kakukigou<3>=YA=YC=YB[s]{$=Ygamma$}%Y=Drawline{=YC=YA=YB=YC}%Y=end{picture}(cid:4) (cid:5)Cγ−→α βA B逆に <..> オプションに <0> と指定すれば，角内に円弧は描かず，記号類だけを置くこともできます。55

### Page 63

(cid:2) (cid:3)円弧なしY=begin{picture}(4,5)(-0.5,-0.5)%Y=tenretu{A(0,0)w;B(2,0)e;C(2,3.464)n}%Y=Bunten=YB=YC{1}{2}=YD%Y=Put=YD[ne]{D}%Y=Kakukigou<0>=YB=YA=YD(0,0)[c]{$=Ybullet$}%Y=Kakukigou<0>=YD=YA=YC(0,0)[c]{$=Ybullet$}%Y=Drawline{=YA=YD}%{Y=thicklinesY=Drawline{=YC=YA=YB=YC}}%Y=end{picture}(cid:4) (cid:5)C−→D••A B円弧を破線で描画することも可能です。(cid:2) (cid:3)破線の円弧Y=begin{picture}(5,5)%Y=tenretu{A(4.5,0.5)e;B(0.5,0.5)w;C(3,4)n}Y=Drawline{=YA=YB=YC}Y=Kakukigou=YA=YB=YC<hasen=[.5][.5],Hankei=1cm>(%2pt,2pt)[l]{=Ymaru2}Y=end{picture}(cid:4) (cid:5)C−→(cid:6)2B A56

### Page 64

さらに矢印を付けることも可能です。(cid:2) (cid:3)破線の円弧に矢印Y=begin{picture}(5,5)%Y=tenretu{A(4.5,0.5)e;B(0.5,0.5)w;C(3,4)n}Y=Drawline{=YA=YB=YC}Y=Kakukigou[b]=YA=YB=YC<hasen=[.5][.5],Hankei=1cm>(%2pt,2pt)[l]{=Ymaru2}Y=end{picture}(cid:4) (cid:5)C−→(cid:6)2B A最後に，角内に置く文字列の位置調整です。これは，Y=Putの文字列位置調整オプションと同じです。(cid:2) (cid:3)Y=KakukigouY=begin{picture}(3,3)%CY=tenretu{A(1,1)w;B(2,1)e;C(2,2)e}%−→Y=Kakukigou=YB=YA=YC[e]{45=YDeg}% 45◦A BY=Drawline{=YC=YA=YB}%Y=end{picture}(cid:4) (cid:5)と簡易指定オプション[e]も使えますが，角内は狭いですから(cid:2) (cid:3)Y=KakukigouY=begin{picture}(3,3)%CY=tenretu{A(1,1)w;B(2,1)e;C(2,2)e}%−→Y=Kakukigou=YB=YA=YC(2pt,2pt)[l]{45=YDeg}% 45◦A BY=Drawline{=YC=YA=YB}%Y=end{picture}(cid:4) (cid:5)などと細かく指定した方が良いでしょう。蛇足ながら文字列を配置する基準点は，円弧の中点です。等しい角に同じ記号をつけるためのコマンドが Y=toukakukigou です。角を ‘;’ で区切って並べるというのは，Y=touhenkigou と同様です。57

### Page 65

(cid:2) (cid:3)Y=toukakukigouY=begin{picture}(3.4,4)(-.2,-.5)%Y=def=YB{(0,0)}% AY=def=YC{(3,0)}%Y=def=YA{(1.5,3)}%Y=Put=YA{=Ymakebox(0,0.5){A}}%−→Y=Put=YB{=Ymakebox(0,0)[r]{B }}%Y=Put=YC{=Ymakebox(0,0)[l]{ C}}%Y=toukakukigou<2>{=YC=YB=YA;=YA=YC=YB}%B CY=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)Y=toukakukigou*と‘∗’をつけると角内を塗りつぶします。(cid:2) (cid:3)Y=toukakukigou*Y=begin{picture}(3.4,4)(-.2,-.5)%Y=def=YB{(0,0)}% AY=def=YC{(3,0)}%Y=def=YA{(1.5,3)}%Y=Put=YA{=Ymakebox(0,0.5){A}}%−→Y=Put=YB{=Ymakebox(0,0)[r]{B }}%Y=Put=YC{=Ymakebox(0,0)[l]{ C}}%Y=toukakukigou*{=YC=YB=YA;=YA=YC=YB}%B CY=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)書式です。58

### Page 66

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)複数の角に角記号をつける。Y=toukakukigou[#1]<#2>#3Y=toukakukigou*[#1]<#2>#3#1 : 円弧の上に置く記号[|] のときは，円弧中央に円弧と垂直な短い線分（デフォルト）注：| は，アルファベット小文字のエル(l)ではなく，縦棒(|)です。[] のときは，なにもつけない（円弧のみ）*付のときは，塗りつぶしの濃度(0〜1)#2 : 円弧の個数#3 : 角の列 区切り子は‘;’3.4.2 直角記号特に直角を表す記号です。(cid:2) (cid:3)<..>オプションY=begin{picture}%(3,5)(-0.5,-0.5)%Y=def=YA{(0,0)}%CY=def=YB{(2,0)}%Y=def=YC{(2,3.464)}%Y=Bunten=YB=YC{1}{2}=YD%Y=Put=YA{=Ymakebox(0,0)[r]{A }}% −→Y=Put=YB{=Ymakebox(0,0)[l]{ B}}%Y=Put=YC{=Ymakebox(0,0.5){C}}%Y=Tyokkakukigou=YA=YB=YCA BY=thicklinesY=Drawline{=YC=YA=YB=YC}%Y=thinlinesY=end{picture}(cid:4) (cid:5)書式は(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Tyokkakukigou[#1](#2)#3#4#5#1 : 直角記号内を塗りつぶすときの濃さ#2 : 直角記号のサイズ#3#4#5 : 直角(#4が頂点)59

### Page 67

直角記号のサイズは (#2) で指定できます。デフォルトは 5(pt) です。10pt にしたいときは，(10) と指定します。(cid:2) (cid:3)<..>オプションY=begin{picture}%(3,5)(-0.5,-0.5)%Y=def=YA{(0,0)}%CY=def=YB{(2,0)}%Y=def=YC{(2,3.464)}%Y=Bunten=YB=YC{1}{2}=YD%Y=Put=YA{=Ymakebox(0,0)[r]{A }}% −→Y=Put=YB{=Ymakebox(0,0)[l]{ B}}%Y=Put=YC{=Ymakebox(0,0.5){C}}%Y=Tyokkakukigou(10)=YA=YB=YCA BY=thicklinesY=Drawline{=YC=YA=YB=YC}%Y=thinlinesY=end{picture}(cid:4) (cid:5)空間図形など複雑な図形で，直角記号を塗りつぶしたいときは，[#1] オプションに塗りつぶしの濃度(0〜1)を指定します。60

### Page 68

(cid:2) (cid:3)<..>オプション{Y=unitlength5mm=YsmallY=begin{picture}(11,10)(-1,-1)Y=def=Ytakasa{7}%Y=def=YA{(0,0)}=Ydef=YB{(6,0)}=Ydef=YD{(3,2)}%Y=Addvec=YB=YD=YCY=Bunten=YA=YC{1}{1}=YHY=Addvec=YH{(0,=Ytakasa)}=YOY=Put=YO{=Ymakebox(0,0.8){O}}%Y=Put=YB{=Ymakebox(0,0)[lt]{ B}}%Y=Put=YA{=Ymakebox(0,0)[r]{A }}%Y=Put=YD{=Ymakebox(0,0)[rb]{D }}%Y=Put=YC{=Ymakebox(0,0)[l]{ C}}%Y=Put=YH{=Ymakebox(0,-0.8){H}}%%Y=Tyokkakukigou[.5]=YO=YH=YA% 直角記号塗りつぶし[.5]オプションY=Tyokkakukigou[.5](10)=YO=YH=YA% (10)はサイズオプションY=Drawline{=YA=YC}%Y=Drawline{=YB=YD}%Y=Drawline{=YO=YH}%Y=thicklinesY=Drawline{=YO=YA=YB=YC=YO=YB}%Y=Dottedline{0.3}{=YA=YD=YC}%Y=Dottedline{0.3}{=YO=YD}%Y=thinlinesY=end{picture}%}(cid:4) (cid:5)O−→DCHAB複数の角に直角記号をつけるコマンドY=tyokkakukigouもあります。61

### Page 69

3.4.3 一般角360◦ を越える角に角記号をつけるコマンド Y=ippankaku の基本的な使用法は，引数に角度を与えるだけです。y(cid:2) (cid:3)Y=ippankakuY=unitlength8mm=YsmallY=begin{zahyou}(-3,3)(-3,3)%→ O xY=ippankaku{1230}%Y=kHantyokusen{(0,0)}{1230}%Y=end{zahyou}(cid:4) (cid:5)Y=rasenP この記号の適当なところに文字列を配置するために，角度を指定して螺旋上の点を求めるコマンド Y=rasenP を用意しました。Y=emathPutと併用して文字列を配置します。y(cid:2) (cid:3)Y=rasenPY=unitlength8mm=YsmallY=begin{zahyou}(-3,3)(-3,3)%1230◦Y=ippankaku{1230}%→ O xY=rasenP{1140}=YPY=kHantyokusen{(0,0)}{1230}%Y=Put=YP[ne]{1230=YDeg}%Y=end{zahyou}(cid:4) (cid:5)螺旋の形状変更 螺旋 r = aθ+b の係数 a, b のデフォルト値はa = 0.02, b = 0.2 としてあります。これを変更するためのオプションがY=ippankaku<#1><#2>#1 : a を #1 倍する。#2 : b を #2 倍する。その効果は62

### Page 70

y(cid:2) (cid:3)<...>オプションY=unitlength8mm=YsmallY=begin{zahyou}(-3,3)(-3,3)%→ O xY=ippankaku<1.5><2.5>{1230}%Y=kHantyokusen{(0,0)}{1230}%Y=end{zahyou}(cid:4) (cid:5)始線変更オプション 始線の位置を変更するには [...] オプションを用います。y(cid:2) (cid:3)[...]オプションY=unitlength8mm=YsmallY=begin{zahyou}(-3,3)(-3,3)%Y=ippankaku[60]{1230}%→ O xY=def=YO{(0,0)}%Y=kHantyokusen{(0,0)}{60}%Y=kHantyokusen{(0,0)}{1230}%Y=end{zahyou}(cid:4) (cid:5)角が負の場合の処理 角が負の場合は，内部処理で r =aθ+b の a の符号を逆転させています。y(cid:2) (cid:3)負の角Y=unitlength8mm=YsmallY=begin{zahyou}(-3,3)(-3,3)%→ O xY=ippankaku{-1230}%Y=kHantyokusen{(0,0)}{-1230}%Y=end{zahyou}(cid:4) (cid:5)矢印の制御 矢印の制御は (#4) オプションで行います。デフォルトは終端に矢印をつけます。これを逆に始端につけたいときは (s) オプションをつけます。63

### Page 71

y(cid:2) (cid:3)(s)オプションY=unitlength8mm=YsmallY=begin{zahyou}(-3,3)(-3,3)%→ O xY=ippankaku(s){1230}%Y=kHantyokusen{(0,0)}{1230}%Y=end{zahyou}(cid:4) (cid:5)両端につけるには (b) オプションを用います。y(cid:2) (cid:3)(b)オプションY=unitlength8mm=YsmallY=begin{zahyou}(-3,3)(-3,3)%→ O xY=ippankaku(b){1230}%Y=kHantyokusen{(0,0)}{1230}%Y=end{zahyou}(cid:4) (cid:5)矢印をつけたくないときは (n) オプションです。y(cid:2) (cid:3)(n)オプションY=unitlength8mm=YsmallY=begin{zahyou}(-3,3)(-3,3)%→ O xY=ippankaku(n){1230}%Y=kHantyokusen{(0,0)}{1230}%Y=end{zahyou}(cid:4) (cid:5)両端にY=Kuromaru, Y=Siromaru 両端に黒丸,白丸を配置したいときは，らせん上の1点を求めるY=rasenP コマンドを用います。64

### Page 72

(cid:2) −690◦ (cid:2)θ <0◦ (cid:3)yY=smallY=begin{zahyou*}[ul=8mm](-3,3)(-3,3)%Y=drawXYaxis −690◦Y=ippankaku<1.5><2.5>(n){-690}%Y=kHantyokusen{(0,0)}{-690}% → O xY=rasenP{0}=YStart=YSiromaru=YStartY=rasenP{-690}=YEnd=YKuromaru=YEndY=rasenP{-640}=YPY=Put=YP[ne]{$-690=YDeg$}%Y=end{zahyou*}(cid:4) (cid:5)Y=ippankaku の書式 Y=ippankaku の書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=ippankaku<#1><#2>[#3](#4)#5#1 : a の倍率#2 : b の倍率#3 : 始め角（六十分法）#4 : 矢印の配置e = 終端（デフォルト）s = 始端b = 両端n = なし#5 : 終り角（六十分法）3.5 picture数式に 環境を併置3.5.1 sikipicture環境数式にpicture環境を併設し,数式を飾り立てようというのがsikipicture環境です。これは，実質zahyou*環境です。したがって，その環境内には，zahyou*環境内に記述できるものはすべて記述可能です。65

### Page 73

(cid:2) (cid:3)sikipicture環境aY=begin{sikipicture}{%x^2,+,2,x, → ax2+2x+ 1 z2+,Y=protect=Ybunsuu12}Y=Takakkei{=YLT=YLB=YRB=YRT}Y=put(0,0){=Ycolor{red}=YKuromaru=YO}%Y=end{sikipicture}z(cid:4) (cid:5)座標領域を確認するため，四隅を結ぶ四角形と座標原点に赤丸印を描画しておきました。注1. Y=begin{sikipicture}{...}の引数内にY=bunsuuなどのコマンドを入れるときはY=protectをかぶせておく必要があります。注2. TEXが認知するサイズは上図の四角形です。Y=putを用いてこの四角形の外部に文字列を配置することは可能ですが，TEXはその存在を認知しませんから，前後の文章とかぶります。Y=vspace{...}などで調整する必要があります。注3. sikipicture環境のY=unitlengthは，1pt（固定）です。注4. sikixyposも同義語として使えます。3.5.2 Y=sikiBi, Y=sikiTiY=begin{sikipicture}{...}の引数内で，分割記述された各項の中央下部の点の座標がY=sikiBi, =YsikiBii, =YsikiBiii, .....に定義されています。そこに赤丸を打ってみましょう。(cid:2) (cid:3)Y=sikiBi,...aY=begin{sikipicture}{%x^2,+,2,x, ax2+2x+ 1 z→+, 2Y=protect=Ybunsuu12}Y=put(0,0){=Ycolor{red}=Ykuromaru{%Y=sikiBi;=YsikiBii;=YsikiBiii;%Y=sikiBiv;=YsikiBv;=YsikiBvi}}%Y=end{sikipicture}z(cid:4) (cid:5)66

### Page 74

+の下の赤丸がずれていますね。これは，二項演算子，関係演算子には両側にアキが入ることによるずれです。正しい位置が欲しければ，Y=begin{sikipicture}{...}の引数内の演算子両側に{}を補ってやります。(cid:2) (cid:3)二項演算子に対する補正aY=begin{sikipicture}{%x^2,{}+{},2,x, ax2+2x+ 1 z→2{}+{},Y=protect=Ybunsuu12}Y=put(0,0){=Ycolor{red}=Ykuromaru{%Y=sikiBi;=YsikiBii;=YsikiBiii;%Y=sikiBiv;=YsikiBv;=YsikiBvi}}%Y=end{sikipicture}z(cid:4) (cid:5)x2 の下もずれてるって？これはずれていません。x2 の中央下です。底のxの中央下が欲しいなら，xとその冪を分離して与えます。ついでに，各項の中央上にも緑丸をつけてみます。（Y=sikiTi, =YsikiTii, .....）(cid:2) (cid:3)二項演算子に対する補正aY=begin{sikipicture}{%x,{}^2,{}+{},2,x,{}+{},Y=protect=Ybunsuu12} ax2+2x+ 1 z→2Y=put(0,0){=Ycolor{red}=Ykuromaru{%Y=sikiBi;=YsikiBii;=YsikiBiii;%Y=sikiBiv;=YsikiBv;=YsikiBvi;%Y=sikiBvii}}%Y=put(0,0){=Ycolor{green}=Ykuromaru{%Y=sikiTi;=YsikiTii;=YsikiTiii;%Y=sikiTiv;=YsikiTv;=YsikiTvi;%Y=sikiTvii}}%Y=end{sikipicture}z(cid:4) (cid:5)3.5.3 Y=sikixposi, Y=sikiyhposi, Y=sikiydposiなお，丸印をつけた点のx座標は67

### Page 75

Y=sikixposi, =Ysikixposii, .....です。またy座標は，赤丸のほうがY=sikiydposi, =Ysikiydposii, .....緑丸のほうがY=sikiyhposi, =Ysikiyhposii, .....となっています。(cid:2) (cid:3)Y=sikixpos..aY=begin{sikipicture}{%x,{}^2,{}+{},2,x,{}+{},Y=protect=Ybunsuu12}Y=Takakkei{=YLT=YLB=YRB=YRT} → ax2+2x+ 1 z2Y=put(0,0){=Ycolor{red}=Ykuromaru{%(Y=sikixposi,=Yymin);%(Y=sikixposii,=Yymin);%(Y=sikixposiii,=Yymin)}}%Y=put(0,0){=Ycolor{green}=Ykuromaru{%(Y=sikixposi,=Yymax);%(Y=sikixposii,=Yymax);%(Y=sikixposiii,=Yymax)}}%Y=end{sikipicture}z(cid:4) (cid:5)3.5.4 Y=sikixlposi, Y=sikixrposiY=sikixposiなどは各項の中央x座標を表しますが，各項・左右端のx座標はそれぞれY=sikixlposi, =Ysikilposii, .....Y=sikixrposi, =Ysikirposii, .....などです。68

### Page 76

(cid:2) (cid:3)Y=sikixlpos.., Y=sikixrpos..aY=begin{sikipicture}{%x,{}^2,{}+{},2,x,{}+{}, ax2+2x+ 1 z→2Y=protect=Ybunsuu12}Y=Takakkei{=YLT=YLB=YRB=YRT}Y=put(0,0){=Ycolor{red}=Ykuromaru{%(Y=sikixlposiv,=Ysikiyhposiv);%(Y=sikixrposiv,=Ysikiyhposiv)}}%Y=put(0,0){=Ycolor{green}=Ykuromaru{%(Y=sikixposiv,=Ysikiydposiv)}}%Y=end{sikipicture}z(cid:4) (cid:5)3.5.5 使用例式展開の説明図 式を展開するときの流れを説明する図です.(cid:2) (cid:3)式展開の説明図Y=vskip 24ptY=begin{sikipicture}{(,a,+,b,),=Ykern1em(,x,+,y,)=,ax,+,ay,+,bx,+,by}Y=HenKo{(=Ysikixposvii,=Yymax)}{(=Ysikixposii,=Yymax)}{=Ymaru1}Y=HenKo<henkoH=15pt>{(=Ysikixposix,=Yymax)}{(=Ysikixposii,=Yymax)}{=Ymaru2}Y=HenKo{(=Ysikixposiv,=Yymin)}{(=Ysikixposvii,=Yymin)}{=Ymaru3}Y=HenKo<henkoH=15pt>{(=Ysikixposiv,=Yymin)}{(=Ysikixposix,=Yymin)}{=Ymaru4}Y=Put{(=Ysikixposxi,=Yymax)}(0,0)[b]{=Ymaru1}Y=Put{(=Ysikixposxiii,=Yymax)}(0,0)[b]{=Ymaru2}Y=Put{(=Ysikixposxv,=Yymin)}(0,0)[t]{=Ymaru3}Y=Put{(=Ysikixposxvii,=Yymin)}(0,0)[t]{=Ymaru4}Y=end{sikipicture}Y=vskip 10ptY=mbox{}(cid:4) (cid:5)(cid:6)2(cid:6)1 (cid:6)1 (cid:6)2→ (a+b) (x+y)=ax+ay+bx+by(cid:6)3 (cid:6)3 (cid:6)4(cid:6)469

### Page 77

部分積分の流れ 部分積分の流れを示すのにも使えます.(cid:2) (cid:3)不定積分の流れY=vskip15ptY=begin{sikipicture}{%Y=dint{}{},f’(x),g(x),dx=,f(x),g(x),-,=Ydint{}{},f(x),g’(x),dx}Y=HenKo<henkoH=15pt,yazirusi=r>=YsikiTv=YsikiTii{=Yfootnotesize 積分する}Y=HenKo<henkoH=15pt,yazirusi=r>=YsikiTix=YsikiTv{=Yfootnotesize そのまま}Y=HenKo<henkoH=15pt,yazirusi=a>=YsikiBiii=YsikiBvi{=Yfootnotesize そのまま}Y=HenKo<henkoH=15pt,yazirusi=a>=YsikiBvi=YsikiBx{=Yfootnotesize 微分する}Y=end{sikipicture}Y=vskip10ptY=mbox{}(cid:4) (cid:5)(cid:12) 積分する そのまま(cid:12)f (cid:3) (x)g(x)dx=f(x)g(x)− f(x)g (cid:3) (x)dx→そのまま 微分するY=HenKoによる円弧を式から少し離したいときは，Y=HenKoに対し<agezoko=..>オプションをつけます。(cid:2) (cid:3)不定積分の流れY=vskip18ptY=begin{sikipicture}{%Y=dint{}{},f’(x),g(x),dx=,f(x),g(x),-,=Ydint{}{},f(x),g’(x),dx}Y=HenKo<henkoH=15pt,yazirusi=r,agezoko=3>=YsikiTv=YsikiTii{=Yfootnotesize積分する}Y=HenKo<henkoH=15pt,yazirusi=r,agezoko=3>=YsikiTix=YsikiTv{=Yfootnotesizeそのまま}Y=HenKo<henkoH=15pt,yazirusi=a,agezoko=3>=YsikiBiii=YsikiBvi{=Yfootnotesizeそのまま}Y=HenKo<henkoH=15pt,yazirusi=a,agezoko=3>=YsikiBvi=YsikiBx{=Yfootnotesize微分する}Y=end{sikipicture}Y=vskip10ptY=mbox{}(cid:4) (cid:5)70

### Page 78

積分する そのまま(cid:12) (cid:12)→ f (cid:3) (x)g(x)dx=f(x)g(x)− f(x)g (cid:3) (x)dxそのまま 微分する談話室 No.107 ふたたび newPh232.texでも取り上げた使用例を再度取り上げてみます。ソースリストはre107a.texです。x2+ 6x+ 3 2 =1+ 3 2 (x+3)2+10(cid:6)2の形半分の2乗右側の部分，前回はY=phkasenでアンダーラインを引きましたが，今回はY=HenKoで<henkotype=bracket>オプションを用いてみました。71

### Page 79

3.5.6 bunpicture環境sikipicture環境は，数式に対するものでY=begin{sikipicture}{.....}の引数{.....}は数式モードに入ると仮定されています。これに対して，テキストモードに入るものをbunpicture環境と称することとします。(cid:2) (cid:3)bunpicture環境Y=begin{bunpicture}{%Y=underline{It}, is natural ,=Yunderline{that she should think}, so.}Y=HenKo<yazirusi=r,henkotype=bracket,Oval=4pt,Agezoko=2pt>=YbunBi=YbunBiii{}Y=end{bunpicture}Y=vskip5ptY=mbox{}(cid:4) (cid:5)It is natural that she should think so.→さらに手が込んで(cid:2) (cid:3)応用例Y=mbox{}=Yvskip1=YbaselineskipY=begin{bunpicture}{It ,is natural, that ,she should think so,.}Y=HenKo<henkotype=bracket,yazirusi=r,Agezoko=2pt,putoption={(0,1pt)[b]}>%Y=bunTiii=YbunTi{=Yfootnotesize Itはthat以下を表します}Y=HenKo<henkotype=bracket,yazirusi=a,Agezoko=2pt>%{(=Ybunxposiii,=Yymin)}{(=Ybunxlposiv,=Yymin)}{}Y=Add=Yymin{-2}=YyyY=put(0,0){=Ycolor{red}%Y=ArrowLine{(=Ybunxlposiv,=Yyy)}{(=Ybunxrposiv,=Yyy)}%Y=HenKo<henkotype=bracket,yazirusi=r,henkoH=10pt,Oval=5pt,%putoption={(0,-2pt)[t]},Agezoko=2pt>%{(=Ybunxlposii,=Yymin)}{(=Ybunxrposiv,=Yymin)}%{Y=color{black}=Yfootnotesize that以下がItの後に続きます}Y=ArrowLine{(=Ybunxlposii,=Yyy)}{(=Ybunxrposii,=Yyy)}%}%Y=end{bunpicture}Y=vskip1=YbaselineskipY=mbox{}(cid:4) (cid:5)72

### Page 80

Itはthat以下を表しますIt is natural that she should think so.→that以下がItの後に続きます73

### Page 81

4円・楕円4.1円4.1.1 円中心と半径を指定 円を描画するには，LATEXで Y=circle がありますが，直径を指定することになっています．半径の方が使いやすいので，Y=En を用意しました．次のように使います．(cid:2) (cid:3)Y=EnY=begin{picture}(3,3)%Y=def=YC{(1.5,1.5)}% −→Y=En=YC{1}%Y=end{picture}(cid:4) (cid:5)すなわち，Y=En は，中心と半径の2つの引数をとります．半径の間接指定 半径を指定する代わりに，円周上の1点を指定して描画する方法もあります。(cid:2) (cid:3)円周上の1点を指定PY=begin{picture}(3,3)%Y=tenretu{C(1.5,1.5)s;P(2.5,2.5)ne}−→CY=kuromaru{=YC;=YP}Y=En=YC{tuukaten==YP}%Y=end{picture}(cid:4) (cid:5)直径を指定 2点を指定して，それを結ぶ線分を直径とする円を描画するコマンドY=EnT もあります。(cid:2) (cid:3)直径を指定BY=begin{picture}(3,3)%Y=tenretu{A(.5,.5)sw;B(2.5,2.5)ne}−→Y=kuromaru{=YA;=YB}Y=EnT=YA=YBAY=end{picture}(cid:4) (cid:5)4.1.2 円の破線描画円を破線で描画するには，74

### Page 82

(cid:2) (cid:3)円周を破線でY=begin{picture}(3,3)%Y=def=YC{(1.5,1.5)}% −→Y=En<hasen=[.6][.8]>=YC{1}%Y=end{picture}(cid:4) (cid:5)と<hasen=[破線の長さ][破線の間隔]>オプションを与えます。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=En<#1>#2#3<#1>: hasen=xx で円弧を破線で描画するときの[破線の長さ][破線の間隔]#2 : 中心の座標#3 : 半径4.1.3 円弧円弧を描画するために，Y=Enko を用意しました．(cid:2) (cid:3)Y=EnkoY=begin{picture}(3,2)%Y=def=YC{(2,0)}% −→Y=Enko=YC{2}{45}{150}Y=end{picture}(cid:4) (cid:5)すなわち，Y=Enko は，Y=Enko{中心}{半径}{開始角}{終了角}中心，半径，開始角，終了角と4つの引数を取ります．円弧を破線で描画するには，<#1> に<hasen=[破線の長さ][破線の間隔]>オプションを与えます。(cid:2) (cid:3)円弧を破線でY=begin{picture}(3,2)%Y=def=YC{(2,0)}%−→Y=Enko<hasen=[.6][.8]>%Y=C{2}{45}{150}Y=end{picture}(cid:4) (cid:5)点線で描画するには，<#1>に75

### Page 83

<ten=周上に置く点の個数>オプションを与えます。(cid:2) (cid:3)円弧を点線でY=begin{picture}(3,2)%Y=def=YC{(2,0)}%−→Y=Enko<ten=30>%Y=C{2}{45}{150}Y=end{picture}(cid:4) (cid:5)Y=Enkoの書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)% 円弧Y=Enko<#1>#2#3#4#5#1 : オプションhasen=xx で円弧を破線で描画するときの[破線の長さ][破線の間隔]オプションを与える。ten=xx 円周を点線で描画するときの周上の点の個数yazirusi=a : 正方向に矢印をつける=r : 負方向に矢印をつける=b : 両方向に矢印をつける=n : 矢印をつけない#2 : 中心#3 : 半径を直接与えるかtuukaten=xx として，円弧の周上の一点を与える#4 : 始め角を直接与えるかhazimeten=xx として，中心を始点，xx を終点とするベクトルの方向角を 始め角とするように指定する。#5 : 終り角を直接与えるかowariten=xx として，中心を始点，xx を終点とするベクトルの方向角を 終り角とするように指定する。始め角，終り角を六十分法の角度で与える代わりに，点を指定して，中心から指定した点に向かうベクトルの方向角で与えるオプションの利用例です。76

### Page 84

(cid:2) (cid:3)両端の間接的指定Y=begin{picture}(3,2)%Y=def=YA{(0,0)}%Y=def=YB{(0,2)}%Y=def=YC{(3,0)}% −→Y=Enko=YC{2}%{hazimeten==YB}{owariten==YA}%Y=Dashline[40]{.1}{=YC=YA=YB=YC}%Y=end{picture}(cid:4) (cid:5)半径も円周上の一点を指定することにより，間接的に与えることもできます。(cid:2) (cid:3)半径の間接的指定Y=begin{picture}(3,2)%Y=def=YA{(1,1)}%Y=def=YC{(2,0)}%−→Y=Enko=YC{tuukaten==YA}%{45}{150}Y=Kuromaru=YAY=end{picture}(cid:4) (cid:5)4.1.4 矢印付きの円弧(1) 偏角指定円弧に矢印をつけるには，Y=Enkoに<yazirusi=a>オプションをつけます。(cid:2) (cid:3)<yazirusi=a>Y=begin{picture}(3,2)%−→Y=Enko<yazirusi=a>{(2,0)}{2}{45}{150}Y=end{picture}(cid:4) (cid:5)矢印を逆向きにしたいときは，オプションの右辺値を‘r’とします。(cid:2) (cid:3)<yazirusi=r>Y=begin{picture}(3,2)%−→Y=Enko<yazirusi=r>{(2,0)}{2}{45}{150}Y=end{picture}(cid:4) (cid:5)また，オプションの右辺値を‘b’とすれば，両向きの矢印がつきます。(cid:2) (cid:3)<yazirusi=b>Y=begin{picture}(3,2)%−→Y=Enko<yazirusi=b>{(2,0)}{2}{45}{150}Y=end{picture}(cid:4) (cid:5)さらには，<hasen=..>オプションと併用も可能です。77

### Page 85

(cid:2) (cid:3)<yazirusi=b>Y=begin{picture}(3,2)%Y=Enko<hasen=[.6][.8],yazirusi=b>% −→{(2,0)}{2}{45}{150}Y=end{picture}(cid:4) (cid:5)4.1.5 矢印付きの円弧(2) 端点指定矢印付きの円弧を，半径と端点を指定して描画するのがY=ArrowArc コマンドです．(cid:2) (cid:3)Y=ArrowArcY=begin{picture}(3,2)%Y=def=YA{(3,0)}%−→Y=def=YB{(0,2)}%Y=ArrowArc{4}=YA=YBY=end{picture}(cid:4) (cid:5)半径に負の値を与えると，回転が負の方向となるように描画されます．(cid:2) (cid:3)回転の向きY=begin{picture}(3,2)%Y=def=YA{(3,0)}%−→Y=def=YB{(0,2)}%Y=ArrowArc{-4}=YA=YBY=end{picture}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=ArrowArc[#1]#2#3#4#1 :#2 : 半径（負のときは回転が負となる）#3 : 始点#4 : 終点このコマンドを造った理由の一つは，図が込み入って来たりして，文字列を該当個所に置けないとき，ゆったりしたところに文字列を置き，そこから矢線を引こう，というねらいがあります．少し曲げた方が見やすいのではないか，と思います．78

### Page 86

(cid:2) (cid:3)Y=ArrowArcの一応用Y=begin{picture}(3,2)%Y=def=YO{(0,0)}%Y=def=YA{(3,0)}%Y=def=YB{(1,2)}%αY=def=YC{(3,1)}%Y=Kakukigou=YA=YO=YC{}%−→Y=Kakukigou<2>=YC=YO=YB{$=Ybeta$}%βY=put(2.5,1.8){$=Yalpha$}%Y=ArrowArc[r]{5}%{(2.5,1.8)}{(0.45,0.05)}%Y=Drawline{=YA=YO=YC}%Y=Drawline{=YO=YB}%Y=end{picture}(cid:4) (cid:5)4.1.6 等弧記号二つの円弧の長さが等しいことを表すのに，円弧の中央部分に短い縦線を入れるコマンドがY=Toukokigouです。(cid:2) (cid:3)Y=ToukokigouY=begin{zahyou}[ul=15mm](-0.2,2.5)(-1.2,1.5)yY=smallCY=def=YO{(1,0)} B||Y=rtenretu[=YO]{A(1,0)ne;B(1,60)ne; DC(1,90)nw;D(1,150)nw}||→ AY=Enko=YO{1}{0}{60} O xY=Enko=YO{1}{90}{150}Y=Toukokigou<2>=YO=YA=YBY=Toukokigou<2>=YO=YC=YDY=Drawlines{=YA=YO=YB;=YC=YO=YD}Y=end{zahyou}(cid:4) (cid:5)書式は79

### Page 87

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Toukokigou<#1>#2#3#4#1 : 中央に配置する短い縦棒の個数（デフォルト値=1）#2 : 円弧の中心#3 : 弧の端点1#4 : 弧の端点24.1.7 扇形扇形を描画するために，Y=ougigata を用意しました．(cid:2) (cid:3)Y=ougigataY=begin{picture}(3,2)%Y=put(2,0){% −→Y=ougigata{2}{45}{150}}%Y=end{picture}(cid:4) (cid:5)すなわち，Y=ougigata は，半径，開始角，終了角と３つの引数を取ります．(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=ougigata#1#2#3#1 : 半径を直接与えるかtuukaten=xx として，円弧の周上の一点を与える#2 : 始め角を直接与えるかhazimeten=xx として，中心を始点，xx を終点とするベクトルの方向角を 始め角とするように指定する。#3 : 終り角を直接与えるかowariten=xx として，中心を始点，xx を終点とするベクトルの方向角を 終り角とするように指定する。（中心は Y=put (=YemathPut) で指定する．）4.1.8 弓形弓形を描画するために，Y=yumigata を用意しました．80

### Page 88

(cid:2) (cid:3)Y=yumigataY=begin{picture}(3,2)%Y=put(2,0){% −→Y=yumigata{2}{45}{150}}Y=end{picture}(cid:4) (cid:5)すなわち，Y=yumigata は，半径，開始角，終了角と３つの引数を取ります．(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=yumigata#1#2#3#1 : 半径を直接与えるかtuukaten=xx として，円弧の周上の一点を与える#2 : 始め角を直接与えるかhazimeten=xx として，中心を始点，xx を終点とするベクトルの方向角を 始め角とするように指定する。#3 : 終り角を直接与えるかowariten=xx として，中心を始点，xx を終点とするベクトルの方向角を 終り角とするように指定する。（中心は Y=put (=YemathPut) で指定する．）4.2楕円4.2.1 楕円軸が水平，垂直な楕円を描画するコマンドは Y=Daen です．(cid:2) (cid:3)Y=DaenY=begin{picture}(3,2)%−→Y=Daen{(2,1)}{2}{1}%Y=end{picture}(cid:4) (cid:5)中心，横方向半径，縦方向半径 と三つの引数をとります．(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Daen#2#3#4#1 : 中心の座標#2 : 横軸方向の半径#3 : 縦軸方向の半径81

### Page 89

4.2.2 楕円弧楕円の一部を描画する Y=Daenko です．(cid:2) (cid:3)Y=DaenkoY=begin{picture}(4,2)%Y=Put{(2,1)}{% −→Y=Daenko{2}{1}{-90}{90}}%Y=end{picture}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Daenko<#1>#2#3#4#5#1 : key=valhasen=[破線の長さ][破線の間隔]yazirusi=a : 正方向に矢印をつける=r : 負方向に矢印をつける=b : 両方向に矢印をつける=n : 矢印をつけない#2 : 横軸方向の半径#3 : 縦軸方向の半径#4 : 始め角#5 : 終り角（中心は Y=put (=YemathPut) で指定する．）4.2.3 破線（楕）円（弧）を破線で描画するには Y=Daenko に<hasen=..>オプションを与えます．(cid:2) (cid:3)楕円弧の破線Y=begin{picture}(4,2)%Y=Put{(2,1)}{% −→Y=Daenko<hasen=[1]>{2}{1}{0}{180}}%Y=end{picture}(cid:4) (cid:5)破線の長さを変更するには，オプションの値を変更します．上の図を標準として比率を指定します．82

### Page 90

(cid:2) (cid:3)破線の長さY=begin{picture}(4,2)%Y=Put{(2,1)}{%−→Y=Daenko<hasen=[0.5]>{2}{1}%{0}{180}}%Y=end{picture}(cid:4) (cid:5)破線の間隔を調整するには，第2の [..]オプションです．やはり，標準に対する比率です．(cid:2) (cid:3)破線の間隔Y=begin{picture}(4,2)%Y=Put{(2,1)}{%−→Y=Daenko<hasen=[0.5][0.5]>%{2}{1}{0}{180}}%Y=end{picture}(cid:4) (cid:5)なお，横軸方向の半径と縦軸方向の半径を同じ値にすれば，円（弧）を破線で描画することもできます．4.2.4 矢印（楕）円（弧）に矢印をつけるには Y=Daenko に<yazirusi=..>オプションを与えます．(cid:2) (cid:3)楕円弧に矢印Y=begin{picture}(4,2)%Y=Put{(2,1)}{%→Y=Daenko<yazirusi=b>%{2}{1}{0}{90}}%Y=end{picture}(cid:4) (cid:5)4.2.5 回転記号楕円弧に矢印を付ける機能を利用して，回転軸の周りに回転を表す記号を付けることができます。(cid:2) Y=kaitenkigou (cid:3) yY=begin{zahyou}[ul=10mm](-2,2)(-1,1)→ O xY=Put{(1.5,0)}{=Ykaitenkigou}Y=end{zahyou}(cid:4) (cid:5)y軸の周りの回転を表すには，[90]オプションを付けます。83

### Page 91

y(cid:2) (cid:3)y軸の周りの回転Y=begin{zahyou}[ul=10mm](-2,2)(-2,2)→ O xY=Put{(0,1.5)}{=Ykaitenkigou[90]}Y=end{zahyou}(cid:4) (cid:5)ここで，矢印は正の回転を表すようにつきますが，これを負の回転を表すようにつけるためには<muki=r>オプションを用います。(cid:2) (cid:3)矢印を逆向きyY=begin{zahyou}[ul=10mm](-1,3.5)(-.5,.5)→ O xY=Put{(3,0)}{=Ykaitenkigou<muki=r>}Y=end{zahyou}(cid:4) (cid:5)<..>オプションは，本来は倍率指定オプションです。(cid:2) (cid:3)倍率指定yY=begin{zahyou}[ul=10mm](-1,3.5)(-.5,.5)→ O xY=Put{(3,0)}{=Ykaitenkigou<1.5>}Y=end{zahyou}(cid:4) (cid:5)倍率指定と矢印向きなど他のオプションと併用したいときは<bairitu=..>オプションを用います。(cid:2) (cid:3)倍率指定Y=begin{zahyou}[ul=10mm](-1,3.5)(-.5,.5) yY=Put{(3,0)}{% → O xY=kaitenkigou<bairitu=1.5,muki=r>}Y=end{zahyou}(cid:4) (cid:5)楕円のサイズは，デフォルトではtyouhankei=3mmtanhankei=1.5mmとしてあります。これを変更するオプションです：(cid:2) (cid:3)サイズ変更Y=begin{zahyou}[ul=10mm](-1,3.5)(-.5,.5) yY=Put{(3,0)}{% → O xY=kaitenkigou<tanhankei=3mm>}Y=end{zahyou}(cid:4) (cid:5)84

### Page 92

楕円の右端を一部切って矢印をつけていますが，切る場所を変えるオプションを紹介します。(cid:2) (cid:3)矢印の位置変更Y=begin{zahyou}[ul=10mm](-1,3.5)(-.5,.5) yY=Put{(3,0)}{=Ykaitenkigou% → O x<hazimekaku=-165,owarikaku=165>}Y=end{zahyou}(cid:4) (cid:5)デフォルト値はhazimekaku=15, owarikaku=345となっています。回転オプションと併用するときは，上記の指定角は回転する前の状況での値です。上の図を90◦回転してみましょう。(cid:2) (cid:3)回転との併用Y=begin{zahyou}[ul=10mm]% y(-1,3.5)(-.5,1.5)Y=Put{(0,1)}{=Ykaitenkigou% →<hazimekaku=-165,% O xowarikaku=165>[90]}Y=end{zahyou}(cid:4) (cid:5)最後に，Y=kaitenkigouの書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)直線のまわりに回転させることを表す記号Y=kaitenkigou<#1>[#2]#1 : 倍率または key=valbairitu= （倍率）デフォルト値 : 1muki = r/n nr で，負の向きn で，正の向きhazimekaku= 15owarikaku= 345tyouhankei= 3mmtanhankei= 1.5mm#2 : 回転角位置は Y=emathPut で指定直線y =xの周りに回転させる記号を，2倍のサイズで描いてみます。85

### Page 93

y(cid:2) (cid:3)y軸の周りの回転Y=begin{zahyou}[ul=10mm](-2,2)(-2,2)Y=Put{(1.8,1.8)}{=Ykaitenkigou<2>[45]} → O xY=kTyokusen=YO{45}{}{}Y=end{zahyou}(cid:4) (cid:5)86

### Page 94

5円・直線の交点直線と直線，円と直線，円と円の交点を求めるコマンド類です．コマンド名は Y=*and* の形で *のところはC : 円L : 2点を与えた直線l : 1点と方向ベクトルを与えた直線k : 1点と方向角を与えた直線のいずれかで，Y=CandCY=CandLY=CandlY=CandkY=LandLY=LandlY=landlY=LandkY=kandkの9種類があります．5.1 2直線の交点5.1.1 2直線の交点(1) Y=LandLY=LandL の使用例です．(cid:2) (cid:3)Y=LandLY=begin{picture}(3.4,4)(-.2,-.5)%Y=tenretu{B(0,0)w;C(3,0)e;A(2,3)n}Y=Bunten=YA=YB21=YFY=Bunten=YC=YA21=YE AY=LandL=YB=YE=YC=YF=YP% BEとCFの交点PEY=LandL=YA=YP=YB=YC=YD% APとBCの交点DY=Put=YF[nw]{F}% −→FY=Put=YE[ne]{E}%PY=Put=YD[s]{D}%Y=Put=YP(-1.5pt,-3pt)[lt]{P}% B CDY=Drawlines{=YA=YD;=YB=YE;=YC=YF}%Y=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=end{picture}(cid:4) (cid:5)87

### Page 95

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=LandL#1#2#3#4#52点 #1, #2 を通る直線と2点 #3, #4 を通る直線の交点を #5 に与える．5.1.2 2直線の交点(2) Y=Landl(cid:4)ABC の辺AB上に ∠BCD=30◦ となる点Dを求める例です．(cid:2) (cid:3)Y=LandlY=begin{zahyou*}[ul=12mm]%(-.5,3.5)(-.5,1.5)=YsmallY=tenretu{A(1.732,1)n;B(0,0)w;C(3,0)e}AY=Landl=YA=YB=YC{(-1.7321,1)}=YD DY=Put=YD(-2pt,1pt)[b]{D}% −→30◦Y=Kakukigou=YD=YC=YB<Hankei=10mm>% B C(-2pt,2pt)[r]{=Yfootnotesize 30=YDeg}%Y=Drawline{=YC=YD}%Y=thicklines=YDrawline{=YA=YB=YC=YA}%Y=end{zahyou*}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Landl#1#2#3#4#52点 #1, #2 を通る直線と点 #3 を通り，方向ベクトルが #4 の直線の交点を #5 に与える．5.1.3 2直線の交点(3) Y=landl直線を1点と方向ベクトルで与える場合の，交点を求めるコマンドがY=landl です．88

### Page 96

(cid:2) (cid:3)Y=landlY=begin{zahyou*}[ul=10mm]%(-.5,3.5)(-.5,2.2)Y=tenretu{B(0,0)w;C(3,0)e}Y=landl=YB{(1,1)}=YC{(-1,1.7321)}=YAY=Kakukigou=YC=YB=YA{}−→Y=Put=YB(4mm,4pt)[lb]{45=YDeg}45◦ 60◦Y=Kakukigou<2>=YA=YC=YB{} B CY=Put=YC(-4mm,4pt)[rb]{60=YDeg}Y=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=end{zahyou*}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=landl#1#2#3#4#5点 #1 を通り, 方向ベクトルが #2 の直線と点 #3 を通り，方向ベクトルが #4 の直線の交点を #5 に与える．5.1.4 2直線の交点(4) Y=Landk直線を1点と方向角(x軸の正の向きとなす角—六十分法）で与えた場合です。まずは Y=kandkの使用例です。(cid:2) (cid:3)Y=kandkY=begin{zahyou*}(-.5,4)(-.5,3)Y=tenretu{B(0,0)s;C(3,0)s}Y=kandk=YB{60}=YC{135}=YD DY=Put=YD[n]{D}−→Y=Kakukigou=YC=YB=YD(2pt,2pt)[l]{60=YDeg}Y=Kakukigou=YXMAX=YC=YD[ne]{135=YDeg}135◦60◦Y=Drawline{=YB=YC=YD=YB}%B CY=Hasen{=YC=YXMAX}Y=end{zahyou*}(cid:4) (cid:5)89

### Page 97

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=kandk#1#2#3#4#5点 #1 を通り, 方向角が #2 の直線と点 #3 を通り，方向角が #4 の直線の交点を #5 に与える．ついで，Y=Landk の使用例です。(cid:2) (cid:3)Y=LandkY=begin{zahyou*}[ul=10mm]%(-.5,3.5)(-.5,1.5)AY=tenretu{B(0,0)s;A(2,1)n;C(3,0)s}Y=Landk=YB=YC=YA{60}=YD−→ 60◦Y=Kakukigou=YC=YD=YA[ne]{60=YDeg} B CY=Drawlines{=YB=YC;=YA=YD}Y=end{zahyou*}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Landk#1#2#3#4#52点 #1, #2 を通る直線と点 #3 を通り，方向角が #4 の直線の交点を #5 に与える．5.1.5 垂線の足三角形の頂点から対辺（またはその延長）に下した垂線の足を求めるコマンド Y=Suisen です．(cid:2) (cid:3)Y=SuisenY=begin{picture}(3,3)%Y=def=YO{(0,0)}%Y=def=YA{(3,0)}%Y=def=YB{(2,3)}%Y=Suisen=YO=YA=YB=YH−→Y=Tyokkakukigou=YO=YH=YAY=Drawline{=YO=YH}%Y=thicklinesY=Drawline{=YO=YA=YB=YO}%Y=thinlinesY=end{picture}(cid:4) (cid:5)90

### Page 98

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Suisen#1#2#3#4点 #1 から直線 #2#3 へ下ろした垂線の足を #4 にセット関連して，直線が1点と方向ベクトルまたは方向角で与えられている場合に用いるコマンドがそれぞれY=mSuisen, Y=kSuisen です。使用例を一つずつあげます。(cid:2) (cid:3)Y=mSuisenyY=unitlength9mm=YfootnotesizePY=begin{zahyou}(-3,3)(-3,3)Y=tenretu{A(-2,-1)s;P(-1,2)n}Y=def=YhoukouV{(1,1)} QY=mSuisen=YP=YA=YhoukouV=YQ→ O xY=kuromaru{=YA;=YP;=YQ}Y=Put=YQ[se]{Q}AY=Drawline{=YP=YQ}Y=Tyokkakukigou=YP=YQ=YAY=mTyokusen=YA=YhoukouV{}{}Y=end{zahyou}(cid:4) (cid:5)(cid:2) (cid:3)Y=kSuisen yY=unitlength9mm=YfootnotesizePY=begin{zahyou}(-3,3)(-3,3)QY=tenretu{A(-2,-1)s;P(-1,2)n}Y=def=Ykaku{60}Y=kSuisen=YP=YA=Ykaku=YQ → O xY=kuromaru{=YA;=YP;=YQ}Y=Put=YQ[s]{Q} AY=Drawline{=YP=YQ}=YTyokkakukigou=YP=YQ=YAY=kTyokusen=YA=Ykaku{}{}Y=end{zahyou}(cid:4) (cid:5)5.1.6 直線に関する対称点前節の垂線を発展させて，点の直線に関する対称点を求めるコマンドY=Taisyouten 2点を通る直線Y=mTaisyouten 1点と方向ベクトルを指定した直線Y=kTaisyouten 1点と方向角を指定した直線を新設しました。以下，その使用例を並べます。91

### Page 99

(cid:2) (cid:3) yY=TaisyoutenPY=unitlength9mm=YfootnotesizeY=begin{zahyou}(-3,3)(-3,3)Y=tenretu{A(-2,-1)s;B(1,1)s;P(-1,2)n} BY=Taisyouten=YP=YA=YB=YQ→ O xY=kuromaru{=YA;=YB;=YP;=YQ}Y=Put=YQ[s]{Q}AY=Drawline{=YP=YQ} QY=Tyokusen=YA=YB{}{}Y=end{zahyou}(cid:4) (cid:5)(cid:2) (cid:3)Y=mTaisyouten yY=unitlength9mm=Yfootnotesize PY=begin{zahyou}(-3,3)(-3,3)Y=tenretu{A(-2,-1)s;P(-1,2)n}Y=def=YhoukouV{(1,1)}Y=mTaisyouten=YP=YA=YhoukouV=YQ → O Q xY=kuromaru{=YA;=YP;=YQ}Y=Put=YQ[s]{Q} AY=Drawline{=YP=YQ}Y=mTyokusen=YA=YhoukouV{}{}Y=end{zahyou}(cid:4) (cid:5)(cid:2) (cid:3)Y=kTaisyouten yY=unitlength9mm=Yfootnotesize PY=begin{zahyou}(-3,3)(-3,3)Y=tenretu{A(-2,-1)s;P(-1,2)n} QY=def=Ykaku{60}Y=kTaisyouten=YP=YA=Ykaku=YQ → O xY=kuromaru{=YA;=YP;=YQ}Y=Put=YQ[s]{Q} AY=Drawline{=YP=YQ}Y=kTyokusen=YA=Ykaku{}{}Y=end{zahyou}(cid:4) (cid:5)対称の中心（垂線の足）が必要なときは，オプション引数 [#4] にその点を受取る制御綴を与えておきます。92

### Page 100

(cid:2) (cid:3)対称の中心yY=unitlength9mm=YfootnotesizePY=begin{zahyou}(-3,3)(-3,3)Y=tenretu{A(-2,-1)s;B(1,1)s;P(-1,2)n}||Y=Taisyouten=YP=YA=YB[=YH]=YQ BY=kuromaru{=YA;=YB;=YP;=YQ;=YH}→ O xY=Put=YQ[s]{Q}||Y=Tyokkakukigou=YP=YH=YAAY=touhenkigou<2>{=YP=YH;=YH=YQ} QY=Drawline{=YP=YQ}Y=Tyokusen=YA=YB{}{}Y=end{zahyou}(cid:4) (cid:5)この機能は，Y=mTaisyouten, Y=kTaisyouten にも使用できます。(cid:2) (cid:3)Y=mTaisyoutenY=unitlength9mm=Yfootnotesize yY=begin{zahyou}(-3,3)(-3,3) PY=tenretu{A(-2,-1)s;P(-1,2)n}||Y=def=YhoukouV{(1,1)}Y=mTaisyouten=YP=YA=YhoukouV[=YH]=YQ||Y=kuromaru{=YA;=YP;=YQ;=YH} → O Q xY=Put=YQ[s]{Q}Y=Drawline{=YP=YQ} AY=Tyokkakukigou=YP=YH=YAY=touhenkigou<2>{=YP=YH;=YH=YQ}Y=mTyokusen=YA=YhoukouV{}{}Y=end{zahyou}(cid:4) (cid:5)(cid:2) (cid:3)Y=kTaisyoutenY=unitlength9mm=Yfootnotesize yY=begin{zahyou}(-3,3)(-3,3) PY=tenretu{A(-2,-1)s;P(-1,2)n} ||||Y=def=Ykaku{60} QY=kTaisyouten=YP=YA=Ykaku[=YH]=YQY=kuromaru{=YA;=YP;=YQ;=YH} → O xY=Put=YQ[s]{Q}Y=Drawline{=YP=YQ} AY=Tyokkakukigou=YP=YH=YAY=touhenkigou<2>{=YP=YH;=YH=YQ}Y=kTyokusen=YA=Ykaku{}{}Y=end{zahyou}(cid:4) (cid:5)93

### Page 101

5.2円と直線の交点5.2.1 円と直線の交点(1) Y=CandL(cid:4)ABCの中線AMの延長が(cid:4)ABCの外接円と交わる点Dを求めます．(cid:2) (cid:3)Y=CandLY=begin{picture}%(4,4)(-2,-2)%Y=def=YO{(0,0)}%Y=kyokuTyoku(2,60)=YAY=kyokuTyoku(2,-150)=YBY=kyokuTyoku(2,-30)=YCY=Bunten=YB=YC{1}{1}=YM −→Y=CandL=YO{2}=YA=YM=YD=YEY=Drawline{=YA=YD}%Y=En=YO{2}%Y=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=CandL#1#2#3#4#5#6Y=CandL*#1#2#3#4#5#6点 #1 を中心とし，半径 #2 の円と2点 #3, #4 を通る直線との交点を #5 と #6 にセットする．円と直線の2つの交点のどちらを #5 とするかについてはY=CandL の場合2つの交点のうち，x座標の小さい方が #52つの交点のx座標が一致するときは，y座標の小さい方が #5Y=CandL* の場合円の中心(#1)と2つの交点(#5, #6)で作られる三角形の周を#1 → #5 → #6 → #1とたどる回り方が正の回転となるように定める。（三角形がつぶれる場合は，Y=CandL の定め方に従う）5.2.2 円と直線の交点(2) Y=Candl原点中心，半径1の円と，点(2,0)を通り傾き−1の直線との交点を求めます．394

### Page 102

(cid:2) (cid:3)Y=CandlY=begin{picture}%(4,4)(-2,-2)%Y=def=YO{(0,0)}%Y=def=YA{(2,0)}% −→Y=Candl=YO{1}=YA{(3,-1)}=YP=YQY=Drawline{=YA=YP}%Y=En=YO{1}%Y=end{picture}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Candl#1#2#3#4#5#6点 #1 を中心とし，半径 #2 の円と点 #3 を通り, 方向ベクトルが #4 の直線との交点を #5 と #6 にセットする．2つの交点のうち，どちらを #5 とするかは Y=CandL と同じ。5.2.3 円と直線の交点(3) Y=Candk原点中心，半径1の円と，点(2,0)を通り傾き方向角15◦の直線との交点を求めます．(cid:2) (cid:3)Y=CandlY=begin{picture}%(4,4)(-2,-2)%Y=def=YO{(0,0)}%Y=def=YA{(2,0)}% −→Y=Candk=YO{1}=YA{15}=YP=YQY=Drawline{=YA=YP}%Y=En=YO{1}%Y=end{picture}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Candk#1#2#3#4#5#6点 #1 を中心とし，半径 #2 の円と点 #3 を通り, 方向角が #4 の直線との交点を #5 と #6 にセットする．2つの交点のうち，どちらを #5 とするかは Y=CandL と同じ。95

### Page 103

5.3 Y=CandC円と円の交点線分BCの長さが7のとき，Bを中心とする半径5の円と，Cを中心とする半径3の円との交点をAとすれば，3辺の長さが7, 5, 3の三角形がえられます．(cid:2) (cid:3)Y=CandC{Y=unitlength2mm%Y=begin{picture}%(12,14)(-7,-7)%Y=def=YB{(0,0)}%Y=def=YC{(7,0)}% −→Y=CandC=YB{5}=YC{3}=YD=YAY=Drawline{=YA=YB=YC=YA}%Y=En=YB{5}%Y=En=YC{3}%Y=end{picture}}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=CandC#1#2#3#4#5#6点 #1 を中心，半径 #2 の円と点 #3 を中心，半径 #4 の円との交点を#5と#6にセット円と円の2つの交点のどちらを #5 とするかについてはY=CandC の場合2つの交点のうち，x座標の小さい方が #52つの交点のx座標が一致するときは，y座標の小さい方が #5Y=CandC* の場合円の中心(#1)と2つの交点(#5, #6)で作られる三角形の周を#1 → #5 → #6 → #1とたどる回り方が正の回転となるように定める。（三角形がつぶれる場合は，Y=CandC の定め方に従う）96

### Page 104

6楕円と直線の交点6.1 Y=EandL円と直線の交点を求めるコマンドを発展させ，楕円と直線の交点を求めるコマンドがY=EandLです。その書式は(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=def=YEandL#1#2#3#4#5#6#7{%#1 : 楕円の中心#2 : x軸方向の半径#3 : y軸方向の半径#4 : 直線上の点1#5 : 直線上の点2#6 : 交点1を受け取る制御綴#7 : 交点2を受け取る制御綴使用例です。2点A(−1, 0), B(2, 1)を通る直線と楕円x2+y2 =1との交点P, Qを求めます。4(cid:2) (cid:3)Y=EandLY=begin{zahyou}[ul=10mm]%(-2.5,2.5)(-1.5,1.5)yY=tenretu{A(-1,0)nw;B(2,1)nw}1 BY=kuromaru{=YA;=YB}QY=Put=YB[syaei=xy,xpos={[ne]}, A 2ypos={[ne]}]{} → O xPY=Daen=YO{2}{1}=YTyokusen=YA=YB{}{}Y=EandL=YO{2}{1}=YA=YB=YP=YQY=Put=YP[s]{P}=YPut=YQ[s]{Q}Y=kuromaru{=YP;=YQ}Y=end{zahyou}(cid:4) (cid:5)6.2 Y=Eandl直線を1点と方向ベクトルで与える場合です。(x−2)2楕円 +(y−1)2 =1と，点A(0, 1)を通り方向ベクトルが(2, 1)の直線の交点を求め4ます。この場合，点Aは楕円上にありますから，交点の一方PとAは一致します。97

### Page 105

(cid:2) (cid:3)Y=EandlY=begin{zahyou}[ul=10mm]%(-.5,4.5)(-.5,2.5)Y=tenretu{A(0,1)nw;C(2,1)se}yY=Put=YC[syaei=xy,ypos={[ne]}]{}QY=def=Ym{(2,1)}%A1Y=Kuromaru{=YA} → P CY=Daen=YC{2}{1}Y=mTyokusen=YA=Ym{}{} O 2 xY=Eandl=YC{2}{1}=YA=Ym=YP=YQY=Put=YP[se]{P}=YPut=YQ[s]{Q}Y=kuromaru{=YP;=YQ}Y=end{zahyou}(cid:4) (cid:5)6.3 Y=Eandk直線を1点と方向角（六十分法）で与える場合です。(x−2)2楕円 +(y−1)2 = 1と，点A(1, 2)を通り方向角が−45◦ である直線との交点を求め4ます。(cid:2) (cid:3)Y=EandkY=begin{zahyou}[ul=10mm]%(-.5,4.5)(-.5,2.5)Y=tenretu{A(1,2)ne;C(2,1)ne}yY=Put=YA[syaei=xy]{}A2Y=Put=YC[syaei=xy]{} PY=def=Ym{(2,1)}% C→ 1Y=Kuromaru{=YA}QY=Daen=YC{2}{1}O 1 2 xY=kTyokusen=YA{-45}{}{}Y=Eandk=YC{2}{1}=YA{-45}=YP=YQY=Put=YP[s]{P}=YPut=YQ[n]{Q}Y=kuromaru{=YP;=YQ}Y=end{zahyou}(cid:4) (cid:5)6.4楕円の接線6.4.1 Y=DaennoSessen楕円の周上の点における接線の方向ベクトルを求めるコマンドです。98

### Page 106

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=DaennoSessen#1#2#3#4#5{%#1 : 楕円の中心#2 : x軸方向の半径#3 : y軸方向の半径#4 : 接点#5 : 接線の方向ベクトルを受け取る制御綴(x−1)2 y2 (cid:13)5√ (cid:14)楕円 + =1上の点A , 3 における接線を引きます。9 4 2(cid:2) (cid:3)Y=EandLY=begin{zahyou}[ul=5mm]% y(-2.5,5)(-2.5,4)AY=tenretu{A(2.5,1.732)ne;[]C(1,0)}Y=Kuromaru=YA →Y=Daen=YC{3}{2} O xY=DaennoSessen=YC{3}{2}=YA=YuvecY=mTyokusen=YA=Yuvec{}{}Y=end{zahyou}(cid:4) (cid:5)6.4.2 Y=DaenniSessenつぎは，楕円の外部の点から楕円に引いた接線の接点を求めます。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=DaenniSessen#1#2#3#4#5#6{%#1 : 楕円の中心#2 : x軸方向の半径#3 : y軸方向の半径#4 : 楕円の外部の点#5 : 接点1を受け取る制御綴#6 : 接点2を受け取る制御綴(x−3)2 (y+2)2楕円 + =1に点A(6, 1)から接線を引きます。9 499

### Page 107

(cid:2) (cid:3)Y=DaennnoSessenY=begin{zahyou}[ul=5mm]%(-1,7)(-5,2)yY=tenretu{A(6,1)nw;C(3,-2)se}A1Y=Put=YC[syaei=xy,xpos={[se]}]{}6Y=Put=YA[syaei=xy,xpos={[ne]}]{} O 3 xY=Kuromaru{=YA} → −2Y=Daen=YC{3}{2} CY=DaenniSessen=YC{3}{2}=YA=YP=YQY=kuromaru{=YP;=YQ;=YC}Y=Tyokusen=YA=YP{}{}Y=Tyokusen=YA=YQ{}{}Y=end{zahyou}(cid:4) (cid:5)6.4.3 Y=Earg楕円の媒介変数表示x=x0+acosθy =y0+bsinθにおいて，周上の点(x, y)を指定してθを求めるマクロです。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Earg#1#2#3#4#5{%#1 : 楕円の中心#2 : x軸方向の半径#3 : y軸方向の半径#4 : 周上の点#5 : 媒介変数の値（六十分法）100

### Page 108

(cid:2) (cid:3)Y=EargY=begin{zahyou*}[ul=5mm](-3,5)(-4,6)Y=tenretu{[]C(1,-1);A(2,5)n}AY=DaenniSessen=YC{3}{2}=YA=YP=YQY=Put=YP[nw]{P}=YPut=YQ[ne]{Q}Y=kuromaru{=YP;=YQ}Y=Earg=YC{3}{2}=YP=YargP→Y=Earg=YC{3}{2}=YQ=YargQPQY=Put=YC{=YDaenko<hasen=[.5][.5]>%{3}{2}{=YargQ}{=YargP}}Y=Add=YargQ{360}=YargQQY=Put=YC{=YDaenko{3}{2}{=YargP}{=YargQQ}}Y=Drawline{=YP=YA=YQ}Y=end{zahyou*}(cid:4) (cid:5)101

### Page 109

7 (1)塗りつぶし7.1多角形内部の塗りつぶし多角形の内部を塗りつぶすコマンド Y=Nuritubusi です．(cid:2) (cid:3)多角形の塗りつぶしY=begin{picture}(4,5)(0,-1.5)Y=def=YA{(0,0)}%Y=def=YB{(4,0)}%Y=def=YC{(1,3)}%Y=Gaisetuen=YA=YB=YC%Y=Drawline{=YvGaisin=YA}%Y=Drawline{=YvGaisin=YB}% −→Y=Drawline{=YvGaisin=YC}%Y=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlines% 塗りつぶしY=Nuritubusi{=YA=YvGaisin=YB=YA}%Y=end{picture}(cid:4) (cid:5)Y=Nuritubusi の書式は(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Nuritubusi[#1]#2#1 : 塗る濃さ( 0 と 1 の間の数． 0 は真っ白，1は真っ黒．デフォルトは 0.5)#2 : 多角形の点列（閉じていなければなりません．)7.2円内部の塗りつぶし円の内部を塗りつぶすのが Y=En* コマンドです．(cid:2) (cid:3)円の塗りつぶしY=begin{picture}(4,4)Y=def=YA{(2,2)}%−→Y=En*=YA{2}%Y=En=YA{2}%Y=end{picture}(cid:4) (cid:5)102

### Page 110

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=En*[#1]#2#3#1 : 塗る濃さ( 0 と 1 の間の数． 0 は真っ白，1は真っ黒．デフォルトは 0.5)#2 : 中心の座標#3 : 半径オプション引数[..]で濃さを指定することができます．デフォルトは0.5です．特に0を指定すると白抜きとなります．(cid:2) (cid:3)白抜きY=begin{picture}(4,4)Y=def=YA{(2,2)}%Y=def=YB{(1,2)}% −→Y=En*=YA{2}%Y=En*[0]=YB{1}%Y=end{picture}(cid:4) (cid:5)7.3扇形の塗りつぶし(cid:2) (cid:3)扇形の塗りつぶしY=begin{picture}(4,4)Y=def=YA{(2,2)}%−→Y=Put=YA{%Y=ougigata*{2}{-30}{270}}%Y=end{picture}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=ougigata*[#1]<#2>#3#4#5#1 : 塗りつぶしの濃さ#2 : 境界線描画オプション<border=1> で境界線を描画する。#3 〜 #5 : Y=ougigata の #1〜#3 と同じ（中心は Y=put (=YPut) で指定する．）103

### Page 111

7.4弓形の塗りつぶし(cid:2) (cid:3)弓形の塗りつぶしY=begin{picture}(4,4)Y=def=YA{(2,2)}%−→Y=Put=YA{%Y=yumigata*{2}{-30}{270}}%Y=end{picture}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=yumigata*[#1]<#2>#3#4#5#1 : 塗りつぶしの濃さ#2 : 境界線描画オプション<border=1> で境界線を描画する。#3 〜 #5 : Y=yumigata の #1〜#3 と同じ（中心は Y=put (=YPut) で指定する．）7.5楕円の塗りつぶし(cid:2) (cid:3)楕円の塗りつぶしY=begin{picture}(4,2)Y=def=YA{(2,1)}% −→Y=Daen*=YA{2}{1}%Y=end{picture}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Daen*[#1]#2#3#4#1 : 塗る濃さ( 0 と 1 の間の数． 0 は真っ白，1は真っ黒．デフォルトは 0.5)#2 : 中心の座標#3 : 横軸方向の半径#4 : 縦軸方向の半径104

### Page 112

7.6弓形（楕円弧）の塗りつぶし(cid:2) (cid:3)弓形（楕円弧）の塗りつぶしY=begin{picture}(4,2)Y=def=YA{(2,1)}%−→Y=Put=YA{%Y=Daenko*{2}{1}{0}{180}}%Y=end{picture}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Daenko*[#1]#2#3#4#5#1 : 塗る濃さ( 0 と 1 の間の数． 0 は真っ白，1は真っ黒．デフォルトは 0.5)#2 : 横軸方向の半径#3 : 縦軸方向の半径#4 : 始め角#5 : 終り角（中心は Y=put (=YPut) で指定する．）7.7カラー指定Y=En*, Y=Nuritubusiにおいて，色をつけるときは少々厄介なことがあります。7.7.1 Y=colorによる塗り色指定次の例では，(cid:2) (cid:3)Y=colorによる塗り色指定Y=begin{picture}(50,50)→Y=color{red}=Yput(25,25){=Ycircle*{40}}Y=end{picture}(cid:4) (cid:5)さて，あなたの環境では円は何色で塗りつぶされていますか。実は，それは dvi-wareに依存するのです。emathでは.tex ----> .dvi by platex.dvi ----> .ps by dvips(.ps ----> .pdf by Distiller)を標準としていますが，この方式で作成される .ps(, .pdf) は真っ黒に塗りつぶされています。赤はかけらも見えません。105

### Page 113

注 このあたり，さらに分析をしておきます。Y=color{red}=Ycircle*{..}は分析するとY=color{red}=Yspecial{bk}=Ycircle{..}となります。この順序を一部入れ替えてY=special{bk}=Ycolor{red}=Ycircle{..}とすると，dvipsで作られる .ps ファイルも円の内部が赤くなります。(cid:2) (cid:3)Y=colorコマンド発行のタイミングY=begin{picture}(50,50)Y=put(25,25){=Ycolor{red}=Yspecial{bk}=Ycircle{40}}Y=end{picture} →Y=begin{picture}(50,50)Y=put(25,25){=Yspecial{bk}=Ycolor{red}=Ycircle{40}}Y=end{picture}(cid:4) (cid:5)2つの円が描画されますが，dvipsで変換した .ps ファイルでは，円の内部は上は黒下は赤で塗りつぶされます。7.7.2 Y=En*の[nuriiro=..]オプションそこで，emathでは，En*などに[nuriiro=...]オプションをつけることで内部に色をつけることにしています。(cid:2) (cid:3)Y=En*の[nuriiro=..]オプションY=begin{picture}(50,50)→Y=En*[nuriiro=red]{(25,25)}{20}Y=end{picture}(cid:4) (cid:5)注 現時点では，[nuriiro=..]オプションではなく，Y=colorコマンドを用いても，同様の結果を得ることができます。(cid:2) (cid:3)暫定仕様Y=begin{picture}(50,50)→Y=color{red}=YEn*{(25,25)}{20}Y=end{picture}(cid:4) (cid:5)106

### Page 114

しかし，将来的にはこの方式は破産する予感がありますので，[nuriiro=..]オプションの使用を推奨します。7.7.3 円周の色は？円の内部は色付けができましたが，円周は黒のままですねぇ〜。これはtpic specialsの仕様かも知れません。いや，そもそもtpic specialsはカラー対応しているんでしょうか。浅学にしてわかりません。(^^ゞそこで何とかの上塗りをすることとします。(cid:2) (cid:3)Y=En*の[border=..]オプションY=begin{picture}(50,50)→Y=En*[nuriiro=red,border=red]{(25,25)}{20}Y=end{picture}(cid:4) (cid:5)[border=red]オプションで円周を赤で上塗りしました。円周も赤になったかに見えますが，よく見ると元の黒が一部はみ出していますね。赤の上塗りをもう少し線を太くすれば良いかもしれませんが．．．．．．．しかし，労多くして何とやらという気もします。カラーはやはりPostScriptで扱うべきものでしょうか。注 tpic specialsでも円・楕円と多角形では，結果が異なり，前者は境界が黒で描画されますが，後者は境界は描画されません。どうも，tpic specialsでカラーを扱うのは気が進みませんね。(cid:2) (cid:3)Y=Nuritubusiの場合Y=begin{picture}(50,50)Y=Nuritubusi[nuriiro=red]{% →(0,0)(50,0)(50,50)(10,40)}Y=end{picture}(cid:4) (cid:5)7.7.4 PostScriptでは以上の考察から，カラー塗りつぶしはPostScript --- pszahyou環境を使用するのがよさそうです。107

### Page 115

8 (1)斜線塗り前節のコマンドの末尾に更に * を付加すると，斜線塗りとなります．8.1多角形まずは，多角形の内部に斜線を引いてみます．(cid:2) (cid:3)多角形の内部に斜線Y=begin{picture}(4,4)Y=def=YA{(0,0)}%Y=def=YB{(0,4)}%Y=def=YC{(2,3)}% −→Y=def=YD{(4,0)}%Y=Nuritubusi*{=YA=YB=YC=YD=YA}%Y=Drawline{=YA=YB=YC=YD=YA}%Y=end{picture}(cid:4) (cid:5)Y=Nuritubusi* の書式は(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Nuritubusi*[#1]<#2>#3#1 : 斜線の方向角( -90 と 90 の間の数（単位は度）．デフォルトは 45)#2 : 斜線の間隔 （デフォルトは 0.125 ）#3 : 多角形の点列（閉じていなければなりません．)8.2円円の内部を斜線塗りする例です．[-45]オプションをつけて，斜線の方向角を変更してみました．(cid:2) (cid:3)円の内部に斜線Y=begin{picture}(4,4)Y=def=YA{(2,2)}%−→Y=En**[-45]=YA{2}%Y=En=YA{2}%Y=end{picture}(cid:4) (cid:5)Y=En** の書式です．108

### Page 116

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=En**[#1]<#2>#3#4#1 : 斜線の方向角( -90 と 90 の間の数（単位は度）．デフォルトは 45)#2 : 斜線の間隔 （デフォルトは 0.125 ）#3 : 中心の座標#4 : 半径8.3扇形などY=Daen**, Y=yumigata**, Y=ougigata**, Y=Daenko**, Y=Nuritubusi* も同様です．代表的にY=yumigata** の書式を記します。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=yumigata**[#1]<#2>#3#4#5#1 : 斜線塗りの傾斜角（デフォルトは45）#2 : オプション<border=1> で境界線を描画する。<syanurisiteiten=xx> で斜線群が指定点xxを通るようにする。<syanurikankaku=xx> 斜線の間隔を指定する無名数（デフォルトは 0.125）#2 に単に無名数を記述すれば，斜線の間隔を変更する指示と解釈される。#3 〜 #5 : Y=yumigata の #1〜#3 と同じ（注）始め角と終り角の与え方の順序について2つの角を指定すると，円は2つの弓形に分割されます。そのどちらが描画されるのかという話です。始め角で指定された動径を正の向きに（時計の針と反対向き）回転して終り角で指定した動径と重なるまでを描画します。(cid:2) (cid:3)弓形の斜線塗りY=begin{picture}(4,4)Y=def=YA{(2,2)}%Y=Put=YA{% −→Y=yumigata**{2}{-30}{270}%Y=yumigata{2}{-30}{270}}%Y=end{picture}(cid:4) (cid:5)109

### Page 117

(cid:2) (cid:3)扇形の斜線塗りY=begin{picture}(4,4)Y=def=YA{(2,2)}%Y=Put=YA{% −→Y=ougigata**{2}{-30}{90}%Y=ougigata{2}{-30}{90}}%Y=end{picture}(cid:4) (cid:5)ただし，扇形の中心角は180度以下でなければなりません．優角の扇形の斜線塗りは，円を斜線塗りした後，余分の扇形を白塗りします．(cid:2) (cid:3)扇形の斜線塗り（優角の場合）Y=begin{picture}(4,4)Y=def=YA{(2,2)}%Y=En**=YA{2}%−→Y=Put=YA{%Y=ougigata*[0]{2}{-90}{-30}%Y=ougigata{2}{-30}{270}}%Y=end{picture}(cid:4) (cid:5)(cid:2) (cid:3)弓形（楕円弧）の斜線塗りY=begin{picture}(4,2)Y=def=YA{(2,1)}%Y=Put=YA{%−→Y=Daenko**{2}{1}{0}{180}%Y=drawline(-2,0)(2,0)%Y=Daenko{2}{1}{0}{180}}%Y=end{picture}(cid:4) (cid:5)8.4格子セルのぬりつぶし格子を描画する Y=kousi にセルを塗るセルの座標を指定しての Y=put,黒丸配置などのを実現する<nuri=..>オプションの説明です。<nuri=..>の右辺に，塗りつぶしを行うセルの左下コーナーの格子座標を与えます。110

### Page 118

(cid:2) (cid:3)塗りつぶしY=begin{zahyou*}[ul=4mm](0,8)(0,8)→Y=kousi<nuri={(1,2)}>(2,1.5){4}{5}Y=end{zahyou*}(cid:4) (cid:5)<nuri=..>の右辺は，コンマを含みますから，{...}でくくっておく必要があります。濃度指定は(cid:2) (cid:3)濃度指定Y=begin{zahyou*}[ul=4mm](0,8)(0,8)→Y=kousi<nuri={<thickness=1>(3,1)}>(2,1.5){4}{5}Y=end{zahyou*}(cid:4) (cid:5)<nuri=..(x,y)>における..の部分はY=emPaintのオプションとして引き渡されます。赤で塗りつぶしてみましょう。(cid:2) (cid:3)カラー塗りY=begin{zahyou*}[ul=4mm](0,8)(0,8)→Y=kousi<nuri={<nuriiro=red>(3,0)}>(2,1.5){4}{5}Y=end{zahyou*}(cid:4) (cid:5)ということなれば，斜線塗りは(cid:2) (cid:3)斜線塗りY=begin{zahyou*}[ul=4mm](0,8)(0,8)→Y=kousi<nuri={*(1,4)}>(2,1.5){4}{5}Y=end{zahyou*}(cid:4) (cid:5)斜線の角度，間隔指定も(cid:2) (cid:3)斜線角度，間隔Y=begin{zahyou*}[ul=4mm](0,8)(0,8)Y=kousi<nuri=%→{*<slashangle=-45,%slashspace=.5>(0,2)}>(2,1.5){4}{5}Y=end{zahyou*}(cid:4) (cid:5)Y=Nuritubusiのオプションと同様であることが納得いただけたでしょうか。111

### Page 119

複数のセルに対して塗りを指定するには，<nuri=..>の右辺に，上記の指定を‘;’で区切って並べれば実現できます。(cid:2) (cid:3)複数指定Y=begin{zahyou*}[ul=4mm](0,8)(0,8)Y=kousi<nuri={%(1,2);%<thickness=1>(3,1);%→<nuriiro=red>(3,0);%*(1,4);%*<slashangle=-45,slashspace=.5>(0,2)%}>(2,1.5){4}{5}Y=end{zahyou*}(cid:4) (cid:5)8.5境界線と斜線の間を空ける領域の境界を含まないことを示すのに，斜線と境界をくっつけず，少し空ける流儀があります。これを実現するにはいくつかの方法がありますが，田中 徹 さんがBBS #354に投稿された方法(1) ひとまず塗りつぶしを行う(2) 境界線を太めの白い線で上書き(3) 改めて境界線を引くは有力な手法です。そのアイデアを頂いてマクロ化してみました。emathPh.sty v 1.07でsyasentanmatu=...（単位付の長さ）オプションにより白塗りの幅を指定することにしてみました。境界線を中心として，その左右に指定した幅を有する白い曲線を描画します。（斜線の端点と境界線の距離が指定した長さとなり，白塗りの曲線の太さは指定した幅の2倍となります。）(cid:2) (cid:3)syasentanmatu=..オプションY=begin{zahyou*}[ul=6mm](0,5)(0,4)Y=tenretu*{A(0,0);B(5,0);C(4,4);D(1,3)}Y=Nuritubusi*<syasentanmatu=1mm>% →{Y=A=YB=YC=YD=YA}Y=Drawline{=YA=YB=YC=YD=YA}Y=end{zahyou*}(cid:4) (cid:5)8.6 2円の共通部分に斜線2円の共通部分を斜線塗りするのは，結構面倒です。112

### Page 120

まずは斜線塗りではなく，ベタ塗りの場合を検討します。これは，共通弦で2分割したそれぞれの弓形を塗りつぶします。(cid:2) (cid:3)2円の共通部分のベタ塗りY=unitlength12mm=YdrawaxisfalseY=begin{zahyou}(-1.5,1.5)(-1.5,2.5)Y=tenretu*{A(0,0);B(0,1)}Y=edef=YhankeiA{1}Y=edef=YhankeiB{1}Y=En=YA=YhankeiA→Y=En=YB=YhankeiBY=CandC=YA=YhankeiA=YB=YhankeiB=YP=YQY=Put=YA{=Yyumigata*=YhankeiA{%hazimeten==YQ}{owariten==YP}}Y=Put=YB{=Yyumigata*=YhankeiB{%hazimeten==YP}{owariten==YQ}}Y=end{zahyou}(cid:4) (cid:5)これが斜線塗りとなると(cid:2) (cid:3)2円の共通部分の斜線塗り(1)Y=unitlength12mm=YdrawaxisfalseY=begin{zahyou}(-1.5,1.5)(-1.5,2.5)Y=tenretu*{A(0,0);B(0,1)}Y=edef=YhankeiA{1}Y=edef=YhankeiB{1}Y=En=YA=YhankeiA→Y=En=YB=YhankeiBY=CandC=YA=YhankeiA=YB=YhankeiB=YP=YQY=Put=YA{=Yyumigata**=YhankeiA{%hazimeten==YQ}{owariten==YP}}Y=Put=YB{=Yyumigata**=YhankeiB{%hazimeten==YP}{owariten==YQ}}Y=end{zahyou}(cid:4) (cid:5)2つの弓形の斜線がつながりません。そこで，斜線塗りにsyanurisiteiten=という書式で，斜線群が通過すべき1点を指定するためのオプションを付加しました。その効果は113

### Page 121

(cid:2) (cid:3)2円の共通部分の斜線塗り(1)Y=unitlength12mm=YdrawaxisfalseY=begin{zahyou}(-1.5,1.5)(-1.5,2.5)Y=tenretu*{A(0,0);B(0,1)}Y=edef=YhankeiA{1}Y=edef=YhankeiB{1}Y=En=YA=YhankeiAY=En=YB=YhankeiB→Y=CandC=YA=YhankeiA=YB=YhankeiB=YP=YQY=Put=YA{=Yyumigata**<%syanurisiteiten==YQ>=YhankeiA{%hazimeten==YQ}{owariten==YP}}Y=Put=YB{=Yyumigata**<%syanurisiteiten==YQ>=YhankeiB{%hazimeten==YP}{owariten==YQ}}Y=end{zahyou}(cid:4) (cid:5)一見つながったように見えますが，よく目を凝らすとちょっとずれています。これが気になれば，斜線塗りする領域の境界線を多角形近似して，多角形を斜線塗りするコマンド Y=Nuritubusi を使うことになりましょう。円弧を折れ線近似するには，$n$次関数のグラフを折れ線近似する Y=KinziOresen一般の関数のグラフを折れ線近似する Y=yKinziOresen媒介変数表示の曲線を折れ線近似する Y=bKinziOresenなどを用いれば可能ですが，この際，円弧を折れ線近似するコマンドを作ってみました。名付けてY=KinziEnko 書式はあとで記述することにして，とりあえず使用効果を見てみましょう。(cid:2) (cid:3)2円の共通部分の斜線塗り(1)Y=unitlength12mm=YdrawaxisfalseY=begin{zahyou}(-1.1,1.1)(-1.5,2.5)Y=tenretu*{A(0,0);B(0,1)}Y=edef=YhankeiA{1}=Yedef=YhankeiB{1}Y=En=YA=YhankeiA=YEn=YB=YhankeiBY=CandC=YA=YhankeiA=YB=YhankeiB=YP=YQY=Put=YP[w]{P}=YPut=YQ[e]{Q} → P QY=KinziEnko=YA=YhankeiA{hazimeten==YQ}{%owariten==YP}=YoresenAY=KinziEnko=YB=YhankeiB{hazimeten==YP}{%owariten==YQ}=YoresenBY=edef=Yoresen{=YQ=YoresenA=YP=YoresenB=YQ}Y=Nuritubusi*=YoresenY=end{zahyou}(cid:4) (cid:5)きれいに斜線塗りができたようです。114

### Page 122

Y=KinziEnko の書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)円弧を近似する折れ線Y=KinziEnko<#1>#2#3#4#5#6#1 : 刻み値#2 : 中心#3 : 半径を直接与えるかtuukaten=xx として，円弧の周上の一点を与える#4 : 始め角を直接与えるかhazimeten=xx として，中心を始点，xx を終点とするベクトルの方向角を 始め角とするように指定する。#5 : 終り角を直接与えるかowariten=xx として，中心を始点，xx を終点とするベクトルの方向角を 終り角とするように指定する。#6 : 近似折れ線を受け取る制御綴8.7破線による斜線塗り斜線を破線で引くにはY=def=Ysensyu{=Yhasen}%などとします．(cid:2) (cid:3)破線による斜線塗りY=begin{picture}(4,2)Y=def=YA{(2,1)}%Y=Put=YA{{%Y=def=Ysensyu{=Yhasen}% −→Y=Daenko**{2}{1}{0}{180}}%Y=drawline(-2,0)(2,0)%Y=Daenko{2}{1}{0}{180}}%Y=end{picture}(cid:4) (cid:5)なお，斜線を Y=color{lightgray} などとするのも有力な手法です．ただし，gray の濃度はプリンタ環境によって調整する必要があります．115

### Page 123

(cid:2) (cid:3)グレースケールによる斜線塗りY=definecolor{%lightgray}{gray}{.8}%Y=begin{picture}(4,2)Y=def=YA{(2,1)}%Y=Put=YA{{% −→Y=color{lightgray}%Y=Daenko**{2}{1}{0}{180}}%Y=drawline(-2,0)(2,0)%Y=Daenko{2}{1}{0}{180}}%Y=end{picture}(cid:4) (cid:5)8.8斜線塗りの制約条項斜線塗りの制約条項 斜線の方向角をθとして，直線群 ycosθ−xsinθ =k が領域によってきり取られる線分は単一の連結な線分であること．駄目な場合の典型は，ドーナッツです．これはどのような方向で切っても中心を通る直線がドーナッツによって切り取られる部分は２個の線分になってしまします．このような領域の斜線塗りはいっぺんにはできません．ドーナッツの場合は，大きい円の内部全部を一旦斜線塗りしたうえで，小さい円の内部を白塗りすることで実現できます．116

### Page 124

9三角形の五心9.1重心(cid:2) (cid:3)重心Y=begin{picture}%(3.4,4)(-.2,-.5)%Y=def=YB{(0,0)}%Y=def=YC{(3,0)}%Y=def=YA{(2,3)}% AY=Put=YA{=Ymakebox(0,0.5){A}}%Y=Put=YB{=Ymakebox(0,0)[r]{B }}%Y=Put=YC{=Ymakebox(0,0)[l]{ C}}%−→Y=Zyuusin=YA=YB=YC=YGY=Put=YG{=Ymakebox(0,-0.5){G}}% GY=Drawline{=YA=YG}%B CY=Drawline{=YB=YG}%Y=Drawline{=YC=YG}%Y=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Zyuusin#1#2#3#4#1,#2,#3 を頂点とする三角形の重心を #4 にセットします．9.2外心三角形の外心を求めるコマンド Y=Gaisin です．117

### Page 125

(cid:2) (cid:3)外心Y=begin{picture}(3,3)%Y=def=YB{(0,0)}%Y=def=YC{(3,0)}%Y=def=YA{(2,3)}%Y=Put=YA{=Ymakebox(0,0.5){A}}%Y=Put=YB{=Ymakebox(0,0)[r]{B }}% AY=Put=YC{=Ymakebox(0,0)[l]{ C}}%Y=Gaisin=YA=YB=YC=YO||Y=Put=YO{=Ymakebox(0,-0.5){O}}%−→Y=Drawline{=YA=YO}%OY=Drawline{=YB=YO}%|| ||Y=Drawline{=YC=YO}%B CY=Touhenkigou<2>=YO=YAY=Touhenkigou<2>=YO=YBY=Touhenkigou<2>=YO=YCY=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Gaisin#1#2#3#4#1,#2,#3 を頂点とする三角形の外心を #4 にセットします．三角形の外接円を描くコマンド Y=Gaisetuen もあります．118

### Page 126

(cid:2) (cid:3)外接円Y=begin{picture}%(3.2,4.5)(-.2,-1)%AY=def=YB{(0,0)}%Y=def=YC{(3,0)}%Y=def=YA{(2,3)}%Y=Put=YA{=Ymakebox(0,0.5){A}}%−→Y=Put=YB{=Ymakebox(0,0)[r]{B }}%Y=Put=YC{=Ymakebox(0,0)[l]{ C}}%B CY=Gaisetuen=YA=YB=YCY=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Gaisetuen#1#2#3#1,#2,#3 を頂点とする三角形の外接円を描画します．外心は Y=vGaisin にセット，半径は Y=lR9.3内心三角形の内心を求めるコマンド Y=Naisin です．119

### Page 127

(cid:2) (cid:3)内心Y=begin{picture}(3,4)(-.2,-.5)Y=def=YB{(0,0)}%Y=def=YC{(3,0)}%Y=def=YA{(2,3)}%AY=Put=YA{=Ymakebox(0,0.5){A}}%Y=Put=YB{=Ymakebox(0,0)[r]{B }}%Y=Put=YC{=Ymakebox(0,0)[l]{ C}}%Y=Naisin=YA=YB=YC=YI −→Y=Put=YI{=Ymakebox(0,-0.5){I}}%IY=Drawline{=YA=YI}%B CY=Drawline{=YB=YI}%Y=Drawline{=YC=YI}%Y=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Naisin#1#2#3#4#1,#2,#3 を頂点とする三角形の内心を #4 にセットします．三角形の内接円を描くコマンド Y=Naisetuen もあります．(cid:2) (cid:3)内接円Y=begin{picture}(3,4)(-.2,-.5)Y=def=YB{(0,0)}%AY=def=YC{(3,0)}%Y=def=YA{(2,3)}%Y=Put=YA{=Ymakebox(0,0.5){A}}%Y=Put=YB{=Ymakebox(0,0)[r]{B }}% −→Y=Put=YC{=Ymakebox(0,0)[l]{ C}}%Y=Naisetuen=YA=YB=YCB CY=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)120

### Page 128

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Naisetuen#1#2#3#1,#2,#3 を頂点とする三角形の内接円を描画します．内心は Y=vNaisin にセット，半径は Y=lr9.4傍心三角形の傍心を求めるコマンド Y=Bousin です．(cid:2) (cid:3)傍心Y=begin{zahyou*}[ul=5mm](-2,5)(-3,4)Y=tenretu{A(2,3)n;B(0,0)w;C(3,0)e} AY=Bunten=YA=YB3{-1}=YPY=Bunten=YA=YC3{-1}=YQY=Bousin=YA=YB=YC=YJ −→B CY=Drawlines{=YA=YJ;=YB=YJ;=YC=YJ;=YP=YA=YQ}Y=thicklinesY=Takakkei{=YA=YB=YC}%Y=thinlinesY=end{zahyou*}(cid:4) (cid:5)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Bousin#1#2#3#4#1,#2,#3 を頂点とする三角形の，∠A内にある傍心を #4 にセットします．三角形の傍接円を描くコマンド Y=Bousetuen もあります．(cid:2) (cid:3)傍接円AY=begin{zahyou*}[ul=5mm](-2,5)(-6,4)Y=tenretu{A(2,3)n;B(0,0)w;C(3,0)e}Y=Bunten=YA=YB2{-1}=YPY=Bunten=YA=YC2{-1}=YQ B CY=Bousetuen=YA=YB=YC −→Y=Drawlines{=YP=YA=YQ}Y=thicklinesY=Takakkei{=YA=YB=YC}%Y=thinlinesY=end{zahyou*}(cid:4) (cid:5)121

### Page 129

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Bousetuen#1#2#3#1,#2,#3 を頂点とする三角形の傍接円を描画します．傍心は Y=vBousin にセット，半径は Y=BousetuenHankei三角形の内接円，3つの傍接円を描画する例です。(cid:2) (cid:3)内接円と傍接円Y=begin{footnotesize}Y=begin{zahyou*}[ul=10mm](-5,6)(-7,5)Y=tenretu{A(2,2)n;B(0,0)sw;C(3,0)se}Y=Naisetuen=YA=YB=YCY=Bousetuen=YA=YB=YC=Yedef=YJ{=YvBousin}Y=Bousetuen=YB=YC=YA=Yedef=YK{=YvBousin}Y=Bousetuen=YC=YA=YB=Yedef=YL{=YvBousin}Y=Takakkei{=YJ=YK=YL}Y=Drawlines{=YJ=YA;=YK=YB;=YL=YC}Y=Tyokusen=YA=YB{}{}Y=Tyokusen=YB=YC{}{}Y=Tyokusen=YC=YA{}{}Y=thicklinesY=Takakkei{=YA=YB=YC}Y=end{zahyou*}Y=end{footnotesize}(cid:4) (cid:5)122

### Page 130

AB C−→9.5垂心三角形の垂心を求めるコマンドは用意してありません．Y=Suisen で垂線を引き，Y=LandL で交点を求めることで垂心が得られます．123

### Page 131

(cid:2) (cid:3)垂心Y=begin{picture}(3,4)(-.2,-.5)Y=def=YB{(0,0)}%Y=def=YC{(3,0)}%Y=def=YA{(2,3)}%Y=Put=YA{=Ymakebox(0,0.5){A}}%Y=Put=YB{=Ymakebox(0,0)[r]{B }}%Y=Put=YC{=Ymakebox(0,0)[l]{ C}}% AY=Suisen=YB=YC=YA=YEY=Suisen=YC=YA=YB=YFY=LandL=YB=YE=YC=YF=YH−→Y=LandL=YA=YH=YB=YC=YDY=Drawline{=YA=YD}%Y=Drawline{=YB=YE}%B CY=Drawline{=YC=YF}%Y=Tyokkakukigou=YA=YD=YBY=Tyokkakukigou=YB=YE=YAY=Tyokkakukigou=YC=YF=YAY=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)9.6角の二等分線三角形の二等分線と対辺の交点を求めるには，コマンドY=Nitoubunsenを用います。その書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)三角形の二等分線と対辺の交点を求める。Y=Nitoubunsen[#1]#2#3#4#5角#2#3#4（#3が角の頂点）を2等分する直線が辺#2#4と交わる点を#5に与える。#1を与えたときは，外角の2等分線を#1に与える。まずは，内角の二等分線です。124

### Page 132

(cid:2) (cid:3)Y=NitoubunsenY=begin{zahyou*}[ul=10mm](-1,5)(-1,3)=YfootnotesizeY=tenretu{A(3,2)n;B(0,0)s;C(4,0)s}Y=Nitoubunsen=YB=YA=YC=YDY=Put=YD[s]{D}Y=Drawline{=YA=YB=YC=YA=YD}Y=Kakukigou<0>=YB=YA=YD(0,0)[c]{$=Ybullet$}Y=Kakukigou<0>=YD=YA=YC(0,0)[c]{$=Ybullet$}Y=end{zahyou*}(cid:4) (cid:5)↓A••B D C外角の二等分線と対辺（の延長）との交点を得るには，オプション引数[#1]に交点を受け取る制御綴を与えます。(cid:2) (cid:3)外角の二等分線Y=begin{zahyou*}[ul=10mm](-1,12)(-1,4)=YfootnotesizeY=tenretu{A(3,2)n;B(0,0)s;C(4,0)s}Y=Nitoubunsen[=YE]=YB=YA=YC=YDY=Put=YD[s]{D}Y=Put=YE[s]{E}Y=Hantyokusen=YB=YCY=Hantyokusen=YB=YAY=Drawlines{=YA=YB=YC=YA=YD;=YA=YE}Y=Kakukigou<0>=YB=YA=YD(0,0)[c]{$=Ybullet$}Y=Kakukigou<0>=YD=YA=YC(0,0)[c]{$=Ybullet$}Y=Bunten=YA=YB{-1}{2}=YTY=Kakukigou<0>=YC=YA=YE(0,0)[c]{$=Ytimes$}Y=Kakukigou<0>=YE=YA=YT(0,0)[c]{$=Ytimes$}Y=end{zahyou*}(cid:4) (cid:5)↓125

### Page 133

A ×•• ×B D C E126

### Page 134

10三角形の決定10.1三辺三辺の長さがわかっているときに，その三角形をどのように描画するか，という話です．具体例としてAB=7, BC=5, CA=3としましょう．まずA(0,0), B(7,0)とします．点Cは，Aを中心とする半径3の円と，Bを中心とする半径5の円との交点として求めます．(cid:2) (cid:3)三角形の決定(1)三辺Y=begin{picture}(7,3)(-.5,-.5)Y=def=YA{(0,0)}%Y=def=YB{(7,0)}%Y=CandC=YA{3}=YB{5}=YD=YCY=Put=YA{=Ymakebox(0,0)[r]{A }}%Y=Put=YB{=Ymakebox(0,0)[l]{ B}}%Y=Put=YC{=Ymakebox(0,0.4){C}}%Y=HenKo<.4>=YA=YB{7}%Y=HenKo<.4>=YB=YC{5}%Y=HenKo<.4>=YC=YA{3}%Y=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)C3 5−→A B710.2二角夾辺BC=5, ∠B=60◦, ∠C=45◦ としましょう．これは，B(0,0), C(5,0) とした上で点Bを通り，方向角 60◦ の直線と点Cを通り，方向角 135◦ の直線の交点としてAを求めます．127

### Page 135

(cid:2) (cid:3)三角形の決定(2) 二角夾辺Y=begin{picture}(7,4.5)(-0.5,-0.5)%Y=def=YB{(0,0)}%Y=def=YC{(5,0)}%Y=kandk=YB{60}=YC{135}=YAY=Put=YA{=Ymakebox(0,0.5){A}}%Y=Put=YB{=Ymakebox(0,0)[r]{B }}%Y=Put=YC{=Ymakebox(0,0)[l]{ C}}%Y=HenKo<.4>=YB=YC{5}%Y=Kakukigou=YC=YB=YA(2pt,1pt)[l]{60=YDeg}%Y=Kakukigou<2>=YA=YC=YB(-2pt,1pt)[r]{45=YDeg}%Y=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)A−→60◦ 45◦B C510.3二辺夾角AB=3, BC=5, ∠B=60◦ としましょう．これは B(0,0), C(5,0) とした上で A の座標を極座標→直交座標変換で求めます．すなわちY=kyokuTyoku(3,60)=YA128

### Page 136

(cid:2) (cid:3)三角形の決定(3) 二辺夾角Y=unitlength1cmY=begin{picture}(5.5,3.5)(-0.5,-0.5)Y=def=YB{(0,0)}%Y=def=YC{(5,0)}%Y=kyokuTyoku(3,60)=YAY=Put=YA{=Ymakebox(0,0.4){A}}%Y=Put=YB{=Ymakebox(0,0)[r]{B }}%Y=Put=YC{=Ymakebox(0,0)[l]{ C}}%Y=HenKo[60]<.4>=YB=YC{5}%Y=HenKo[36]<.4>=YA=YB{3}%Y=Kakukigou=YC=YB=YA(2pt,0)[l]{60=YDeg}%Y=thicklinesY=Drawline{=YA=YB=YC=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)A3−→60◦B C5129

### Page 137

11正弦定理・余弦定理11.1正弦定理正弦定理を用いて三角形の辺・角，外接円の半径を求めるコマンドを解説します．一例として，A=120◦, B =15◦, c=10である三角形を BC を底辺として描画することを考えてみます．そのために BC=a を正弦定理で求めます．まずは C =45◦ と c=10 からc=2RsinCを用いて外接円の半径を求めます．そのためのコマンドがY=seigenRです．書式は(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=seigenR#1#2#1 : 向かい合った辺・角のうち辺#2 : 角外接円の直径が Y=lRR, 半径が Y=lR にセットされる．ここでは，Y=seigenR{10}{45} とします．次いで，a=2RsinAを用いて a を求めます．そのためのコマンドが Y=seigen です．(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=seigen#1#2#1 : 角#2 : 角と向かい合った辺の長さを受取るコントロールシーケンスここでは Y=seigen{120}=Yla として Y=la に a がセットされます．関連して，逆に辺を与えて角を求めるコマンドが Y=Seigen です．(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Seigen[#1]#2#3#2 : a#3 : A を受取るコントロールシーケンス#1 = e のときは，角A（鋭角）を求める．（デフォルト）#1 = d のときは，角A（鈍角）を求める．130

### Page 138

では，この節のはじめに取り上げた三角形を実際に描画してみましょう．(cid:2) (cid:3)正弦定理{Y=unitlength4mm=Ysmall=YdrawaxisfalseY=begin{zahyou}(-1,15)(-1,4)%Y=seigenR{10}{45}%Y=seigen{120}=YlaY=def=YB{(0,0)}%Y=def=YC{(=Yla,0)}%Y=kyokuTyoku(10,15)=YAY=Put=YA(0,2pt)[b]{A}%Y=Put=YB(0,-2pt)[rt]{B}%Y=Put=YC(0,-2pt)[lt]{C}%Y=HenKo[0]=YA=YB{10}%Y=Kakukigou[|]=YC=YB=YA<hankei=3>(0,0)[l]{15=YDeg}%Y=Kakukigou=YB=YA=YC(0,0)[t]{120=YDeg}%Y=Drawline{=YA=YB=YC=YA}%Y=end{zahyou}}(cid:4) (cid:5)A10−→ 120◦15◦B C11.2余弦定理2辺夾角がわかっているときに，第3辺を求めるコマンドがY=yogen です．(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)2辺夾角から第3辺の長さを求める．Y=yogen#1#2#3#4#1=b, #2=c, #3=A → a を#4にセットする．では，このコマンドを用いて◦b=2, c=3, A=60である三角形を BC を底辺として描画してみます．131

### Page 139

(cid:2) (cid:3)余弦定理{Y=unitlength10mm=Ysmall=YdrawaxisfalseY=begin{zahyou}(-.2,3)(-.5,2.25)%Y=yogen{2}{3}{60}=YlaY=def=YB{(0,0)}%Y=def=YC{(=Yla,0)}%Y=CandC=YB{3}=YC{2}=YAA=YAY=Put=YA(0,2pt)[b]{A}%Y=Put=YB(0,-2pt)[t]{B}%Y=Put=YC(0,-2pt)[t]{C}%Y=HenKo[0]=YC=YA{2}%Y=HenKo[0]=YA=YB{3}%Y=Kakukigou=YB=YA=YC(0,-2pt)[t]{60=YDeg}%Y=Drawline{=YA=YB=YC=YA}%Y=end{zahyou}}%(cid:4) (cid:5)A60◦32−→B C関連して，3辺の長さがわかっているとき，角を求めるコマンドが Y=Yogen です．(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)3辺の長さから角の余弦を求める．Y=Yogen[#1]#2#3#4#5cos(A)=(b^2+c^2-a^2)/(2bc)#2=a, #3=b, #4=c 結果は #5 にセット#1=a のときは角を求める．（単位は度）132

### Page 140

12ベクトル12.1ベクトル演算点の座標を位置ベクトルの成分と見て，ベクトル演算をするコマンドを用意しました．(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)和： Y=Addvec#1#2#3：2つのベクトル#1, #2の和ベクトルを#3に与えます．差： Y=Subvec#1#2#3：2つのベクトル#1, #2の差ベクトルを#3に与えます．スカラー倍： Y=Mulvec#1#2#3：ベクトル#2 のスカラー#1倍を#3に与えます．大きさ： Y=Absvec#1#2: ベクトル#1 の大きさを #2 に与えます．方向角： Y=Argvec#1#2: ベクトルが x軸の正の向きとなす角を #2 に与えます．法線ベクトル： Y=Nvec#1#2: ベクトル #1 に垂直な単位ベクトルを #2 に与えます．回転： Y=Rotvec[#1]<#2>#3#4#5: ベクトル #3 を 角 #4 だけ回転したベクトルを #5に与えます．[#1] を指定した場合は，長さを指定した値にします．また，<#2> を指定した場合は，長さを元のベクトルの #2 倍にします．成分： Y=vecXY#1#2#3: ベクトル #1 のx成分を #2 へ，y成分を #3 へ抽出します．12.2平行四辺形A(2,3), B(1,1), C(4,1) を頂点とする平行四辺形 ABCD を作図するには3点の座標 Y=A, Y=B, Y=Cを位置ベクトルと見てY=A+Y=C−Y=Bとして Y=D を求めます．133

### Page 141

(cid:2) (cid:3)平行四辺形Y=unitlength1cmY=begin{picture}(5,3)(0.8,0.5)Y=def=YA{(2,3)}%Y=def=YB{(1,1)}%Y=def=YC{(4,1)}%Y=Addvec=YA=YC=YDY=Subvec=YD=YB=YDY=Put=YA{=Ymakebox(0,0.4){A}}%Y=Put=YB{=Ymakebox(0,0)[r]{B }}%Y=Put=YC{=Ymakebox(0,0)[l]{ C}}%Y=Put=YD{=Ymakebox(0,0)[l]{ D}}%Y=thicklinesY=Drawline{=YA=YB=YC=YD=YA}%Y=thinlinesY=end{picture}(cid:4) (cid:5)AD−→B C12.3回転ベクトルを回転させるコマンドY=Rotvecを用いて回転を行うことができます．ここではさらに一般化したY=Kaiten を用いて，指定した2点 A, B を結ぶ線分を一辺とする正三角形を作図します．(cid:2) (cid:3)回転Y=begin{picture}(3,5)%CY=def=YB{(3,3)}%Y=def=YA{(1,2)}%Y=Kaiten=YA=YB{60}=YCBY=Kaiten=YA=YB{-60}=YD−→Y=Put=YA{=Ymakebox(0,0)[r]{A }}%AY=Put=YB{=Ymakebox(0,0)[l]{ B}}%Y=Put=YC{=Ymakebox(0,0.4){C}}%Y=Put=YD{=Ymakebox(0,-0.4){D}}% DY=Drawline{=YA=YB=YC=YA=YD=YB}%Y=end{picture}(cid:4) (cid:5)134

### Page 142

Y=Kaiten コマンドの書式です．(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Kaiten[#1]<#2>#3#4#5#6#1 : 長さ指定#2 : 長さの倍率指定#3 : 回転の中心#4 : 回転させる点#5 : 回転角#6 : 結果の座標を受け取るコントロールシーケンス135

### Page 143

13座標平面13.1連立不等式の解を図表示連立方程式の解を数直線上に図表示する話です。(cid:2) (cid:3)例1連立不等式Y=renritu{&x+1<0 =YY= &x^2<4}の解はY=begin{zahyou*}[ul=10mm](-5,5)(-.5,1.5)%Y=ArrowLine{(=Yxmin,0)}{(=Yxmax,0)}%Y=Put{(=Yxmax,0)}[s]{$x$}%Y=Put{(0,0)}[s]{$0$}%Y=Put{(-1,0)}[s]{$-1$}%Y=Put{(-2,0)}[s]{$-2$}%Y=Put{(2,0)}[s]{$2$}%Y=KTkukan{(,-1);(-2,2)}{(-2,-1)}Y=end{zahyou*}(cid:4) (cid:5)連立不等式(cid:15)x+1<0 ···················· (cid:6)1x 2 <4 ···················· (cid:6)2→ の解は(cid:6)2(cid:6)1−2 −1 0 2 x136

### Page 144

(cid:2) (cid:3)例2連立不等式Y=renritu{&x^2>x =Ylabel{E2-1}=YY= &x^2=Yleqq 4=Ylabel{E2-2}}の解はY=begin{zahyou*}[10mm](-5,5)(-.5,1.5)%Y=ArrowLine{(=Yxmin,0)}{(=Yxmax,0)}%Y=Put{(=Yxmax,0)}[s]{$x$}%Y=Put{(0,0)}[s]{$0$}%Y=Put{(1,0)}[s]{$1$}%Y=Put{(-2,0)}[s]{$-2$}%Y=Put{(2,0)}[s]{$2$}%Y=KTkukan[E2-1;E2-2]{{(,0)|(1,)};[-2,2]}{[-2,0)|(1,2]}Y=end{zahyou*}(cid:4) (cid:5)連立不等式(cid:15)x 2 >x ···················· (cid:6)3x 2 (cid:2)4 ···················· (cid:6)4→ の解は(cid:6)4(cid:6)3 (cid:6)3−2 0 1 2 xY=KTkukanの書式です。137

### Page 145

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=KTkukan[#1]#2#3#1 : 各区間のラベル指定オプション#2 : 各区間を‘;’区切りで並べる#3 : 結果の区間区間は開区間 : (-3,5)閉区間 : [-3,5]半開区間 : (-3,5], [-3,5)無限区間 : (,-3), (5,)などと表す。2つの区間の和集合は (,-3)|(5,) などのように，‘|’を用いるラベル指定オプションは，デフォルトは [auto] で，Y=maru1, =Ymaru2, .....が付与される。各不等式に Y=label がついているときは，ラベル名を‘;’区切りで並べる。[] と指定すれば，区間にラベルはつかない。下の Y=kukantakasa を用いて，自由に配置してもよい。区間を表す横罫線の y座標は Y=kukantakasa で，そのデフォルト値は 0.5層を重ねるときは，その 2, 3, ... 倍となる。13.2 zahyou環境座標軸を描きます．基本的な使用法はY=begin{zahyou}(xの下限, xの上限)(yの下限, yの上限)例えば，y(cid:2) (cid:3)座標平面Y=begin{zahyou}(-2,2)(-1,3)−→Y=En{(0,1)}{1}%Y=end{zahyou}(cid:4) (cid:5) O xzahyou環境は，実質 picture 環境です．ここへ，1次関数，2次関数のグラフを描こうという魂胆です．138

### Page 146

なお，座標軸を描画したくないときは，*付のzahyou*環境を使用します。下の例は，Y=drawXaxisでx軸だけを描画しています。(cid:2) (cid:3)Y=drawaxisfalseY=begin{zahyou*}(-2,2)(-1,3)Y=drawXaxis−→Y=Put{(=Yxmax,0)}[e]{$x$}Y=En{(0,1)}{1}xY=end{zahyou*}(cid:4) (cid:5)y軸のみを描画するY=drawYaxisも定義されています。13.3座標軸描画のタイミング座標軸を描画するタイミングは，zahyou環境の最後ですが，座標軸を描画した後に，座標軸上の点にY=Siromaruで白丸をつけたいときなどはうまくありません。下の図のように，白丸の中を座標軸が突き抜けてしまいます。(cid:2) (cid:3)座標軸描画のタイミングyY=begin{zahyou}[ul=16mm](-.5,1.5)(-.5,1)Y=tenretu*{A(0,0);B(1,0);C(.5,0)}{Y=thicklines=YEnko=YC{.5}{0}{180}}% −→Y=siromaru[2pt]{=YA;=YB} O 1 xY=Put=YB[se]{1}%Y=end{zahyou}(cid:4) (cid:5)そのようなときはzahyou*環境を用いて，適切なタイミングでY=drawXYaxisを発行して，座標軸を別途描画します。(cid:2) (cid:3)Y=drawXYaxisY=begin{zahyou*}[ul=16mm](-.5,1.5)(-.5,1)yY=tenretu*{A(0,0);B(1,0);C(.5,0)}{Y=thicklines=YEnko=YC{.5}{0}{180}}%−→Y=drawXYaxisO 1 xY=siromaru[2pt]{=YA;=YB}Y=Put=YB[se]{1}%Y=end{zahyou*}(cid:4) (cid:5)13.4 zahyou環境のオプションzahyou環境については，一番初めに紹介しましたが，細かい点を修正するオプションについて説明します。zahyou環境の細かい指定をするのに，オプション引数を用意しています。これらは139

### Page 147

key = valの形式で，コンマで区切ることで複数のオプションを指定できます。13.4.1 Y=unitlengthの指定picture環境の単位長(Y=unitlength)は，デフォルトでは1ptとなっています。これを変更するオプションがul=...で，右辺値は単位を伴った長さです。y(cid:2) (cid:3)ul=...オプションY=begin{zahyou}[ul=8mm]%(-3,3)(-2,2)% → O 1 xY=xmemori{1}%Y=end{zahyou}%(cid:4) (cid:5)注 1. TEXが扱える実数値はY=maxdimen=16383.99999pt % the largest legal <dimen>が上限とされています。emathPhにおける計算もこの制限を受けます。距離計算では平方計算が必要ですが，1282でオーバーフローしてしまいます。従って座標の値を大きくしないように，Y=unitlengthを1cm前後にしておく方が良いでしょう。注 2. Y=unitlength8mmY=begin{zahyou}....Y=end{zahyou}とY=begin{zahyou}[ul=8mm]....Y=end{zahyou}との大きな違いは，Y=unitlength変更の有効範囲です。前者はzahyou環境が終わった後でもこの変更が有効（残ってしまう）のに対して，後者はこの変更が当該 zahyou 環境内のみに有効である，すなわちこの zahyou 環境が終われば，Y=unitlengthは以前の値に戻ることです。zahyouの[...]オプションによる変更はすべて当該zahyou環境内に限定されます。140

### Page 148

13.4.2 座標軸の名称変更デフォルトでは，原点には O横軸には x縦軸には yが表示されますが，これを変更するオプションがgentenkigou=yokozikukigou=tatezikukigou=で，右辺値は文字列です。原点記号を変更します。(cid:2) (cid:3)原点記号の変更Y=begin{zahyou}% y[%ul=8mm,gentenkigou=O$’$ → O(cid:3) 1 x]%(-3,3)(-2,2)%Y=xmemori{1}%Y=end{zahyou}%(cid:4) (cid:5)原点記号をつけたくない、という場面なら(cid:2) (cid:3)原点記号なしY=begin{zahyou}% y[%ul=8mm,gentenkigou={} → 1 x]%(-3,3)(-2,2)%Y=xmemori{1}%Y=end{zahyou}%(cid:4) (cid:5)座標軸名称の変更例です。141

### Page 149

(cid:2) (cid:3)座標軸名の変更Y=begin{zahyou}%b[%ul=8mm,yokozikukigou=$a$,tatezikukigou=$b$ → O 1 a]%(-3,3)(-2,2)%Y=xmemori{1}%Y=end{zahyou}%(cid:4) (cid:5)13.4.3 軸記号の配置オプションデフォルトでは，原点記号は 左下横軸名は 下縦軸名は 左に表示されますが，これを変更するオプションがgentenhaiti=yokozikuhaiti=tatezikuhaiti=で，右辺値はY=Putのオプションと同形式です。原点記号はデフォルトでは左下に配置されますが，これを右下に変更してみましょう。(cid:2) (cid:3)原点記号の配置変更Y=begin{zahyou}% y[%ul=8mm,gentenhaiti={[se]} → O 1 x]%(-3,3)(-2,2)%Y=xmemori{1}%Y=end{zahyou}%(cid:4) (cid:5)Y=Putの配置オプション [se]をgentenhaiti=の右辺値に指定しますが，]がzahyou環境に対する[...] オプションの終了と解釈されるのを防ぐため{[se]}と，{ } で括っておく必要があります。次に座標軸名の配置を変更する例です。142

### Page 150

(cid:2) (cid:3)座標軸名の配置変更Y=begin{zahyou}%y[%ul=8mm,yokozikuhaiti={[e]},xtatezikuhaiti={(-1pt,0)[r]} → O 1]%(-3,3)(-2,2)%Y=xmemori{1}%Y=end{zahyou}%(cid:4) (cid:5)この場合，座標軸名x, yはzahyou環境の外に飛び出しています。これを防ぐために，周囲に少し余白を付けておきたい，というのが後述のmigiyohaku=hidariyohaku=ueyohaku=sitayohaku=オプションです。13.4.4 矢印のサイズ変更座標軸の矢印を含め，zahyou環境内の矢印のサイズを変更するオプションがarrowheadsize=です。(cid:2) (cid:3)矢印のサイズ変更Y=begin{zahyou}% y[%ul=8mm,arrowheadsize=2.5 → O 1 x]%(-3,3)(-2,2)%Y=xmemori{1}%Y=end{zahyou}%(cid:4) (cid:5)矢印が大きくなりすぎましたか。arrowheadsizeの右辺値を適当に変更してください。この数値は，現在のサイズの何倍にするかを指定するものです。逆に矢印がいらない場合は，つぎのzikusensyuオプションを用います。143

### Page 151

13.4.5 軸の線種変更座標軸には，デフォルトで矢印が付加されていますが，軸の線種を変更することで矢印を付けないようにすることができます。(cid:2) (cid:3)軸の矢印なしY=begin{zahyou}% y[%ul=8mm,zikusensyu==Ydrawline → O 1 x]%(-3,3)(-2,2)%Y=xmemori{1}%Y=end{zahyou}%(cid:4) (cid:5)軸を太くしてみましょうか。(cid:2) (cid:3)軸を太目にyY=begin{zahyou}%[%ul=8mm,→ O xzikusensyu==Ythicklines=Ydrawline]%(-3,3)(-2,2)%Y=end{zahyou}%(cid:4) (cid:5)軸を太くし，矢印も付けるには，線種をデフォルトのY=arrowdrawlineにしてY=thicklinesなどをかぶせます。(cid:2) (cid:3)軸を太目に，矢印もyY=begin{zahyou}[%ul=8mm,zikusensyu==Ythicklines=Yarrowdrawline,→ O xarrowheadsize=2]%(-3,3)(-2,2)%Y=end{zahyou}%(cid:4) (cid:5)13.4.6 描画領域の周辺に余白描画領域の周辺に文字を配置するためなどに余白をとっておきたいことがあります。そのためのオプションがmigiyohakuhidariyohaku144

### Page 152

ueyohakusitayohakuです。まず基準の確認です。TEXが認識しているzahyou環境をY=fboxで枠をつけてみます。(cid:2) (cid:3)基準サイズY=fboxsep=0pt=Yfbox{%Y=begin{zahyou}%y[%ul=8mm,yokozikuhaiti={[e]},tatezikuhaiti={[n]} →]%x(-3,3)(-1,3)% O 1Y=xmemori{1}%Y=def=YFx{X*X}Y=YGraph=YFxY=end{zahyou}}%(cid:4) (cid:5)座標軸のラベルが枠外にはみだしています。上と右に余白を付けて見ます。(cid:2) (cid:3)上と右に余白Y=fboxsep=0pt=Yfbox{%Y=begin{zahyou}%[%ul=8mm,y y =x2yokozikuhaiti={[e]},tatezikuhaiti={[n]},ueyohaku=.75,→migiyohaku=.5 1]%x(-3,3)(-1,3)% O 1Y=def=YFx{X*X}Y=Put{(1,1)}[syaei=xy]{}%Y=YGraph=YFxY=Put{(1.732,3)}[n]{$y=x^2$}%Y=end{zahyou}}%(cid:4) (cid:5)枠内に納まりましたね。ueyohakuなどの右辺値は，無名数で，単位は Y=unitlength です。これに対してMigiyohaku=Hidariyohaku=145

### Page 153

Ueyohaku=Sitayohaku=Yohaku=は，右辺値に単位を伴う長さを与えます。(cid:2) (cid:3)Y=UeyohakuY=fboxsep=0pt=Yfbox{%Y=begin{zahyou}%[%ul=8mm,y y =x2yokozikuhaiti={[e]},tatezikuhaiti={[n]},Ueyohaku=15pt,→Migiyohaku=10pt 1]%x(-3,3)(-1,3)% O 1Y=def=YFx{X*X}Y=Put{(1,1)}[syaei=xy]{}%Y=YGraph=YFxY=Put{(1.732,3)}[n]{$y=x^2$}%Y=end{zahyou}}%(cid:4) (cid:5)（注）単位付の余白設定オプションは，内部では Y=unitlength単位に換算されます。従って，[ul=..]と併用するときは，ul=..が先行する必要があります。13.4.7 縦横比の変更zahyou環境では，縦と横の単位長は同一になっています。これを別々に設定するためのオプションyscale, xscaleがあります。ただし，この機能はemathPxy.styで定義されていますから，Y=usepackage{emathPxy}としておく必要があります。次のリストはyscale=.25として，y軸方向を1/4に縮め，y =x2 (−4<x<4)のグラフを描画しています。146

### Page 154

(cid:2) (cid:3)<yscale=...>オプションyY=begin{zahyou}%12[ul=6mm,yscale=.25]%(-4,4)(-4,16) 8→Y=def=YFx{X*X} 4Y=YGraph=YFx−3 −2 −1O 1 2 3 xY=zahyouMemori[g]<dx=1,dy=4>Y=end{zahyou}(cid:4) (cid:5)グラフ描画コマンド Y=YGraph については後述します。次は横長の格子を描く例です。ul=3mm,xscale=3,yscale=2というオプションでul=3mm で Y=unitlength は 3mmx軸方向の単位長は ul×xscale 9mm で Y=xunitlength が 9mmy軸方向の単位長は ul×yscale 6mm で Y=yunitlength が 6mmに設定されます。(cid:2) (cid:3)横長の格子Y=begin{zahyou*}[%ul=3mm,xscale=3,%yscale=2](0,4)(0,5)% →Y=Put=YO{=Ykousi{4}{5}}%Y=Kuromaru{(2,3)}%Y=end{zahyou*}%(cid:4) (cid:5)13.5 zahyou環境の縦方向配置まずは，picture(zahyou)環境で作成した図，tabular(array)環境で作成した表を横に並べたときの縦位置に関する話から始めます。13.5.1 デフォルトの確認まずはデフォルトの状態の確認です。147

### Page 155

(cid:2) (cid:3)デフォルトY=kizyunsenあいう%Y=fbox{=Ybegin{zahyou}[ul=10mm](-2,2)(-1,5)Y=En=YO{1}Y=end{zahyou}}%xyz%Y=begin{tabular}{|c|c|}=Yhline1 & 1 Y=Y=Y=hline1 & 1 Y=Y=Y=hlineY=end{tabular}%か漢字%(cid:4) (cid:5)y→O x1 1あいう xyz か漢字1 1赤の横線が基準線（ベースライン）です。TEXは，この線を文字通り基準として文字，表，図などボックスを配置して行きます。まずは，文字にご注目ください。‘y’は基準線から下にはみ出す形で配置されています。すなわち「深さ」をもっています。全角文字も良く見ると一部基準線から下にはみ出しています。さて，図ですが，picture環境の下辺を基準線に重ねる，というのがLATEXの仕様です。表のほうは，デフォルトでは，縦方向中央揃えとなります。デフォルトでは，といったのは，オプションで変更可能ということで，次節でそれを見ていきます。13.5.2 下揃え表の下辺を基準線に重ねるのが，tabular, arrayの[b]オプションです。(cid:2) (cid:3)下揃えY=begin{tabular}[b]{|c|c|}=Yhline(cid:4) (cid:5)148

### Page 156

y→O x 1 11 1あいう xyz か漢字ソースリストは，デフォルトのものから変更した行だけを記します。13.5.3 上揃え逆に，表の上辺を基準線に重ねるのが，tabular, arrayの[t]オプションです。zahyou環境にも[haiti=t]オプションがあります。(cid:2) (cid:3)上揃えY=fbox{=Ybegin{zahyou}[ul=10mm,haiti=t](-2,2)(-1,5)Y=begin{tabular}[t]{|c|c|}=Yhline(cid:4) (cid:5)あいう xyz か漢字y1 11 1→O xzahyou環境の上辺をさらに上に引っ張って文字の高さと揃えたい，というご要望もありそうです。そのためにhaiti=t/c/bオプションには，そのあとに補正量を与えることができるようにしてあります。(cid:2) (cid:3)上揃え–さらに調整Y=fbox{=Ybegin{zahyou}[ul=10mm,haiti=t+1zh](-2,2)(-1,5)(cid:4) (cid:5)149

### Page 157

yあいう xyz か漢字1 11 1→O x正の補正量で上方に，負の補正量で下方に移動します。13.5.4 中央揃え表を縦方向センタリングするのが，tabular, arrayの[c]オプションです。zahyou環境にも[haiti=c]オプションがあります。(cid:2) (cid:3)中央揃えY=fbox{=Ybegin{zahyou}[ul=10mm,haiti=c](-2,2)(-1,5)Y=begin{tabular}[c]{|c|c|}=Yhline(cid:4) (cid:5)y1 1→ あいう xyz か漢字1 1O xzahyou環境には，[haiti=x]オプションもあります。これはx軸を基準線に重ねます。(cid:2) (cid:3)横軸揃えY=fbox{=Ybegin{zahyou}[ul=10mm,haiti=x](-2,2)(-1,5)Y=begin{tabular}[c]{|c|c|}=Yhline(cid:4) (cid:5)150

### Page 158

y→1 1あいう xyz か漢字O x 1 1emathPh.styv1.70までは，[haiti=c]オプションで，x軸を基準線に重ねていましたが，v1.71で上記のように修正いたしました。151

### Page 159

13.6 zahyou環境の書式(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=begin{zahyou}[#1](#2,#3)(#4,#5)#1 : key=val の形式で，key には次のものが使えます。yokozikukigou デフォルトは $x$tatezikukigou デフォルトは $y$gentenkigou デフォルトは Oyokozikuhaiti デフォルトは (0,-3pt)[rt]tatezikuhaiti デフォルトは (-3pt,0)[rt]gentenhaiti デフォルトは [sw]ul Y=unitlength を変更します。デフォルトは 1ptyscale デフォルトは1 --> emathPxy.styxscale デフォルトは1 --> emathPxy.styarrowheadsize 矢印のサイズ（その時点のものに対する比率）zikusensyu 座標軸の線種デフォルトは Y=arrowdrawlineueyohaku 右辺値は無名数（単位はY=unitlength)sitayohakumigiyohakuhidariyohakuUeyohaku 右辺値は単位を伴う長さSitayohakuMigiyohakuHidariyohakuhaiti t/c/b/x(#2,#3) : xの範囲(#4,#5) : yの範囲13.7目盛り13.7.1 座標軸上に等間隔の目盛り座標軸に等間隔に目盛りを打つコマンドが Y=zahyouMemori です．(cid:2) (cid:3)座標目盛りY=begin{zahyou}(-1.5,4.5)(-2.5,2.5)=YsmallY=zahyouMemori%Y=end{zahyou}(cid:4) (cid:5)152

### Page 160

y21−→ −1 O 1 2 3 4 x−1−2(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=zahyouMemori[#1][#2]<#3>#1 : g : グリッド+ : 格子点に +マークo : 格子点に黒丸z : 座標軸上の格子点に +マーク#2 : n : グリッドのみで，目盛り数値を打たない．#3 : 刻みkey=val の形式 ---> emathPxy.stykey はdx= xの刻み値dy= yの刻み値xo= xの基準値yo= yの基準値目盛りの間隔はデフォルトでは1ですが，これを2に変更してみましょう。y4(cid:2) (cid:3)間隔2の目盛線2Y=smallY=begin{zahyou}[ul=4mm](-5,5)(-5,5) → −4 −2 O 2 4 xY=zahyouMemori<2>−2Y=end{zahyou}(cid:4) (cid:5) −4x軸とy軸とで間隔を変えることもできます。153

### Page 161

(cid:2) (cid:3) y<dx=..,dy=..>オプション4Y=small 2Y=begin{zahyou}%→ −6 −3 O 3 6x[ul=3mm](-7,7)(-5,5)−2Y=zahyouMemori<dx=3,dy=2>−4Y=end{zahyou}(cid:4) (cid:5)Y=xscale, Y=yscale と併用して(cid:2) (cid:3)Y=xscaleと併用オプションY=small yY=begin{zahyou}% 1[ul=8mm,yokozikuhaiti={[n]},% x→ O 90 180 270 360xscale=0.017453]%(-5,400)(-1.5,1.5) −1Y=zahyouMemori<dx=90>Y=end{zahyou}(cid:4) (cid:5)基準点はデフォルトでは原点ですが，これを変更するには，<xo=...,yo=...>オプションを用います。(cid:2) (cid:3)基準点の変更Y=smallY=begin{zahyou}% y[ul=8mm,% 1yokozikuhaiti={[n]},% x→ −30 O 60 150 240 330gentenhaiti={[se]},%xscale=0.017453]% −1(-60,360)(-1.5,1.5)Y=zahyouMemori<dx=90,xo=-30>Y=end{zahyou}(cid:4) (cid:5)13.7.2 グリッド線[g]オプションをつけると方眼を描きます．(cid:2) (cid:3)方眼 & 目盛りY=begin{zahyou}(-1.5,4.5)(-2.5,2.5)=YsmallY=zahyouMemori[g]%Y=end{zahyou}(cid:4) (cid:5)154

### Page 162

y21−→ −1 O 1 2 3 4 x−1−2グリッド線の線種を変更するには，<sensyu=...> オプションを用います。(cid:2) (cid:3)線種の変更Y=begin{zahyou}(-1.5,4.5)(-2.5,2.5)=YsmallY=zahyouMemori[g]<sensyu==Ydrawline>%Y=end{zahyou}(cid:4) (cid:5)y21−→ −1 O 1 2 3 4 x−1−2[+]オプションでは，格子点に + マークをつけます。(cid:2) (cid:3)格子点に +Y=begin{zahyou}(-1.5,4.5)(-2.5,2.5)=YsmallY=zahyouMemori[+]%Y=end{zahyou}(cid:4) (cid:5)155

### Page 163

y21−→ −1 O 1 2 3 4 x−1−2[o]オプションでは，格子点に黒丸をつけます。(cid:2) 格子点に • (cid:3)Y=begin{zahyou}(-1.5,4.5)(-2.5,2.5)=YsmallY=zahyouMemori[o]%Y=end{zahyou}(cid:4) (cid:5)y21−→ −1 O 1 2 3 4 x−1−2なお，目盛りの数値は要らないというときは第2の[n]オプションをつけます．y(cid:2) (cid:3)方眼{Y=unitlength5mm=YsmallY=begin{zahyou}%−→(-3.5,3.9)(-3.5,3.9)% O xY=zahyouMemori[g][n]%Y=end{zahyou}}%(cid:4) (cid:5)13.7.3 軸上に目盛りまた，座標軸上の指定した位置に目盛りを打つコマンドがY=xmemori, Y=ymemori156

### Page 164

です．(cid:2) (cid:3)目盛りY=unitlength5mm yY=begin{zahyou}%1(-1.5,4.5)(-2.5,2.5)%−→ O π xY=smallY=ymemori{1}%Y=xmemori<=Ypi>{3.1416}%Y=end{zahyou}(cid:4) (cid:5)目盛りの位置をずらしたいときは，[..]オプションにY=emathPutの配置オプションを記述します。(cid:2) (cid:3)Y=xmemoriの[...]オプションY=begin{zahyou}[ul=10mm](-5,5)(-1,1)Y=xmemori[b]{1}Y=xmemori[t]{2}Y=xmemori[{[ne]}]{3}Y=xmemori[{(-2pt,-3pt)[rt]}]{-1}Y=end{zahyou}(cid:4) (cid:5)↓y1 3−1 O 2 xy(cid:2) (cid:3) 3Y=ymemoriの[...]オプションY=begin{zahyou}[ul=10mm](-1,1)(-2,4) 2Y=ymemori[l]{1}Y=ymemori[r]{2} → 1Y=ymemori[{[sw]}]{3}Y=ymemori[{(-2pt,-3pt)[rt]}]{-1} O xY=end{zahyou}(cid:4) (cid:5)−1Y=xmemori, Y=ymemoriの書式は157

### Page 165

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)座標軸上任意位置に目盛Y=xmemori[#1]<#2>#3Y=ymemori[#1]<#2>#3#1 : t = 座標軸の下に目盛b = 上l = 右r = 左Y=emathPut の配置指定オプション#2 : 目盛の文字（省略すれば，#3 に指定したものが代用されます．）#3 : 目盛の位置Y=xscaleと併用した例です。(cid:2) (cid:3)Y=xscaleと併用Y=footnotesizeY=begin{zahyou}[ul=5mm](-5,5)(-1.5,2)yY=zahyouMemori[g][n]<dx=1.57,dy=.5> 1Y=ymemori{1} →−π O π xY=ymemori{-1} −1Y=xmemori<=Ypi>{3.14}Y=xmemori<-=Ypi>{-3.14}Y=end{zahyou}(cid:4) (cid:5)13.8座標軸への垂線平面上に点をプロットしたとき，その点から座標軸に下ろした垂線を破線で描画したいときがあります。この目的のために Y=Put にオプションを追加しました。158

### Page 166

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=emathPut#1[#2].....#1 : 文字列を置く位置（座標）#2 : 方位syaei=x|y|xyhoui=n|nw|w|sw|s|se|e|nexlabel=..ylabel=..xpos=..ypos=..syaeisensyu=..従来，[#2] オプションは，文字列の点に対する方位を指定するものでした。これはそのまま有効ですが，ここにsyaei=xyとすれば，点から両座標軸への垂線を描画することができます。y(cid:2) (cid:3)[syaei=xy]A2Y=unitlength10mm=YfootnotesizeY=begin{zahyou}(-1,3)(-1,3)→Y=tenretu{A(1,2)ne}Y=Put=YA[syaei=xy]{}O 1 xY=end{zahyou}(cid:4) (cid:5)syaei=xとすれば，x軸への垂線が描画されます。y(cid:2) (cid:3)[syaei=x]AY=unitlength10mm=YfootnotesizeY=begin{zahyou}(-1,3)(-1,3)→Y=tenretu{A(1,2)ne}Y=Put=YA[syaei=x]{}O 1 xY=end{zahyou}(cid:4) (cid:5)従来の方位オプションもここに記述したいときはhoui=..と記述します。159

### Page 167

y(cid:2) (cid:3)[houi=..]2Y=unitlength10mm=Yfootnotesize AY=begin{zahyou}(-1,3)(-1,3)→Y=def=YA{(1,2)}Y=Put=YA[syaei=xy,houi=sw]{A}O 1 xY=end{zahyou}(cid:4) (cid:5)座標軸上のラベルですが，デフォルトでは指定点の x, y座標が表示されます。これが整数の場合は問題ないのですが，分数，無理数，文字を表示したいときはxlabel=..ylabel=..オプションを用います。y(cid:2) (cid:3)[xlabel=..]Y=unitlength10mm=YfootnotesizeY=begin{zahyou}(-1,3)(-1,3) √ 2 AY=tenretu{A(1.5,1.414)ne} →Y=Put=YA[syaei=xy,xlabel==Yfrac32,ylabel==Ysqrt2]{} O 3 x2Y=end{zahyou}(cid:4) (cid:5)このオプションの右辺値は数式モード内であるという前提です。また [...,xlabel=] と右辺値を空にすればラベルは打たれません。また，垂線の線種を変更するには，syaeisensyu=..オプションを用います。y(cid:2) (cid:3)[syaeisensyu=]AY=unitlength10mm=YfootnotesizeY=begin{zahyou}(-1,3)(-1,3)Y=tenretu{A(1,2)ne} →Y=Put=YA[syaei=x,%syaeisensyu==Yprotect=Yemdottedline]{} O 1 xY=end{zahyou}(cid:4) (cid:5)垂線の足につける目盛り位置を修正するときは，[xpos=..], [ypos=..] オプションで，右辺値にY=Putの配置オプションを記述します。x軸に下ろした垂線の足位置につける文字位置は[xpos=..]オプションで修正します。160

### Page 168

(cid:2) (cid:3)xpos=..オプションyY=begin{zahyou}[ul=10mm]% A1(-2.5,2.5)(-1.5,1.5)Y=tenretu{A(2,1)ne;B(-2,-1)sw} 2→ −2 O xY=Put=YA[syaei=xy,xpos={[ne]}]{}Y=Put=YB[syaei=xy,% −1Bxpos={(-2pt,-2pt)[rt]}]{}Y=end{zahyou}(cid:4) (cid:5)y軸に下ろした垂線の足位置につける文字位置の調整は[ypos=..]オプションです。(cid:2) (cid:3)ypos=..オプションyY=begin{zahyou}[ul=10mm]% 1 A(-2.5,2.5)(-1.5,1.5)Y=tenretu{A(2,1)ne;B(-2,-1)sw} −2→ O 2 xY=Put=YA[syaei=xy,ypos={[ne]}]{}Y=Put=YB[syaei=xy,%B −1ypos={(-2pt,-2pt)[rt]}]{}Y=end{zahyou}(cid:4) (cid:5)161

### Page 169

14点・直線・円14.1点の位置に黒丸軌跡を求める問題などで，端点が含まれるとか含まれないとかを黒丸・中抜きの白丸などで表示することがあります．そのためのコマンドが Y=Kuromaru, Y=Siromaru です．(cid:2) (cid:3)黒丸・白丸{Y=unitlength10mmyY=begin{zahyou}(-.5,2.5)(-.5,2.5)%Y=def=YA{(0,1)}%Y=def=YB{(1,0)}%−→Y=def=YC{(1,1)}%Y=Put=YC{=Yenko{1}{-90}{180}}%O xY=Kuromaru=YAY=Siromaru=YBY=end{zahyou}}(cid:4) (cid:5)その書式は(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)黒丸，白丸Y=Kuromaru[#1]#2Y=Siromaru[#1]#2#1 : 丸の半径（単位をつける）デフォルトは 1pt#2 : 位置黒丸の大きさを変更したいときは，Y=Kuromaruの[#1]オプションを利用すればよいのですが，文書全体で，あるいは広範囲にY=Kuromaruの大きさを変更したいときはY=KuromaruHankeiコマンドの引数に黒丸の半径（単位つき） を与える方法もあります。(cid:2) (cid:3)黒丸の大きさ{Y=unitlength10mmY=KuromaruHankei{3pt} yY=begin{zahyou}(-.5,2.5)(-.5,2.5)%Y=def=YA{(0,1)}%Y=def=YB{(1,0)}% −→Y=def=YC{(1,1)}%Y=Put=YC{=Yenko{1}{-90}{180}}% O xY=Kuromaru=YAY=Siromaru=YBY=end{zahyou}}(cid:4) (cid:5)162

### Page 170

複数の点に黒丸（白丸）をつけるコマンドが Y=kuromaru(Y=siromaru) です。複数の点を‘;’で区切ります。(cid:2) (cid:3)複数の点に黒丸{Y=unitlength10mm yY=begin{zahyou}(-.5,2.5)(-.5,2.5)%Y=def=YA{(0,1)}%Y=def=YB{(1,0)}% −→Y=def=YC{(1,1)}%Y=Put=YC{=Yenko{1}{-90}{180}}% O xY=kuromaru{=YA;=YB;=YC}%Y=end{zahyou}}(cid:4) (cid:5)丸のサイズを指定する [..]オプションも Y=Kuromaru などと同様に有効です。14.2 2点間の距離2点間の距離を求めるには，コマンド Y=Kyori を用います．(cid:2) (cid:3)Y=Kyori{Y=unitlength10mm=Ysmall yY=begin{zahyou}(-2,2)(-2,2)%A(−1,1)Y=def=YA{(-1,1)}%Y=def=YB{(1,-1)}%2.82843Y=Kyori=YA=YB=Ykyori −→ O xY=Put=YA(0,2pt)[b]{A$(-1,1)$}%Y=Put=YB(0,-2pt)[t]{A$(1,-1)$}% A(1,−1)Y=Drawline{=YA=YB}%Y=HenKo[20]=YB=YA=YkyoriY=end{zahyou}}%(cid:4) (cid:5)Y=Kyori の書式です．(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)% 2点間の距離% Y=Kyori#1#2#3% 2点 #1, #2 の距離を #3 に代入距離の平方を求めるコマンドが Y=Kyorii です．163

### Page 171

(cid:2) (cid:3)Y=Kyorii{Y=unitlength10mm=YsmallyY=begin{zahyou}(-2,2)(-2,2)%Y=def=YA{(-1,1)}% A(−1,1)Y=def=YB{(1,-1)}%√Y=Kyorii=YA=YB=Ykyorii 8−→ O xY=Put=YA(0,2pt)[b]{A$(-1,1)$}%Y=Put=YB(0,-2pt)[t]{A$(1,-1)$}%A(1,−1)Y=Drawline{=YA=YB}%Y=HenKo[20]=YB=YA{%$Y=sqrt{=Ykyorii}$}%Y=end{zahyou}}%(cid:4) (cid:5)Y=Kyorii の書式です．(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)% 2点間の距離の平方% Y=Kyorii#1#2#3% 2点 #1, #2 の距離の平方を #3 に代入14.3直線14.3.1 ２点を通る直線2点を通る直線を描画するコマンドが Y=Tyokusen です．y(cid:2) (cid:3)2点を通る直線Y=begin{zahyou}(-2,2)(-1,3)%Y=def=YA{(0,1)}%−→Y=def=YB{(1,2)}%Y=Tyokusen=YA=YB=Yxmin=YxmaxO xY=end{zahyou}%(cid:4) (cid:5)Y=Tyokusenの書式です．164

### Page 172

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)2点を与えて直線を描画する．Y=Tyokusen[#1]#2#3[#4]#5[#6]#7#1 : Y=qbezier の [...]#1を与えないときは直線をY=qbezier ではなく，Y=drawline で描画する．#2,3 : 直線上の２点#5 : 左端の x座標 （#4 に [y] とすれば，y座標）#7 : 右端の x座標 （#6 に [y] とすれば，y座標）直線を描画領域いっぱいにかくときは，#5, #7を空にすることができます。y(cid:2) (cid:3)2点を通る直線Y=begin{zahyou}(-2,2)(-1,3)%Y=def=YA{(0,1)}%−→Y=def=YB{(1,2)}%Y=Tyokusen=YA=YB{}{}O xY=end{zahyou}%(cid:4) (cid:5)この場合，描画した直線の両端点がY=hidariT, =YmigiTに定義されています。ただし，Y=hidariTとY=migiTは，左・右とはなっていません。(cid:2) Y=hidariT(1) (cid:3) y Y=migiTY=begin{zahyou}[ul=10mm](-2,2)(-1,3)% BY=tenretu{A(0,1)se;B(1,2)nw}Y=kuromaru{=YA;=YB}→ AY=Tyokusen=YA=YB{}{}Y=Put=YhidariT[e]{=Ycmd{hidariT}}O xY=Put=YmigiT[e]{=Ycmd{migiT}}Y=end{zahyou}% Y=hidariT(cid:4) (cid:5)は自然ですが,165

### Page 173

(cid:2) (cid:3)Y=hidariT(2) y Y=hidariTY=begin{zahyou}[ul=10mm](-2,2)(-1,3)%Y=tenretu{A(1,2)se;B(0,1)nw} AY=kuromaru{=YA;=YB} B→Y=Tyokusen=YA=YB{}{}Y=Put=YhidariT[e]{=Ycmd{hidariT}}O xY=Put=YmigiT[e]{=Ycmd{migiT}}Y=end{zahyou}% Y=migiT(cid:4) (cid:5)は，???ですね。#1に近い方がY=hidariT, #2に近い方がY=migiTです。14.3.2 1点と方向ベクトルによる直線1点と方向ベクトルを与えて直線を描画するコマンドがY=mTyokusen です．y(cid:2) (cid:3)1点と方向ベクトルを指定Y=begin{zahyou}(-2,2)(-1,3)%Y=def=YA{(0,1)}%−→Y=def=Yu{(1,2)}%Y=mTyokusen=YA=Yu[y]=Yymin[y]=YymaxO xY=end{zahyou}%(cid:4) (cid:5)その書式は(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)１点と方向ベクトルを与えて直線を描画する．Y=mTyokusen[#1]#2#3[#4]#5[#6]#7#1 : Y=qbezier の [...]#1を与えないときは直線をY=qbezier ではなく，Y=drawline で描画する．#2 : 直線上の１点#3 : 方向ベクトル#5 : 左端の x座標 （#4 に [y] とすれば，y座標）#7 : 右端の x座標 （#6 に [y] とすれば，y座標）直線を描画領域いっぱいにかくときは，#5, #7を空にすることができます。166

### Page 174

y(cid:2) (cid:3)端点の指定省略Y=begin{zahyou}(-2,2)(-1,3)%Y=def=YA{(0,1)}%−→Y=def=Yu{(1,2)}%Y=mTyokusen=YA=Yu{}{}O xY=end{zahyou}%(cid:4) (cid:5)この場合も，両端点がY=hidariT, =YmigiTに定義されています。14.3.3 1点と方向角による直線1点と方向角を与えて直線を描画するコマンドがY=kTyokusen です．y(cid:2) (cid:3)1点と方向角を指定Y=begin{zahyou}(-2,2)(-1,3)%Y=def=YA{(0,1)}% −→Y=kTyokusen=YA{-30}{}{}Y=end{zahyou}% O x(cid:4) (cid:5)その書式は(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)１点と方向角を与えて直線を描画する．Y=kTyokusen[#1]#2#3[#4]#5[#6]#7#1 : Y=qbezier の [...]#1を与えないときは直線をY=qbezier ではなく，Y=drawline で描画する．#2 : 直線上の１点#3 : 方向角#5 : 左端の x座標 （#4 に [y] とすれば，y座標）#7 : 右端の x座標 （#6 に [y] とすれば，y座標）直線を描画領域いっぱいにかくときは，#5, #7を空にすることができます。この場合も，両端点がY=hidariT, =YmigiTに定義されています。14.3.4 線種の変更直線を実線ではなく，点線とか破線で描画するには Y=sensyuを再定義します。デフォルトは167

### Page 175

Y=def=Ysensyu{=Ydrawline}となっています。(cid:2) (cid:3)線種の変更Y=begin{zahyou}(-2,2)(-1,3)%yY=def=YA{(0,1)}%Y=def=YB{(1,2)}%Y=def=YC{(1,0)}%{Y=def=Ysensyu{%−→Y=protect=Yemdottedline}Y=Tyokusen=YA=YB{}{}}O x{Y=def=Ysensyu{%Y=dashline[40]{.1}}Y=Tyokusen=YA=YC{}{}}Y=end{zahyou}%(cid:4) (cid:5)14.3.5 直線 ax+by+c=0方程式 ax+by+c=0 で与えられた直線を描画する Y=tyokusen です．y(cid:2) (cid:3)方程式の係数指定Y=begin{zahyou}(-2,2)(-1,3)%−→Y=tyokusen{1}{1}{-1}{}{}Y=end{zahyou}%(cid:4) (cid:5) O xその書式は(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)直線 ax+by+c=0 を描画する．Y=tyokusen[#1]#2#3#4[#5]#6[#7]#8#1 : Y=qbezier の [...]#1を与えないときは直線をY=qbezier ではなく，Y=drawline で描画する．#2 : a#3 : b#4 : c#6 : 左端の x座標 （#5 に [y] とすれば，y座標）#8 : 右端の x座標 （#7 に [y] とすれば，y座標）168

### Page 176

このコマンドでも，座標平面全体に描画するときは#5, #7は空でかまいません。14.3.6 直線 y =ax+bこれは，次節の一次関数のグラフ描画コマンドをご利用ください．14.3.7 点P(x1, y1)と直線ax+by+c=0の距離点Pと直線lの距離を求めることにより，点Pを中心としてlに接する円を描画することが出来ます．(cid:2) (cid:3)Y=tentotyokuseny{Y=unitlength10mm=YsmallY=begin{zahyou}(-2,2)(-2,2)%Y=def=YC{(1,1)}% 点Cを中心としY=tyokusen{1}{-1}{1}{}{}%−→ O x% 直線 x-y+1=0 にY=tentotyokusen=YC{1}{-1}{1}%Y=hankei%Y=En=YC=Yhankei% 接する円Y=end{zahyou}}%(cid:4) (cid:5)その書式は(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)点と直線の距離(1)点 P$(x1,y1)$ と直線 $ax+by+c=0$ との距離を求める．Y=tentotyokusen#1#2#3#4#5#1 : 点P#2 : $a$#3 : $b$#4 : $c$#5 : 点と直線の距離14.3.8 点P(x1, y1)と2点A,Bを通る直線の距離直線がその上の2点で指定された場合です．169

### Page 177

(cid:2) (cid:3)Y=tentoTyokusen{Y=unitlength6mm=Ysmall yY=begin{zahyou}(-2,4)(-3,3)%Y=def=YC{(1,1)}% 点Cを中心とし，Y=def=YA{(0,-2)}%−→ O xY=def=YB{(1,-1)}% 直線ABにY=tentoTyokusen=YC=YA=YB=YhankeiY=En=YC=Yhankei% 接する円Y=Tyokusen=YA=YB{}{}%Y=end{zahyou}}%(cid:4) (cid:5)その書式は(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)点と直線の距離(2)点 PY=retu(x1,y1) と直線 AB との距離を求める．Y=tentoTyokusen#1#2#3#4#1 : 点P#2 : 点A#3 : 点B#4 : 点と直線の距離14.4円の接線14.4.1 円周上の点における接線円周上の点における接線を描画するために，その方向ベクトルを求めるコマンドがY=ennoSessenです．(cid:2) (cid:3) y円周上の点における接線{Y=unitlength3mm=YsmallY=begin{zahyou}(-8,8)(-8,8)%Y=def=YO{(0,0)}%Y=def=YT{(3,4)}% −→ O xY=ennoSessen=YO=YT=YmY=mTyokusen=YT=Ym{}{}Y=En=YO{5}%Y=end{zahyou}}(cid:4) (cid:5)その書式は170

### Page 178

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)円周上の点における接線の単位方向ベクトルを求める．Y=ennoSessen#1#2#3{%#1 : 円の中心#2 : 円周上の点#3 : 接線の方向ベクトル（単位ベクトル）14.4.2 円外の点からの接線円の外部の点から円に引いた接線の2個の接点を求めるコマンドがY=enniSessenです．(cid:2) (cid:3)円外の点からの接線y{Y=unitlength10mm=YsmallY=begin{zahyou}(-1,3)(-2,2)%Y=def=YA{(3,2)}% 円外の点Y=def=YC{(1,0)}% 円の中心−→ O xY=def=Yhankei{1}% 円の半径Y=enniSessen=YC=Yhankei=YA=YT=YTTY=En=YC=YhankeiY=Drawline{=YA=YT=YC=YTT=YA=YC}%Y=end{zahyou}}(cid:4) (cid:5)書式は(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)円の外部の点から円に引いた接線の接点を求める．Y=enniSessen#1#2#3#4#5{%#1 : 円の中心#2 : 円の半径#3 : 円の外部の点#4 : 接点(1)#5 : 接点(2)2つの接点のうちx座標の小さい方等しいときは y座標の小さい方が #4 に入ります．171

### Page 179

14.4.3 二つの円の共通接線2つの円の共通外（内）接線を描画するためのコマンドがY=KTGAISessen, Y=KTNAISessen です。書式は(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=KTGAISessen#1#2#3#4#5#6#7#8Y=KTNAISessen#1#2#3#4#5#6#7#8#1 : 円1の中心#2 : 円1の半径#3 : 円2の中心#4 : 円2の半径#5 : 共通接線1と円1の接点#6 : 共通接線1と円2の接点#7 : 共通接線2と円1の接点#8 : 共通接線2と円2の接点で，共通接線と円との接点を求め，Y=Tyokusen などで共通接線を引きます。その一例です。(cid:2) (cid:3)共通接線{Y=unitlength10mm=Ysmall=YdrawaxisfalseY=begin{zahyou}(-5,5)(-5,5)%Y=def=YCi{(-1,0)}=Ydef=Yri{1}%Y=def=YCii{(2,1)}=Ydef=Yrii{2}%Y=En=YCi=Yri=YEn=YCii=YriiY=KTGAISessen=YCi=Yri=YCii=Yrii=YTi=YTii=YSi=YSiiY=Kuromaru=YTi=YKuromaru=YTii=YKuromaru=YSi=YKuromaru=YSiiY=Tyokusen[l]=YTi=YTii{}{}Y=Tyokusen[l]=YSi=YSii{}{}Y=KTNAISessen=YCi=Yri=YCii=Yrii=YTi=YTii=YSi=YSiiY=Kuromaru=YTi=YKuromaru=YTii=YKuromaru=YSi=YKuromaru=YSiiY=ennoSessen=YCi=YTi=YhoukouvY=mTyokusen[l]=YTi=Yhoukouv{}{}Y=ennoSessen=YCi=YSi=YhoukouvY=mTyokusen[l]=YSi=Yhoukouv{}{}Y=end{zahyou}}(cid:4) (cid:5)172

### Page 180

−→14.5半直線端点と方向角を六十分法で指定して半直線を描画するコマンドが Y=kHantyokusen です。y(cid:2) (cid:3)半直線（端点と方向角指定)Y=begin{zahyou}(-2,2)(-1,3)%Y=tenretu{A(1,1)e}%Y=def=Ykaku{150}% −→ AY=kHantyokusen=YA=YkakuY=Kuromaru=YA O xY=end{zahyou}%(cid:4) (cid:5)端点と方向ベクトルを指定する Y=mHantyokusen です。y(cid:2) (cid:3)半直線（端点と方向ベクトル指定)Y=begin{zahyou}(-2,2)(-1,3)%Y=tenretu{A(1,1)e}%Y=def=Yhoukou{(-2,1)}% −→ AY=mHantyokusen=YA=YhoukouY=Kuromaru=YA O xY=end{zahyou}%(cid:4) (cid:5)173

### Page 181

端点と通過する1点を指定する Y=Hantyokusen です。y(cid:2) (cid:3)半直線（端点と通過する1点指定)BY=begin{zahyou}(-2,2)(-1,3)%Y=tenretu{A(1,1)e;B(0,2)ne}%−→ AY=Hantyokusen=YA=YBY=kuromaru{=YA;=YB}%O xY=end{zahyou}%(cid:4) (cid:5)これらの半直線の線種を変更するには，<sensyu=....>オプションを利用します。一例です。(cid:2) (cid:3)鎖線で半直線 yY=begin{zahyou}(-2,2)(-1,3)%BY=tenretu{A(1,1)e;B(0,2)ne}%Y=Hantyokusen<%−→ Asensyu==Ychainline[.2][.1]>%Y=A=YBO xY=kuromaru{=YA;=YB}%Y=end{zahyou}%(cid:4) (cid:5)半直線の描画領域における端点を返すコマンドがY=HtyokuTです。半直線にラベルをつけたりするのに便利でしょう。(cid:2) (cid:3)Y=HtyokuTy(cid:7)Y=begin{zahyou}[ul=10mm]%(-1.5,1.5)(-1.5,1.5)Y=En=YO{1} → O xY=kHantyokusen=YO{60}Y=Put=YHtyokuT[se]{$=Yell$}Y=end{zahyou}(cid:4) (cid:5)174

### Page 182

15関数のグラフ関数のグラフを描画するのに，Perlを用いる方法があります。(cid:2) y =cosx (cid:3)Y=begin{zahyou}[ul=10mm](-5.5,5.5)(-1.2,1.5)Y=def=YFx{cos(X)}Y=YGraph=YFxY=end{zahyou}(cid:4) (cid:5)y→O x関数式の記述が簡単でお勧めですが，機種に依存する面もありますので別ファイルにしてあります。samplePp.texをご覧ください。175

### Page 183

16空間座標16.1 Zahyou環境zahyou環境が平面座標を扱ったのに対して，Zahyou環境は空間座標を扱います。単純な例です。(cid:2) (cid:3)空間座標{Y=unitlength6mm=YfootnotesizeY=begin{Zahyou}(-1,3)(-1,3)(-1,4)%Y=def=YO{(0,0,0)}Y=def=YP{(1,2,3)}Y=def=YH{(1,2,0)}Y=def=YA{(1,0,0)}zY=def=YB{(0,2,0)}3 P(1,2,3)Y=def=YC{(0,0,3)}Y=iiiKuromaru=YPY=iiiPut=YP[ne]{P(1,2,3)} −→Y=iiiDashline[40]{.1}{=YA=YH=YB} O 2 y1Y=iiiDashline[40]{.1}{=YO=YH=YP=YC}xY=iiiPut=YA[n]{1}Y=iiiPut=YB[n]{2}Y=iiiPut=YC[w]{3}Y=iiiPut=YO[nw]{O}Y=iiiPut{(=YXmax,0,0)}[nw]{$x$}Y=iiiPut{(0,=YYmax,0)}[e]{$y$}Y=iiiPut{(0,0,=YZmax)}[e]{$z$}Y=end{Zahyou}}(cid:4) (cid:5)簡単に解説します。まず，Zahyou環境はxの範囲，yの範囲，zの範囲を(xの下限,xの上限),(yの下限,yの上限),(zの下限,zの上限)の形で与えます。これらの値は，Zahyou環境内では，順にY=Xmin, =YXmax, =YYmin, =YYmax, =YZmin, =YZmaxで引用することができます。点は Y=def=YP{(1,2,3)}のように3次元ベクトルで与えます。次いで，Y=iiiKuromaru=YPで点Pに黒丸を打ちます。座標平面で定義された多くのコマンドの先頭に‘iii’をつけた空間座標用のコマンドが定義されています。現時点で定義されているコマンドは次の通りです。176

### Page 184

Y=iiiPut, =YiiiPutStrY=iiiBuntenY=iiiDrawline, =YiiiDashline, =YiiiArrowLineY=iiiTyokkakukigou, =YiiiHenKoY=iiiKuromaru, =YiiiSiromaruY=iiiKyori, =YiiiKyoriiY=iiiAddvec, =YiiiSubvec, =YiiiMulvecY=iiiNuritubusiY=iiibGurafu空間特有のコマンドについては，次節以降でとりあげます。さて，座標軸の向き，単位長の変更についてのオプション機能です。Zahyou環境の[...]オプションでx, y, z軸の単位ベクトルを指定できるようにしてあります。ただし，それらは描画する平面を座標平面と見立てての成分表示です。デフォルトではz軸：(0, 1)y軸：(1, 0)x軸は Y=kyokuTyoku(.667,-138)となっています。これを変更してみます。(cid:2) (cid:3)基本単位ベクトルの変更{Y=unitlength6mmY=begin{Zahyou}%[(-.7,-.7)][(.7,-.7)][(0,.7)]%(-1,3)(-1,3)(-1,4)%Y=def=YO{(0,0,0)}Y=def=YP{(1,2,3)}Y=def=YH{(1,2,0)}zY=def=YA{(1,0,0)} 3Y=def=YB{(0,2,0)}Y=def=YC{(0,0,3)} O P(1,2,3)Y=iiiKuromaru=YP −→ 12Y=iiiPut=YP[ne]{P(1,2,3)}x yY=iiiDashline[40]{.1}{=YA=YH=YB}Y=iiiDashline[40]{.1}{=YO=YH=YP=YC}Y=iiiPut=YA[n]{1}Y=iiiPut=YB[n]{2}Y=iiiPut=YC[w]{3}Y=iiiPut=YO[nw]{O}Y=iiiPut{(=YXmax,0,0)}[nw]{$x$}Y=iiiPut{(0,=YYmax,0)}[e]{$y$}Y=iiiPut{(0,0,=YZmax)}[e]{$z$}Y=end{Zahyou}}(cid:4) (cid:5)177

### Page 185

16.2角錐角錐を描画するのにコマンドY=Kakusuiを用意しました。O(0, 0, 0), A(1, 0, 0), B(0, 1, 0)を頂点とする三角形OABを底面とし，C(0, 0, 1)を頂点とする角錐—四面体を描画してみます。(cid:2) (cid:3)角錐{Y=unitlength20mm=YfootnotesizeY=DrawaxisfalseY=begin{Zahyou}(0,1.1)(0,1)(0,1.1)CY=def=YO{(0,0,0)}Y=def=YA{(1,0,0)}Y=def=YB{(0,1,0)}−→Y=def=YC{(0,0,1)}OBY=iiiPut=YA[w]{A}Y=iiiPut=YB[e]{B}AY=iiiPut=YO[ne]{O}Y=iiiPut=YC[n]{C}Y=Kakusui{AB}{O}{C}Y=end{Zahyou}}(cid:4) (cid:5)ここでは，座標軸を描画しないように指定するのに，Y=Drawaxisfalseとしています。Y=Kakusuiの書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Kakusui<#1>#2#3#4#1 : 角錐台を描画する際の切断面の位置 (0〜1)#2 : 見える頂点列#3 : 見えない頂点列#4 : 錐の頂点図の見えない部分の点線のスタイルは，デフォルトではY=def=YiiiTensen{=YiiiDashline[40]{.1}}となっていますが，これを再定義してみます。178

### Page 186

(cid:2) (cid:3)Y=iiiTensenの再定義{Y=unitlength20mm=YfootnotesizeY=DrawaxisfalseY=def=YiiiTensen{=YiiiDashline[80]{.05}}Y=begin{Zahyou}(0,1.1)(0,1)(0,1.1) CY=def=YO{(0,0,0)}Y=def=YA{(1,0,0)}Y=def=YB{(0,1,0)} −→OY=def=YC{(0,0,1)} BY=iiiPut=YA[w]{A}AY=iiiPut=YB[e]{B}Y=iiiPut=YO[ne]{O}Y=iiiPut=YC[n]{C}Y=Kakusui{AB}{O}{C}Y=end{Zahyou}}(cid:4) (cid:5)16.3角柱立方体，直方体，平行六面体を描画するためにY=Kakutyuuを用意してあります。平行六面体を描画してみます。(cid:2) (cid:3)角柱{Y=unitlength8mm=YfootnotesizeY=DrawaxisfalseY=begin{Zahyou}[][][(.2,1)]%(0,1.6)(0,3.1)(0,2.1)Y=def=YO{(0,0,0)}−→Y=def=YA{(1.5,0,0)}Y=def=YC{(0,3,0)}Y=def=YD{(0,0,2)}Y=iiiAddvec=YA=YC=YBY=Kakutyuu{ABC}{O}{D}Y=end{Zahyou}}(cid:4) (cid:5)直方体ではないことを示すため，z軸方向の単位ベクトルを変更した斜交座標系を用いています。Y=Kakutyuuの書式です。179

### Page 187

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=Kakutyuu#1#2#3#1 : 見える頂点列#2 : 見えない頂点列#3 : 高さベクトル16.4直線と平面の交点直線と平面の交点を求めるコマンドは，次の4つを用意してあります。Y=PandL, Y=Pandl, Y=pandL, Y=pandlここで，P は3点を指定した平面p は点と法線ベクトルを指定した平面L は2点を指定した直線l は点と方向ベクトルを指定した直線を意味します。一例として直方体OABC-DEFGの対角線OFと3点A, C, Dを含む平面との交点Pを描画してみます。180

### Page 188

(cid:2) (cid:3)直線と平面{Y=unitlength7mm=YfootnotesizeY=DrawaxisfalseY=begin{Zahyou}(0,3)(0,6)(0,4)Y=def=YO{(0,0,0)}Y=def=YA{(2,0,0)}Y=def=YC{(0,4,0)}Y=def=YD{(0,0,3)}Y=iiiAddvec=YA=YC=YBY=iiiAddvec=YA=YD=YEY=iiiAddvec=YC=YD=YGY=iiiAddvec=YB=YD=YFDGY=PandL=YA=YC=YD=YO=YF=YPY=iiiKuromaru=YP E FY=Kakutyuu{ABC}{O}{D} −→Y=iiiNuritubusi{=YA=YC=YD=YA}Y=iiiDrawline{=YC=YA=YD} O CY=iiiDrawline{=YF=YP} A BY=iiiDashline[60]{.1}{=YO=YP}Y=iiiDashline[60]{.1}{=YC=YD}Y=iiiPut=YO[se]{O}Y=iiiPut=YA[s]{A}Y=iiiPut=YB[s]{B}Y=iiiPut=YC[se]{C}Y=iiiPut=YD[ne]{D}Y=iiiPut=YE[w]{E}Y=iiiPut=YF[e]{F}Y=iiiPut=YG[e]{G}Y=end{Zahyou}}(cid:4) (cid:5)書式です。181

### Page 189

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=PandL#1#2#3#4#5#63点#1, #2, #3を通る平面と，2点#4, #5を通る直線との交点を#6にY=Pandl#1#2#3#4#5#63点#1, #2, #3を通る平面と，点#4を通り方向ベクトルが#5の直線との交点を#6にY=pandL#1#2#3#4#5点#1を通り法線ベクトルが#2の平面と，2点#3, #4を通る直線との交点を#5にY=pandl#1#2#3#4#5点#1を通り法線ベクトルが#2の平面と，点#3を通り方向ベクトルが#4の直線との交点を#5に16.5垂線座標平面で，点から直線に下した垂線の足を求めるコマンドY=Suisenの3次元版の話しです。書式です。(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=LSuisen#1#2#3#4点 #1 から直線 #2#3 へ下ろした垂線の足を #4 にセットY=lSuisen#1#2#3#4点#1から，点#2を通り，方向ベクトルが#3の直線への垂線の足を #4 にセットY=pSuisen#1#2#3#4点#1から，#2を通り法線ベクトルが#3である平面に下ろした垂線の足を#4に与える。Y=PSuisen#1#2#3#4#5点#1から，三点#2,#3,#4を通る平面に下ろした垂線の足を#5に与える。例として，四面体OABCの頂点Oから底面ABCに下した垂線OPと，Oから線分ABに下した垂線OHを作図します。182

### Page 190

(cid:2) (cid:3)垂線{Y=unitlength20mm=YfootnotesizeY=DrawaxisfalseY=begin{Zahyou}(0,1.2)(0,1.2)(0,1.2)Y=def=YO{(0,0,0)}Y=def=YA{(1,0,0)}Y=def=YB{(0,1,0)}Y=def=YC{(0,0,1)}Y=PSuisen=YO=YA=YB=YC=YPY=LSuisen=YO=YA=YB=YHCY=iiiKuromaru=YPY=iiiKuromaru=YHY=Kakusui{AB}{O}{C}−→Y=iiiNuritubusi{=YO=YC=YH=YO} POY=iiiDrawline{=YC=YH} BHY=iiiDashline[80]{0.05}{=YH=YO=YP}AY=iiiTyokkaku=YP[=YO]=YCY=iiiTyokkaku=YH[=YO]=YAY=iiiTyokkaku=YH[=YC]=YBY=iiiPut=YA[s]{A}Y=iiiPut=YB[s]{B}Y=iiiPut=YC[n]{C}Y=iiiPut=YO[w]{O}Y=iiiPut=YP[e]{P}Y=iiiPut=YH[s]{H}Y=end{Zahyou}}(cid:4) (cid:5)16.6空間曲線座標平面で媒介変数表示された曲線を描画するコマンドY=bGurafu の3次元版がY=iiibGurafuです。書式は183

### Page 191

(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)(cid:3)(cid:2)Y=iiibGurafu(#1)(#2)#3#4#5#6#7#1 : t の刻み値（デフォルト値は 0.05 ）#2 : 点線で描画するときの描画する部分の t のレンジ#3 : x=f(t)#4 : y=g(t)#5 : z=h(t)#6 : t の始め値#7 : 終り値具体例として，円柱螺旋を描画してみましょう。(cid:2) (cid:3)円柱螺旋{Y=unitlength20mm=YfootnotesizeY=DrawaxisfalseY=begin{Zahyou}[(-1,0)][(0,-.5)][(0,.2)]%(-2,2)(-2,2)(-1,18)Y=def=YFx#1#2{=YCos{#1}#2}Y=def=YFy#1#2{=YSin{#1}#2}Y=def=YFz#1#2{=Yedef#2{#1}}Y=def=YFo#1#2{=Yedef#2{0}}Y=def=YFi#1#2{=Yedef#2{=Ytmax}}Y=Mul3=YPie=YPiiiY=Mul4=YPie=Ytmax{Y=thicklinesY=iiibGurafu=YFx=YFy=YFz{0}{=YPie}Y=iiibGurafu=YFx=YFy=YFz{=YPii}{=YPiii}Y=iiibGurafu(.05)(.02)=YFx=YFy=YFz{=YPie}{=YPii}Y=iiibGurafu(.05)(.02)=YFx=YFy=YFz{=YPiii}{=Ytmax}}Y=iiibGurafu=YFx=YFy=YFo{0}{=YPie}Y=iiibGurafu(.05)(.02)=YFx=YFy=YFo{=YPie}{=YPii}Y=iiibGurafu=YFx=YFy=YFi{0}{=YPii}Y=iiiDrawline{(1,0,0)(1,0,=Ytmax)}Y=iiiDrawline{(-1,0,0)(-1,0,=Ytmax)}Y=end{Zahyou}}(cid:4) (cid:5)184

### Page 192

−→なお，空間曲線を近似する折れ線を得るコマンドY=iiiBKinziOresenもありますが，これはperlとの連携機能を必要とします。185

### Page 193

17作表この節の環境，コマンド類は emathT.sty で定義されています。したがって，プリアンブルでY=usepackage{emathT}を宣言しておく必要があります．17.1列幅指定表を作成するには，tabular環境，array環境があります．これらの環境で作成される表の列幅は，列の中に置かれる内容によって自動的に定まります．(cid:2) (cid:3)表の幅Y=begin{tabular}{|*{4}{c|}}=Yhline& かみ & いし & はさみ Y=Y=Y=hlineかみ & & ○ & × Y=Y=Y=hlineいし & × & & ○ Y=Y=Y=hlineはさみ & ○ & × & Y=Y=Y=hlineY=end{tabular}(cid:4) (cid:5)かみ いし はさみかみ ○ ×−→いし × ○はさみ ○ ×これは便利ですが，ときには列幅を指定したいこともあります．欄指定子 l/c/r を発展させてL/C/R を用意しました．これらは，列の幅を引数に取ります．その一例です．(cid:2) (cid:3)列幅一定の表Y=begin{tabular}{|*{4}{C{4zw}|}}=Yhline& かみ & いし & はさみ Y=Y=Y=hlineかみ & & ○ & × Y=Y=Y=hlineいし & × & & ○ Y=Y=Y=hlineはさみ& ○ & × & Y=Y=Y=hlineY=end{tabular}(cid:4) (cid:5)かみ いし はさみかみ ○ ×−→いし × ○はさみ ○ ×186

### Page 194

17.2表の罫線を太く17.2.1 Y=arrayrulewidth表の罫線全部を太くするのは，LATEXで用意されているY=arrayrulewidthの値を変更することで実現できます。(cid:2) (cid:3)Y=arrayrulewidthの変更Y=arrayrulewidth1pt=YrelaxA B C DY=begin{tabular}{|c|c|c|c|}=YhlineA & B & C & D =YY=Y=hline → 1 2 3 41 & 2 & 3 & 4 =YY=Y=hline a b c da & b & c & d =YY=Y=hlineY=end{tabular}(cid:4) (cid:5)17.2.2 外枠のみを太く外枠だけを太くしたい，など一部の罫線を太くするには，面倒な手順を踏まねばなりませんので，マクロ化することにしました。横罫線を太くするためにY=hline, =Yclineにかえて，それぞれY=hlineb, =Yclinebを新設しました。これらの罫線の太さはY=arrarulewidthbで指定します。デフォルトは1ptとしてあります。縦罫線を太くする位置には|にかえてIを用います。では，これらを用いて外枠だけを太くしてみましょう。(cid:2) (cid:3)外枠を太くY=begin{tabular}{Ic|c|c|cI}=YhlinebA B C DA & B & C & D =YY=Y=hline→ 1 2 3 41 & 2 & 3 & 4 =YY=Y=hlinea b c da & b & c & d =YY=Y=hlinebY=end{tabular}(cid:4) (cid:5)187

### Page 195

17.2.3 二重罫線との併用さらに，見出し行・列と表の内容との境界を二重線にすることもできます。この部分はhhline.styの一部を修正しています。なお，emathT.styはその中で，array.styとhhline.styを読み込んでいます。(cid:2) (cid:3)二重罫線もY=begin{tabular}{Ic||c|c|cI}=YhlinebA B C DA & B & C & D =YY=Y=hhline{I=#=|=|=I}→ 1 2 3 41 & 2 & 3 & 4 =YY=Y=hlinea b c da & b & c & d =YY=Y=hlinebY=end{tabular}(cid:4) (cid:5)17.2.4 太罫線の太さ太罫線の太さはY=arrayrulewidthbで決まりますから，もっと太くしたければ(cid:2) (cid:3)Y=arrayrulewidthbY=arrayrulewidthb=2pt=YrelaxA B C DY=begin{tabular}{Ic||c|c|cI}=YhlinebA & B & C & D =YY=Y=hhline{I=#=|=|=I} → 1 2 3 41 & 2 & 3 & 4 =YY=Y=hline a b c da & b & c & d =YY=Y=hlinebY=end{tabular}(cid:4) (cid:5)17.2.5 特定のブロック枠を太く(cid:2) (cid:3)一部分を太罫線でY=begin{tabular}{|c|c|c|c|}=YhlinebA & B & C & D =YY=Y=hlineY=noalign{=Yvskip-=Yarrayrulewidth}Y=clineb{2-3}Y=multicolumn{1}{|cI}{1}& Y=multicolumn{1}{c|}{2}A B C D& Y=multicolumn{1}{cI}{3}→ 1 2 3 4& 4 Y=Y=a b c dY=noalign{=Yvskip-=YarrayrulewidthbY=vskip=Yarrayrulewidth}Y=clineb{2-3}Y=noalign{=Yvskip=YarrayrulewidthbY=vskip-=Yarrayrulewidth}=Yhlinea & b & c & d =YY=Y=hlinebY=end{tabular}(cid:4) (cid:5)188

### Page 196

17.3罫線を点線で罫線を点線で引くには，arydshln.styを用いることが出来ます。しかし，このスタイルファイルはhhline.styと相性が悪いので，emathT.styとの併用については，emathWiki の arydshln-LO-Tなるページをご覧ください。17.4カラムに斜線また，この環境内では，Y=emTsya コマンドで欄に斜線を引くことができます．(cid:2) (cid:3)カラムに斜線Y=begin{tabular}{|L{6zw}|*{3}{C{4zw}|}}=YhlineY=emTsya[r]<=Yhyoumidasi{甲}{乙}> & かみ & いし & はさみ Y=Y=Y=hlineかみ & Y=emTsya[r] & ○ & × Y=Y=Y=hlineいし & × & Y=emTsya[r] & ○ Y=Y=Y=hlineはさみ & ○ & × & Y=emTsya[r] =YY=Y=hlineY=end{tabular}(cid:4) (cid:5)甲 乙 かみ いし はさみかみ ○ ×−→いし × ○はさみ ○ ×詳しくは emathWiki の emTsya なるページをご覧ください。189

### Page 197

18囲み18.1 rectbox環境この節で紹介するrectbox環境はemathPb.styで定義されています。版面，左右いっぱいに拡がる罫線囲みです。(cid:2) (cid:3)rectbox環境Y=begin{rectbox}[item=~見出し~]あああいいいY=end{rectbox}(cid:4) (cid:5)↓見出しあああいいい詳しくは，emathWiki の「枠囲み」のページをご覧ください。190

### Page 198

19その他19.1線の太さ線の太さは3種類用意されています。（デフォルトは Y=thinlines です。）(cid:2) (cid:3)線の太さY=begin{picture}(3,4)%Y=thinlinesY=put(0,3){=Ydrawline(0,0)(3,0)}%{Y=thicklines −→Y=put(0,2){=Ydrawline(0,0)(3,0)}}%{Y=ThicklinesY=put(0,1){=Ydrawline(0,0)(3,0)}}%Y=end{picture}(cid:4) (cid:5)もっと太くしたい，というときは Y=allinethickness というコマンドもeepic.styで用意されています。引数に太さを与えます。(cid:2) (cid:3)Y=allinethicknessY=begin{picture}(3,2)%{Y=allinethickness{2pt}% −→Y=put(0,1){=Ydrawline(0,0)(3,0)}}%Y=end{picture}(cid:4) (cid:5)191

### Page 199

索 引Y=Absvec, 133 Y=Gaisin, 118Y=Addvec, 133Y=Hasen, 9Y=Argvec, 133Y=hasen, 8Y=ArrowArc, 78Y=Hasen*, 10Y=ArrowHeadAngle, 15Y=HenKo, 36Y=ArrowHeadType, 16Y=HtyokuT, 174Y=ArrowLine, 14Y=iiiAddvec, 177Y=Bousetuen, 121Y=iiiArrowLine, 177Y=BousetuenHankei, 122Y=iiibGurafu, 183Y=Bousin, 121Y=iiiBKinziOresen, 185Y=CandC, 96 Y=iiiBunten, 177Y=Candk, 95 Y=iiiDashline, 177Y=CandL, 94 Y=iiiDrawline, 177Y=Candl, 94 Y=iiiHenKo, 177Y=Chainline, 10 Y=iiiKuromaru, 176, 177, 181Y=changeArrowHeadSize, 15 Y=iiiKyori, 177Y=iiiKyorii, 177Y=Daen, 81Y=iiiMulvec, 177Y=Daen*, 104Y=iiiNuritubusi, 177Y=Daen**, 109Y=iiiPut, 177Y=Daenko, 82Y=iiiPutStr, 177Y=Daenko*, 105Y=iiiSiromaru, 177, 181Y=Daenko**, 109Y=iiiSubvec, 177Y=Dashline, 6Y=iiiTensen, 178Y=drawaxisfalse, 139Y=iiiTyokkakukigou, 177Y=Drawline, 4Y=Drawlines, 10 Y=Kaiten, 134Y=drawXaxis, 139 Y=Kakukigou, 52Y=drawXYaxis, 139 Y=Kakusui, 178Y=drawYaxis, 139 Y=Kakutyuu, 179Y=kousi, 21Y=emathPut, 27Y=kSuisen, 91Y=En, 74Y=kTaisyouten, 91Y=En*, 102Y=KTGAISessen, 172Y=En**, 108Y=KTNAISessen, 172Y=Enko, 75Y=kTyokusen, 167Y=enniSessen, 171Y=Kuromaru, 162Y=ennoSessen, 170Y=kuromaru, 163Y=KuromaruHankei, 162Y=Gaisetuen, 118192

### Page 200

Y=kyokuTyoku, 19 Y=sensyu, 167Y=Kyori, 163 Y=Siromaru, 162Y=Kyorii, 164 Y=siromaru, 163Y=sPut, 38Y=Landk, 89, 90Y=Subvec, 133Y=LandL, 87Y=Suisen, 90Y=Landl, 88Y=landl, 88 Y=Taisyouten, 91Y=lR, 119, 130 Y=Takakkei, 18Y=lr, 121 Y=tenretu, 32, 33Y=lRR, 130 Y=tenretu*, 34Y=LSuisen, 182 Y=tentoTyokusen, 170Y=lSuisen, 182 Y=tentotyokusen, 169Y=Touhenkigou, 49Y=mSuisen, 91Y=touhenkigou, 50Y=mTaisyouten, 91Y=toukakukigou, 58Y=mTyokusen, 166Y=toukakukigou*, 58Y=Mulvec, 133Y=Toukokigou, 80Y=Tyokkakukigou, 59Y=Naisetuen, 120Y=tyokkakukigou, 61Y=Naisin, 119Y=Tyokusen, 164Y=Nuritubusi, 102Y=tyokusen, 168Y=Nuritubusi*, 108, 109Y=Nvec, 133Y=vBousin, 122Y=vecXY, 133Y=oresen, 34Y=vGaisin, 119Y=ougigata, 80Y=vNaisin, 121Y=ougigata*, 103Y=ougigata**, 109xpos オプション, 160Y=xscale, 146Y=PSuisen, 182Y=pSuisen, 182Y=Yasen, 12Y=Put, 24Y=yasen, 12Y=PutStr, 32Y=Yogen, 132Y=yogen, 131Y=rotObrace, 48ypos オプション, 161Y=rotUbrace, 46Y=yscale, 146Y=Rotvec, 133Y=yumigata, 80Y=rtenretu, 35Y=yumigata*, 104Y=rtenretu*, 36Y=yumigata**, 109Y=saikoro, 22Zahyou 環境, 176Y=Seigen, 130zahyou 環境, 152Y=seigen, 130Y=zahyouMemori, 152Y=seigenR, 130Y=Zyuusin, 117193

### Page 201

さいころ, 22194

